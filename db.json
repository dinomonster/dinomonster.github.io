{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon1.ico","path":"favicon1.ico","modified":1,"renderable":0},{"_id":"source/favicon.ico","path":"favicon.ico","modified":1,"renderable":0},{"_id":"source/about/index/weichat.jpg","path":"about/index/weichat.jpg","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar111.gif","path":"images/avatar111.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","path":"vendors/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/bower.json","path":"vendors/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","path":"vendors/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","path":"vendors/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","path":"vendors/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","path":"vendors/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","path":"vendors/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","path":"vendors/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","path":"vendors/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","path":"vendors/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/images/qr-wechat.png","path":"images/qr-wechat.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","path":"vendors/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","path":"vendors/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","path":"vendors/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","path":"vendors/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendors/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","path":"vendors/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"20038353db532b4c40625419d396da7359f89cbe","modified":1470630783672},{"_id":"themes/next/.gitignore","hash":"80710b94ff2f6c013859ebffffe90f9295fc94ed","modified":1470630783675},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1470630783673},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1470630783676},{"_id":"themes/next/.javascript_ignore","hash":"beb0b95736650284ceb712a162cc033847a83cd3","modified":1470630783675},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1470630783675},{"_id":"source/favicon1.ico","hash":"a4539ad710039e61825239ae281835c8f007ca7d","modified":1470813665215},{"_id":"themes/next/bower.json","hash":"da39b00fcdf2e7a42af412de0a4d3617cc6d7084","modified":1470630783678},{"_id":"themes/next/gulpfile.coffee","hash":"4e8c1082fa82e383494ff5b5963b7936d9c7bb2e","modified":1470630783678},{"_id":"source/favicon.ico","hash":"ff5e045652ebd4837efd6a26447b8f6423392f05","modified":1470813665480},{"_id":"themes/next/README.md","hash":"06aaf1241e9e1619956c86d8b1397a643840a9d1","modified":1470630783677},{"_id":"themes/next/README.en.md","hash":"fa31bbc6dd8778b8dee469740c92b3b5b59702af","modified":1470630783676},{"_id":"source/_posts/2016-8-8.md","hash":"b9e5831b9ca84d5366db094b821704977b4d981b","modified":1470628045553},{"_id":"themes/next/package.json","hash":"95eaba1607544965e432d56406bae391dd11bcbb","modified":1470630783704},{"_id":"source/_posts/2016-08-05.md","hash":"ee4296f44581201b4d26daa62102e7df5768182f","modified":1476064558947},{"_id":"source/_posts/git-nothing-added-to-commit-but-untracked-files-present.md","hash":"db22f8ccaab964f627868f8d577a2c3c689f461d","modified":1476082261767},{"_id":"source/_posts/vector动画以及兼容.md","hash":"70c835c256e0c16f61cec158c14dac673a82f6dc","modified":1476094159132},{"_id":"source/_posts/Android如何使用Vector-矢量图-兼容旧版本.md","hash":"79aea55d45bd97a78690e9ef28e3c3913cf5305b","modified":1475134977402},{"_id":"source/_posts/为过滤动态加入单选按钮.md","hash":"60efe5f883305fbed1128e844335ef0005979357","modified":1472180282394},{"_id":"source/_posts/使用AnimatorSet执行一组动画.md","hash":"bbdab793f8d0207ee20e35f74e50120b186a7786","modified":1475745026709},{"_id":"source/_posts/2016-8-9.md","hash":"e47ea07fee4d23a209ddcfade573d2de211165ae","modified":1470713427165},{"_id":"source/_posts/仿ios下载控件.md","hash":"9f416e1bf4dd8f20c52e36e2a3eb9a18bbee97cf","modified":1472088186524},{"_id":"source/_posts/Android读取json配置.md","hash":"df3706270b2fc7892ad1549955e589806e438856","modified":1470730678908},{"_id":"source/_posts/制作gif.md","hash":"02169635171fdd65a3a16fcf82c9ea19d238d3c3","modified":1472179548947},{"_id":"source/tags/index.md","hash":"98ca0a8fc38eebfa3baeb9a86720ea7d841d2451","modified":1470643089900},{"_id":"source/about/index.md","hash":"878d2413fd9eaa5b79a3e945e332797c7af4ca10","modified":1470709956237},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"4312fb37fa2b8663006be3c4fe01125ec01171c1","modified":1470630783674},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"2692e36cc35b1594530981e7727771f601720a43","modified":1470630783674},{"_id":"source/_posts/使用drawable来实现圆形按钮以及点击效果.md","hash":"5ebd135f52900b6efb66f41192d476a3f87f78b8","modified":1471397044818},{"_id":"themes/next/languages/de.yml","hash":"4c3ffeb0d214c807a226dd98214958cb5483df1c","modified":1470630783679},{"_id":"themes/next/_config.yml","hash":"523013b4c5612b0a63865462040ddf24c363c61f","modified":1470816890205},{"_id":"source/_posts/实现自定义banner.md","hash":"ac24b7af32186ee9694f4431394f9007690f8d1c","modified":1472175751478},{"_id":"themes/next/languages/fr-FR.yml","hash":"d8a40fe025fad6f42df0cf16d4be2d513769b062","modified":1470630783680},{"_id":"themes/next/languages/default.yml","hash":"d2f6784b9c6567b64e58736e36025dbf96d863d4","modified":1470630783679},{"_id":"themes/next/languages/en.yml","hash":"df81ab6b1cf3c88ed053d3766381cd12eb659fe3","modified":1470630783680},{"_id":"themes/next/languages/ja.yml","hash":"e594aa42a33c489e4a65065659a01bb76c3c0cb5","modified":1470630783682},{"_id":"themes/next/languages/pt.yml","hash":"4c64594f477905d5d2d9ca2422f03175b7b0c617","modified":1470630783683},{"_id":"themes/next/languages/id.yml","hash":"19537c8bae42c4c2e7d06a64537e8dfd503b7e19","modified":1470630783681},{"_id":"themes/next/languages/ru.yml","hash":"c3aedb94decf05a301662afc3398ab563dd9995a","modified":1470630783684},{"_id":"themes/next/languages/zh-hk.yml","hash":"88e603eb0f3fd25c35bb37bd30372fd77bba7c46","modified":1470630783685},{"_id":"themes/next/languages/zh-tw.yml","hash":"04479b419c72b71fd34046f3fc33ebda4fe8de84","modified":1470630783685},{"_id":"themes/next/languages/pt-BR.yml","hash":"81498b783372f11b2149bd2b1731e78432760a0e","modified":1470630783683},{"_id":"themes/next/layout/_layout.swig","hash":"1138b849e1240249480849cc2b6c6d09b28207a5","modified":1470630783686},{"_id":"themes/next/layout/index.swig","hash":"e5b52e04296203262a400e8e36ae12426d31fd5b","modified":1470630783702},{"_id":"themes/next/layout/archive.swig","hash":"b867a08f6b43de8b5d700c84b943df55917407ae","modified":1470630783702},{"_id":"themes/next/layout/tag.swig","hash":"6f764ea3ab11eeb7c530df45528d449b14f5dc62","modified":1470630783703},{"_id":"themes/next/scripts/merge-configs.js","hash":"f8cde6953939802f92da5b7a2458c6c539e9be69","modified":1470630783704},{"_id":"themes/next/layout/category.swig","hash":"58cf08388901f7549b1fca95548b2c79173aa840","modified":1470630783702},{"_id":"themes/next/layout/post.swig","hash":"b8334c479840b7724638eec71971cbd8512ae58d","modified":1470630783703},{"_id":"themes/next/layout/page.swig","hash":"a91e3fd7aef26e8a02e339e3372801c517f400cf","modified":1470818532972},{"_id":"themes/next/languages/zh-Hans.yml","hash":"23b45e77c1846c9457b98c745a60a9461678c389","modified":1470641322347},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1470630783790},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783756},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1470630783791},{"_id":"source/_posts/2016-8-8/catalog.jpg","hash":"5bbc2f21824726400b6257881bacc046fdce45f3","modified":1470625317715},{"_id":"source/_posts/2016-08-05/sshkeyresult.png","hash":"74c20c83de6f43ff450a897d43aa2fe073624182","modified":1470368290922},{"_id":"source/_posts/Android读取json配置/filter.jpg","hash":"c4d07ca2bab57a4029243bac42ba50b00c1c7ca4","modified":1470730325280},{"_id":"source/_posts/2016-08-05/addsshkeytogithub.png","hash":"dea6818f2b8415a4fd202d8524473a1ee38d4c44","modified":1470623737912},{"_id":"source/_posts/使用drawable来实现圆形按钮以及点击效果/btn_click.jpg","hash":"df11acccc44d18b70506c1888fda46a3a44c376d","modified":1471345679133},{"_id":"source/_posts/实现自定义banner/1.jpg","hash":"3389471d69a4991b32157cb979b81fb7b558b448","modified":1472113622405},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"b87a5122dbff1d5fccf8f3d09d1640bd4b01c4a0","modified":1470630783687},{"_id":"themes/next/layout/_macro/post.swig","hash":"843389ec3cb4c2baa6a6a2bb916f803c89ca723b","modified":1470630783687},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1470630783791},{"_id":"source/about/index/weichat.jpg","hash":"64f7ad7ba8969a1fcf853e19f3d2b7c6e9b060b5","modified":1470644562960},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"c5cc0070ca7c9a8dbd4b09e0398db536c3cdbe8a","modified":1470630783689},{"_id":"themes/next/layout/_macro/reward.swig","hash":"b6cb171f0ed227b82b8f7601814af2df93f3a09a","modified":1470630783688},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1470630783690},{"_id":"themes/next/layout/_partials/footer.swig","hash":"3609160a90e3e86fea606c410b50eb4916815baf","modified":1470640528563},{"_id":"themes/next/layout/_partials/comments.swig","hash":"5d84f3938e99f1908a6a1d44dd530740625f0188","modified":1470630783690},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1470630783692},{"_id":"themes/next/layout/_partials/search.swig","hash":"95b55fe35f2d2c22f2cc055d4379b5435314c7ec","modified":1470630783693},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"c5db707b46eac6a5df1d2a77f8556945a66fd181","modified":1470630783695},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1470630783695},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1470630783696},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"8aa5212d803670179222dbc80e73eadd7328d8e5","modified":1470630783689},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1470630783704},{"_id":"themes/next/scripts/tags/full-image.js","hash":"86194a05a8c6499de0b2aaa525d6de135778c0ae","modified":1470630783705},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1470630783705},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"c9d45628330ce8bf5fbe71c9f131c7d75334c1c4","modified":1470630783702},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1470630783756},{"_id":"themes/next/source/images/avatar111.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1470630783757},{"_id":"themes/next/source/images/avatar.jpg","hash":"3d04a8d6e4747aa26ee2a9419c250e7663659f20","modified":1470377739924},{"_id":"themes/next/layout/_partials/head.swig","hash":"ef256272090b5217719c5301f0477f5c4a84a5f9","modified":1470646083175},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1470630783757},{"_id":"themes/next/layout/_partials/header.swig","hash":"c0697644817f1570093de9f17ea096295da8c5f1","modified":1470630783692},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1470630783757},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1470630783758},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1470630783759},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1470630783759},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1470630783758},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1470630783758},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1470630783759},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1470630783759},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1470630783759},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1470630783760},{"_id":"source/_posts/实现自定义banner/2.gif","hash":"1c15d20ad1854211da927fa0e0fa94022facd264","modified":1472175645197},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783696},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783696},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783743},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783743},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783745},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783753},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1470630783760},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1470630783755},{"_id":"source/_posts/使用drawable来实现圆形按钮以及点击效果/btn_normal.jpg","hash":"34d6ec0a5b8a1b892382b719d522982c71efa5d5","modified":1471345653917},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"efa7efcbb575381b508f9aa0e0c53140eef72a7b","modified":1470630783693},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1470630783693},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1470630783693},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"bf8e9223a40748b2e3ef77d753a8e1dbbce8095e","modified":1470630783694},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"3fdde03f45a80f7a85097a40b40358adde618fc7","modified":1470630783694},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1470630783694},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1470630783696},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"91c5353fcb94cc3b3f265b06ad2341734bc4c826","modified":1470630783697},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"8ba01f1ac07fbca62a4b00f5a0a3a506122c1530","modified":1470630783699},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"12684840de632eb16e53ffa863166306a756fd4f","modified":1470630783695},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1470630783692},{"_id":"themes/next/layout/_partials/share/sharesdk.swig","hash":"b9567b0550e209f063313ba8e48416ac44bffb64","modified":1470716729493},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"4a5c6df1579a4ca72ed17f7dbd6d16a509aa7dc8","modified":1470630783701},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1470630783697},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"e495aed8fb36bf8015ddbd64366270a7debad2b0","modified":1470630783700},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1470630783722},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"a0f23e75a137d8c996c70e2059e0074f1e97a127","modified":1470630783744},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e55265c8a8a6ae0c3c08e3509de92ee62c3cb5f6","modified":1470630783753},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"f6b46096208512b4d8680c024fcb68f03ceab008","modified":1470630783701},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1470630783701},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"4a0da1bed19e65bd7db42421b447061bc1618710","modified":1470630783761},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1470630783761},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"531934ea21ef4dc9f0978512050f54834f0a6cff","modified":1470630783745},{"_id":"themes/next/source/js/src/motion.js","hash":"ff9ea37d05c269e3a140c4ab448af03efc4bcc76","modified":1470630783761},{"_id":"themes/next/source/css/_variables/base.styl","hash":"a7ae72e846393493385275d934eaa78534d9834c","modified":1470630783754},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"b8e3663996b39590509d843f674360872b0242ac","modified":1470630783754},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1470630783761},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1470630783764},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1470630783763},{"_id":"themes/next/source/js/src/utils.js","hash":"418d09eb4df5dcc5e8d13d7f6245b1888200b51c","modified":1470630783763},{"_id":"themes/next/source/vendors/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1470630783772},{"_id":"themes/next/source/vendors/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1470630783772},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","hash":"ed80b43dbc7e3009b2f436741b9796df8eb3be02","modified":1470630783772},{"_id":"themes/next/source/vendors/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1470630783773},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1470630783769},{"_id":"themes/next/source/js/src/post-details.js","hash":"458af3b1bd7783c1950808e66cedfa9fb68bf21f","modified":1470630783762},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1470630783763},{"_id":"themes/next/source/vendors/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1470630783770},{"_id":"themes/next/source/vendors/font-awesome/.bower.json","hash":"bb093f2ac1f1305069d873a7941324c8e0de3135","modified":1470630783771},{"_id":"themes/next/source/vendors/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1470630783784},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1470630783784},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1470630783785},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1470630783784},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1470630783785},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1470630783782},{"_id":"themes/next/source/vendors/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1470630783769},{"_id":"themes/next/source/vendors/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1470630783770},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1470630783787},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1470630783789},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1470630783790},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1470630783786},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1470630783790},{"_id":"themes/next/source/vendors/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1470630783783},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"ae5b8597603d4e42ee66ed121544e7b1c644767e","modified":1470630783697},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"3931f9c3bac3970a3f54c9d0072ae4c950aa176c","modified":1470630783698},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"a79e7e0d809fcf407593dd7ed9e023db21c3cbd6","modified":1470630783698},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"1b6af02fd0ba3f729675cd95429a0cea4aebf358","modified":1470630783699},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1470630783699},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"f8b6a3017ab79057ce99f1ccb512193d67f4a35f","modified":1470630783700},{"_id":"themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"24105e62d7f26946907fa14cd02589f899bf8122","modified":1470630783698},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ad69cbf94eedacc27e756cdb9c7073416db697d0","modified":1470630783706},{"_id":"themes/next/source/vendors/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1470630783787},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1470630783706},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"b7d5cc29586ac796a50d90974ad99d24a5982137","modified":1470630783706},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"22828f5141c0cecb9ef25a110e194cdfa3a36423","modified":1470630783706},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1470630783717},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5a35aa0381b0e1d465b952a997194441020446ea","modified":1470630783721},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"88559b13ce94311405b170a0506ded91273beceb","modified":1470630783711},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1470630783721},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"c9218b48c56e52c06af9ce3cc8fbdae737cf16fe","modified":1470630783722},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1470630783722},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1470630783745},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1470630783746},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1470630783746},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1470630783720},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"b6ee5fefa6046086a76ddbcfafc82482816fa3e0","modified":1470630783721},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1470630783747},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"0a2f48971d86ea72e1a8fd1d8bbf2b7d423666b2","modified":1470630783700},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"124b540f059fd1ed13514362007cfc70355278c6","modified":1470630783748},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"13af2fb21fabfc4df4b577ce5363e13d03daff71","modified":1470630783748},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1470630783748},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1470630783749},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1470630783749},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c9875c010bebd77b4f59d459a10455fceb0a66a1","modified":1470630783750},{"_id":"themes/next/source/css/_schemes/Pisces/_full-image.styl","hash":"de31e923bf5102498f06b1ae6bdf2ea22409f3e0","modified":1470630783750},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"2182a6da3434a6fd4d03ab1592c645d3d3c88500","modified":1470630783750},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1470630783746},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1470630783751},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"55b44e03054cd20ed8129bf986b15fba5fd85aad","modified":1470630783747},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"88a5e0e95f93e4adb196bff1aac17d6cfb03768a","modified":1470630783751},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1470630783747},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"983c0723e8cfd84b67c2e66da0c26425a8db06e0","modified":1470630783751},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"9887bd3894db5394c1e64e800afaae55f47e8dd0","modified":1470630783751},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1470630783764},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1470630783764},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1470630783765},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"a9d064d600ee35acd66508167e1ac8c6cfdbdcd8","modified":1470630783762},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1470630783767},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1470630783764},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1470630783765},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1470630783765},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","hash":"4c2c5f5f6cc86d775a44b944661e038b7be98149","modified":1470630783774},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1470630783774},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","hash":"811432ad1e2d6c1f6da9a63fd919bf2a02b71dd9","modified":1470630783773},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1470630783768},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1470630783768},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1470630783771},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1470630783782},{"_id":"themes/next/source/images/qr-wechat.png","hash":"921f2e268500628e6dd5f1864b92abbc2c4e80a0","modified":1470380973367},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1470630783787},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1470630783776},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1470630783776},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1470630783786},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"4c4ef6e997d0c6e21de39c2daa0c768e12c8c6fa","modified":1470630783707},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1470630783708},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1470630783708},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1470630783781},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1470630783771},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1470630783709},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1470630783708},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"12e366f04497e3f44388fd40111a03e02f7c26af","modified":1470630783709},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"104b5c79cd891506e0beaf938b083685f1da8637","modified":1470630783710},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1470630783710},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"b8f9c95702e87fd0b170ab586c82c9718a245f8a","modified":1470630783710},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1470630783711},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"70ec8d38d2b3ee1906793d1dcb68032adfa65f03","modified":1470630783709},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1470630783711},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"852fd77500bda2c1a6651a14aa48d7d6222adc9d","modified":1470630783708},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1470630783712},{"_id":"themes/next/source/css/_common/components/post/post-more-link.styl","hash":"2bc3e33fdfbcf348c96ca60598f629dcd7ba3617","modified":1470630783713},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"929fac3a505bacbce6ba63009fd15851e2a8669d","modified":1470630783713},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"ca20affaeaf33c0904cb6356864fc6b78e95f447","modified":1470630783712},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1470630783713},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1470630783714},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"350469437b20ecfd6f3ca45e400478f8e3f71cfb","modified":1470630783714},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"8355b0e9375b3245508efda0e18acd069c2aa767","modified":1470630783713},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"681b7c8ce4dc47130a0ca67c1ec62be7c96e4c4f","modified":1470630783714},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"821991c0890966a512b43e8b1cf9537e738a09a0","modified":1470630783715},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1470630783715},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a45f5fce643eec4e1b927165229d560364bcace1","modified":1470630783711},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"7f2bdd6109614d35408ee5ac3335aad4464c69c7","modified":1470630783714},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"06b9a99d63b4d57fdbf70b88ab7036fbc47e3f52","modified":1470630783716},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1470630783715},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"394888efec32749b353292a59ec7f1b609d6325e","modified":1470630783716},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"4866fb9453d7d4c83a1c4e55d74e4afed336eb8b","modified":1470630783712},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1470630783717},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"7f7e9df15148608a9c29326dd880d8e8e8efc0ec","modified":1470630783719},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1470630783719},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"702be9e57dd6ff5fa99642a1f6e3df26215b8805","modified":1470630783716},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"7bd182d918f3117335a5ee87a1b544e6d2b54d7d","modified":1470630783720},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1470630783718},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"dcb4548d07cbb38b645b1753cf3ee7157e16921a","modified":1470630783720},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1470630783719},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"dd941824210733588841897457e0cc9697ca5608","modified":1470630783717},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"a83f493e494f5c73fab8f6f5b686ef1670490095","modified":1470630783718},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"cf900c5026ab36f31118317d0ae32a213e3ec2a9","modified":1470630783748},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"cf900c5026ab36f31118317d0ae32a213e3ec2a9","modified":1470630783749},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1470630783747},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1470630783717},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1470630783766},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1470630783718},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1470630783766},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1470630783766},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1470630783767},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1470630783781},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1470630783715},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1470630783767},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1470630783767},{"_id":"themes/next/source/vendors/velocity/velocity.js","hash":"e63dc7cea055ca60a95d286f32349d88b10c5a4d","modified":1470630783788},{"_id":"source/_posts/为过滤动态加入单选按钮/1.gif","hash":"b4ea42f61774eca585ceeb2e61815a235c3bb163","modified":1472180197994},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"f346b8b3df147e4059e1a7d66c52c9a6e1cec3e8","modified":1470630783779},{"_id":"source/_posts/仿ios下载控件/2.gif","hash":"f3dfeb1a97fbd39f9aebe477a4223436535f038a","modified":1472089775553},{"_id":"public/baidusitemap.xml","hash":"cc3b60f8d8ad0ddab52b1b977a8543a9eba4b7c8","modified":1476094174704},{"_id":"public/atom.xml","hash":"e4fd1213e42bd303ee05f8bc994f52fe9ad186e5","modified":1476094174721},{"_id":"public/search.xml","hash":"98ea9cba453390714404ce482d18097090af0704","modified":1476094174721},{"_id":"public/sitemap.xml","hash":"1fc56171b05b1006ac5c1ae589dcd37443813345","modified":1476094174722},{"_id":"public/tags/index.html","hash":"efcfe272ddab8952ef74f79fcd5e6d0413dc4141","modified":1476094174727},{"_id":"public/about/index.html","hash":"fbebebcd62bbbb0d0c220a758292bf13e2079b22","modified":1476094174727},{"_id":"public/2016/10/10/git-nothing-added-to-commit-but-untracked-files-present/index.html","hash":"81e9dbdcac9ad0f9f6e4e1beb0defa112c4cfa13","modified":1476094174727},{"_id":"public/2016/10/06/使用AnimatorSet执行一组动画/index.html","hash":"c4ca8c4613f00075e491c57859b909181e46d035","modified":1476094174727},{"_id":"public/2016/10/06/vector动画以及兼容/index.html","hash":"cf909dd39006a650deebdf9db202d53a204657c4","modified":1476094174727},{"_id":"public/2016/09/29/Android如何使用Vector-矢量图-兼容旧版本/index.html","hash":"fe51b6f506a795e61858ccc4accc8f5b0f9a005f","modified":1476094174728},{"_id":"public/2016/08/26/制作gif/index.html","hash":"1797b9507525fdb916b8a5c350f4d7730085037b","modified":1476094174728},{"_id":"public/2016/08/25/实现自定义banner/index.html","hash":"2b4e41f929f85652dd8eef97b7c4834209e62d41","modified":1476094174728},{"_id":"public/2016/08/24/仿ios下载控件/index.html","hash":"8b6b7b2161afe7085545ddcb7832e918f4584cd4","modified":1476094174728},{"_id":"public/2016/08/16/为过滤动态加入单选按钮/index.html","hash":"0102e84a072f4e54b7ad403a1af51c0dacf259cc","modified":1476094174728},{"_id":"public/2016/08/15/使用drawable来实现圆形按钮以及点击效果/index.html","hash":"58836c4468eed297101f0e7c542a9d89f442047e","modified":1476094174728},{"_id":"public/2016/08/09/Android读取json配置/index.html","hash":"cae4fe0fab064b29295655b659f37d1af793968d","modified":1476094174728},{"_id":"public/2016/08/09/2016-8-9/index.html","hash":"ca840530ba7caea5759e6ab5cb859f9d677b0798","modified":1476094174728},{"_id":"public/2016/08/08/2016-8-8/index.html","hash":"acf99d1f04296267aaa8fc7aa4adf98799d4cca4","modified":1476094174728},{"_id":"public/2016/08/05/2016-08-05/index.html","hash":"2cef556cb09e2c3fa5c8daed1074942b76c06074","modified":1476094174728},{"_id":"public/archives/index.html","hash":"a02b4cdddec5ef27e1428a2f1d74c27fcca87db1","modified":1476094174728},{"_id":"public/archives/2016/index.html","hash":"b4bfa7edc33ad343fbaf53dc7a5df81bdb5e57b7","modified":1476094174728},{"_id":"public/archives/2016/08/index.html","hash":"b6109cbe5ff977a73cd695db8b5b549c978a9959","modified":1476094174728},{"_id":"public/archives/2016/09/index.html","hash":"b87de65108322298cbbbfecc89213083a1bc34fb","modified":1476094174728},{"_id":"public/archives/2016/10/index.html","hash":"6a13288fc2684a050b1b0d8afe29423195c0c401","modified":1476094174728},{"_id":"public/index.html","hash":"cc5e78e72baf6ab8d790acf5b768ea8fda3e7f29","modified":1476094174729},{"_id":"public/page/2/index.html","hash":"eb4c298558bb3d2b5b2fba4c378b48e7eb75e67d","modified":1476094174729},{"_id":"public/page/3/index.html","hash":"b89506542754805906ddc6b4e6d7e74ef656ecbe","modified":1476094174729},{"_id":"public/tags/Hexo/index.html","hash":"89065867afe87a5fa5c413f6fabf83db76535236","modified":1476094174730},{"_id":"public/tags/Android/index.html","hash":"afa8dc5932543255e55a223650ecaaf014d0281d","modified":1476094174731},{"_id":"public/tags/Android/page/2/index.html","hash":"de4f32eb48aba584b913a33c03a45103ca0edf29","modified":1476094174731},{"_id":"public/tags/其他/index.html","hash":"5d18bb076494321bfd9f691be97848ca2d7a47e6","modified":1476094174731},{"_id":"public/favicon1.ico","hash":"a4539ad710039e61825239ae281835c8f007ca7d","modified":1476094174745},{"_id":"public/favicon.ico","hash":"ff5e045652ebd4837efd6a26447b8f6423392f05","modified":1476094174745},{"_id":"public/about/index/weichat.jpg","hash":"64f7ad7ba8969a1fcf853e19f3d2b7c6e9b060b5","modified":1476094174745},{"_id":"public/images/avatar111.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1476094174745},{"_id":"public/images/avatar.jpg","hash":"3d04a8d6e4747aa26ee2a9419c250e7663659f20","modified":1476094174745},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1476094174745},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1476094174745},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1476094174745},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1476094174746},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1476094174746},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1476094174746},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1476094174746},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1476094174746},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1476094174746},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1476094174746},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1476094174746},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1476094174746},{"_id":"public/vendors/font-awesome/HELP-US-OUT.txt","hash":"ed80b43dbc7e3009b2f436741b9796df8eb3be02","modified":1476094174746},{"_id":"public/vendors/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1476094174746},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1476094174746},{"_id":"public/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1476094174746},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1476094174746},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1476094174746},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1476094174746},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1476094174746},{"_id":"public/vendors/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1476094174746},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1476094174747},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1476094174747},{"_id":"public/2016/08/08/2016-8-8/catalog.jpg","hash":"5bbc2f21824726400b6257881bacc046fdce45f3","modified":1476094174747},{"_id":"public/2016/08/09/Android读取json配置/filter.jpg","hash":"c4d07ca2bab57a4029243bac42ba50b00c1c7ca4","modified":1476094174747},{"_id":"public/2016/08/05/2016-08-05/sshkeyresult.png","hash":"74c20c83de6f43ff450a897d43aa2fe073624182","modified":1476094174747},{"_id":"public/2016/08/15/使用drawable来实现圆形按钮以及点击效果/btn_click.jpg","hash":"df11acccc44d18b70506c1888fda46a3a44c376d","modified":1476094174747},{"_id":"public/2016/08/05/2016-08-05/addsshkeytogithub.png","hash":"dea6818f2b8415a4fd202d8524473a1ee38d4c44","modified":1476094174747},{"_id":"public/2016/08/25/实现自定义banner/1.jpg","hash":"3389471d69a4991b32157cb979b81fb7b558b448","modified":1476094174747},{"_id":"public/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1476094178110},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1476094178126},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1476094178129},{"_id":"public/2016/08/25/实现自定义banner/2.gif","hash":"1c15d20ad1854211da927fa0e0fa94022facd264","modified":1476094178129},{"_id":"public/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1476094178137},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1476094178137},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1476094178138},{"_id":"public/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1476094178138},{"_id":"public/vendors/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1476094178138},{"_id":"public/js/src/utils.js","hash":"e5cb720894c4bc28ca8f10b33df127fb394018d9","modified":1476094178138},{"_id":"public/js/src/post-details.js","hash":"2038f54e289b6da5def09689e69f623187147be5","modified":1476094178138},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1476094178138},{"_id":"public/vendors/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1476094178138},{"_id":"public/vendors/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1476094178138},{"_id":"public/vendors/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1476094178138},{"_id":"public/vendors/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1476094178138},{"_id":"public/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1476094178138},{"_id":"public/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1476094178138},{"_id":"public/vendors/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1476094178138},{"_id":"public/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1476094178138},{"_id":"public/js/src/schemes/pisces.js","hash":"7506e7490c69a200831393c38d25e91c156bd471","modified":1476094178139},{"_id":"public/vendors/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1476094178139},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1476094178139},{"_id":"public/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1476094178139},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1476094178139},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1476094178139},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1476094178139},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1476094178139},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1476094178139},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1476094178139},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1476094178139},{"_id":"public/css/main.css","hash":"d9a05c8bdee3af4fd3fd38dd83f8b0d05bb9389f","modified":1476094178139},{"_id":"public/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1476094178139},{"_id":"public/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1476094178140},{"_id":"public/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1476094178140},{"_id":"public/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1476094178140},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1476094178140},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1476094178140},{"_id":"public/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1476094178140},{"_id":"public/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1476094178140},{"_id":"public/vendors/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1476094178140},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1476094178140},{"_id":"public/2016/08/15/使用drawable来实现圆形按钮以及点击效果/btn_normal.jpg","hash":"34d6ec0a5b8a1b892382b719d522982c71efa5d5","modified":1476094178140},{"_id":"public/images/qr-wechat.png","hash":"921f2e268500628e6dd5f1864b92abbc2c4e80a0","modified":1476094178173},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"f346b8b3df147e4059e1a7d66c52c9a6e1cec3e8","modified":1476094178176},{"_id":"public/2016/08/16/为过滤动态加入单选按钮/1.gif","hash":"b4ea42f61774eca585ceeb2e61815a235c3bb163","modified":1476094178191},{"_id":"public/2016/08/24/仿ios下载控件/2.gif","hash":"f3dfeb1a97fbd39f9aebe477a4223436535f038a","modified":1476094178203}],"Category":[],"Data":[],"Page":[{"title":"tags","date":"2016-08-08T07:54:25.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2016-08-08 15:54:25\ntype: \"tags\"\ncomments: false # 关闭这个页面的多说或者 Disqus 评论\n---\n","updated":"2016-08-08T07:58:09.900Z","path":"tags/index.html","layout":"page","_id":"ciu3wcwgj0001pkm8e5jgv5rr","content":"","excerpt":"","more":""},{"title":"about","date":"2016-08-08T07:56:11.000Z","type":"about","comments":0,"_content":"\n### 关于我\n* ● 姓名：彭哲\n* ● 毕业于：武昌理工学院\n* ● 现就职于：深圳太极云软技术股份有限公司\n* ● 职位：Android开发工程师\n* ● 兴趣：电影院长期霸占第三排，户外爱好者，游泳，潜水，旅游，什么折腾喜欢什么\n* ● 梦想：时间自由，经济自由\n\n### 关于博客\n* ● 记录分享一些经验\n* ● 感谢每一位花时间浏览的人\n\n### 联系方式\n* ● 邮箱：pengzhe1209@gmail.com\n* ● 微信：![weichat](about/index/weichat.jpg)\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2016-08-08 15:56:11\ntype: \"about\"\ncomments: false # 关闭这个页面的多说或者 Disqus 评论\n---\n\n### 关于我\n* ● 姓名：彭哲\n* ● 毕业于：武昌理工学院\n* ● 现就职于：深圳太极云软技术股份有限公司\n* ● 职位：Android开发工程师\n* ● 兴趣：电影院长期霸占第三排，户外爱好者，游泳，潜水，旅游，什么折腾喜欢什么\n* ● 梦想：时间自由，经济自由\n\n### 关于博客\n* ● 记录分享一些经验\n* ● 感谢每一位花时间浏览的人\n\n### 联系方式\n* ● 邮箱：pengzhe1209@gmail.com\n* ● 微信：![weichat](about/index/weichat.jpg)\n","updated":"2016-08-09T02:32:36.237Z","path":"about/index.html","layout":"page","_id":"ciu3wcwgo0003pkm8i1vh2gro","content":"<h3 id=\"&#x5173;&#x4E8E;&#x6211;\"><a href=\"#&#x5173;&#x4E8E;&#x6211;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x6211;\"></a>&#x5173;&#x4E8E;&#x6211;</h3><ul>\n<li>&#x25CF; &#x59D3;&#x540D;&#xFF1A;&#x5F6D;&#x54F2;</li>\n<li>&#x25CF; &#x6BD5;&#x4E1A;&#x4E8E;&#xFF1A;&#x6B66;&#x660C;&#x7406;&#x5DE5;&#x5B66;&#x9662;</li>\n<li>&#x25CF; &#x73B0;&#x5C31;&#x804C;&#x4E8E;&#xFF1A;&#x6DF1;&#x5733;&#x592A;&#x6781;&#x4E91;&#x8F6F;&#x6280;&#x672F;&#x80A1;&#x4EFD;&#x6709;&#x9650;&#x516C;&#x53F8;</li>\n<li>&#x25CF; &#x804C;&#x4F4D;&#xFF1A;Android&#x5F00;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;</li>\n<li>&#x25CF; &#x5174;&#x8DA3;&#xFF1A;&#x7535;&#x5F71;&#x9662;&#x957F;&#x671F;&#x9738;&#x5360;&#x7B2C;&#x4E09;&#x6392;&#xFF0C;&#x6237;&#x5916;&#x7231;&#x597D;&#x8005;&#xFF0C;&#x6E38;&#x6CF3;&#xFF0C;&#x6F5C;&#x6C34;&#xFF0C;&#x65C5;&#x6E38;&#xFF0C;&#x4EC0;&#x4E48;&#x6298;&#x817E;&#x559C;&#x6B22;&#x4EC0;&#x4E48;</li>\n<li>&#x25CF; &#x68A6;&#x60F3;&#xFF1A;&#x65F6;&#x95F4;&#x81EA;&#x7531;&#xFF0C;&#x7ECF;&#x6D4E;&#x81EA;&#x7531;</li>\n</ul>\n<h3 id=\"&#x5173;&#x4E8E;&#x535A;&#x5BA2;\"><a href=\"#&#x5173;&#x4E8E;&#x535A;&#x5BA2;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x535A;&#x5BA2;\"></a>&#x5173;&#x4E8E;&#x535A;&#x5BA2;</h3><ul>\n<li>&#x25CF; &#x8BB0;&#x5F55;&#x5206;&#x4EAB;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;</li>\n<li>&#x25CF; &#x611F;&#x8C22;&#x6BCF;&#x4E00;&#x4F4D;&#x82B1;&#x65F6;&#x95F4;&#x6D4F;&#x89C8;&#x7684;&#x4EBA;</li>\n</ul>\n<h3 id=\"&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\"><a href=\"#&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\"></a>&#x8054;&#x7CFB;&#x65B9;&#x5F0F;</h3><ul>\n<li>&#x25CF; &#x90AE;&#x7BB1;&#xFF1A;pengzhe1209@gmail.com</li>\n<li>&#x25CF; &#x5FAE;&#x4FE1;&#xFF1A;<img src=\"/about/index/weichat.jpg\" alt=\"weichat\"></li>\n</ul>\n","excerpt":"","more":"<h3 id=\"&#x5173;&#x4E8E;&#x6211;\"><a href=\"#&#x5173;&#x4E8E;&#x6211;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x6211;\"></a>&#x5173;&#x4E8E;&#x6211;</h3><ul>\n<li>&#x25CF; &#x59D3;&#x540D;&#xFF1A;&#x5F6D;&#x54F2;</li>\n<li>&#x25CF; &#x6BD5;&#x4E1A;&#x4E8E;&#xFF1A;&#x6B66;&#x660C;&#x7406;&#x5DE5;&#x5B66;&#x9662;</li>\n<li>&#x25CF; &#x73B0;&#x5C31;&#x804C;&#x4E8E;&#xFF1A;&#x6DF1;&#x5733;&#x592A;&#x6781;&#x4E91;&#x8F6F;&#x6280;&#x672F;&#x80A1;&#x4EFD;&#x6709;&#x9650;&#x516C;&#x53F8;</li>\n<li>&#x25CF; &#x804C;&#x4F4D;&#xFF1A;Android&#x5F00;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;</li>\n<li>&#x25CF; &#x5174;&#x8DA3;&#xFF1A;&#x7535;&#x5F71;&#x9662;&#x957F;&#x671F;&#x9738;&#x5360;&#x7B2C;&#x4E09;&#x6392;&#xFF0C;&#x6237;&#x5916;&#x7231;&#x597D;&#x8005;&#xFF0C;&#x6E38;&#x6CF3;&#xFF0C;&#x6F5C;&#x6C34;&#xFF0C;&#x65C5;&#x6E38;&#xFF0C;&#x4EC0;&#x4E48;&#x6298;&#x817E;&#x559C;&#x6B22;&#x4EC0;&#x4E48;</li>\n<li>&#x25CF; &#x68A6;&#x60F3;&#xFF1A;&#x65F6;&#x95F4;&#x81EA;&#x7531;&#xFF0C;&#x7ECF;&#x6D4E;&#x81EA;&#x7531;</li>\n</ul>\n<h3 id=\"&#x5173;&#x4E8E;&#x535A;&#x5BA2;\"><a href=\"#&#x5173;&#x4E8E;&#x535A;&#x5BA2;\" class=\"headerlink\" title=\"&#x5173;&#x4E8E;&#x535A;&#x5BA2;\"></a>&#x5173;&#x4E8E;&#x535A;&#x5BA2;</h3><ul>\n<li>&#x25CF; &#x8BB0;&#x5F55;&#x5206;&#x4EAB;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;</li>\n<li>&#x25CF; &#x611F;&#x8C22;&#x6BCF;&#x4E00;&#x4F4D;&#x82B1;&#x65F6;&#x95F4;&#x6D4F;&#x89C8;&#x7684;&#x4EBA;</li>\n</ul>\n<h3 id=\"&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\"><a href=\"#&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\" class=\"headerlink\" title=\"&#x8054;&#x7CFB;&#x65B9;&#x5F0F;\"></a>&#x8054;&#x7CFB;&#x65B9;&#x5F0F;</h3><ul>\n<li>&#x25CF; &#x90AE;&#x7BB1;&#xFF1A;pengzhe1209@gmail.com</li>\n<li>&#x25CF; &#x5FAE;&#x4FE1;&#xFF1A;<img src=\"/about/index/weichat.jpg\" alt=\"weichat\"></li>\n</ul>\n"}],"Post":[{"title":"如何使用markdown插入图片","date":"2016-08-08T02:37:51.000Z","_content":"\n由于对markdown语法不是很熟，上篇博客都没有插图，今天研究了下在上篇博客补了两张图。下面记录下，怎么插入图片：\n\n### 1.首先确认_config.yml 中有 post_asset_folder:true\n然后执行如下命令下载hexo图片插件\n`npm install https://github.com/CodeFalling/hexo-asset-image --save`\n\n### 2.在md所在的目录下面创建和md同名的文件夹，如：\n2016-08-05\n├── xxx.png\n└── xxxx.png\n2016-08-05.md\n\n![catalog](2016-8-8/catalog.jpg)\n\n然后使用`![xxx](2016-08-05/xxx.png)`就可插入图片\n\n# 注意如果是先下载的插件，当执行命令创建md的时候，会自动创建同名文件夹用来存放图片\n\n生成的结构为\npublic/2016/08/05/2016-08-05\n├── xxx.png\n└── xxxx.png\n\n生成的 html 是\n\n`<img src=\"/2016/08/05/2016-08-05/xxx.png\" alt=\"xxx\">`\n\n\n","source":"_posts/2016-8-8.md","raw":"---\ntitle: 如何使用markdown插入图片\ndate: 2016-08-08 10:37:51\ntags: Hexo\n---\n\n由于对markdown语法不是很熟，上篇博客都没有插图，今天研究了下在上篇博客补了两张图。下面记录下，怎么插入图片：\n\n### 1.首先确认_config.yml 中有 post_asset_folder:true\n然后执行如下命令下载hexo图片插件\n`npm install https://github.com/CodeFalling/hexo-asset-image --save`\n\n### 2.在md所在的目录下面创建和md同名的文件夹，如：\n2016-08-05\n├── xxx.png\n└── xxxx.png\n2016-08-05.md\n\n![catalog](2016-8-8/catalog.jpg)\n\n然后使用`![xxx](2016-08-05/xxx.png)`就可插入图片\n\n# 注意如果是先下载的插件，当执行命令创建md的时候，会自动创建同名文件夹用来存放图片\n\n生成的结构为\npublic/2016/08/05/2016-08-05\n├── xxx.png\n└── xxxx.png\n\n生成的 html 是\n\n`<img src=\"/2016/08/05/2016-08-05/xxx.png\" alt=\"xxx\">`\n\n\n","slug":"2016-8-8","published":1,"updated":"2016-08-08T03:47:25.553Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwgc0000pkm8nt5dtrz9","content":"<p>&#x7531;&#x4E8E;&#x5BF9;markdown&#x8BED;&#x6CD5;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#xFF0C;&#x4E0A;&#x7BC7;&#x535A;&#x5BA2;&#x90FD;&#x6CA1;&#x6709;&#x63D2;&#x56FE;&#xFF0C;&#x4ECA;&#x5929;&#x7814;&#x7A76;&#x4E86;&#x4E0B;&#x5728;&#x4E0A;&#x7BC7;&#x535A;&#x5BA2;&#x8865;&#x4E86;&#x4E24;&#x5F20;&#x56FE;&#x3002;&#x4E0B;&#x9762;&#x8BB0;&#x5F55;&#x4E0B;&#xFF0C;&#x600E;&#x4E48;&#x63D2;&#x5165;&#x56FE;&#x7247;&#xFF1A;</p>\n<h3 id=\"1-&#x9996;&#x5148;&#x786E;&#x8BA4;-config-yml-&#x4E2D;&#x6709;-post-asset-folder-true\"><a href=\"#1-&#x9996;&#x5148;&#x786E;&#x8BA4;-config-yml-&#x4E2D;&#x6709;-post-asset-folder-true\" class=\"headerlink\" title=\"1.&#x9996;&#x5148;&#x786E;&#x8BA4;_config.yml &#x4E2D;&#x6709; post_asset_folder:true\"></a>1.&#x9996;&#x5148;&#x786E;&#x8BA4;_config.yml &#x4E2D;&#x6709; post_asset_folder:true</h3><p>&#x7136;&#x540E;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4E0B;&#x8F7D;hexo&#x56FE;&#x7247;&#x63D2;&#x4EF6;<br><code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></p>\n<h3 id=\"2-&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\"><a href=\"#2-&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\" class=\"headerlink\" title=\"2.&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\"></a>2.&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;</h3><p>2016-08-05<br>&#x251C;&#x2500;&#x2500; xxx.png<br>&#x2514;&#x2500;&#x2500; xxxx.png<br>2016-08-05.md</p>\n<p><img src=\"/2016/08/08/2016-8-8/catalog.jpg\" alt=\"catalog\"></p>\n<p>&#x7136;&#x540E;&#x4F7F;&#x7528;<code>![xxx](2016-08-05/xxx.png)</code>&#x5C31;&#x53EF;&#x63D2;&#x5165;&#x56FE;&#x7247;</p>\n<h1 id=\"&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\"><a href=\"#&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\"></a>&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;</h1><p>&#x751F;&#x6210;&#x7684;&#x7ED3;&#x6784;&#x4E3A;<br>public/2016/08/05/2016-08-05<br>&#x251C;&#x2500;&#x2500; xxx.png<br>&#x2514;&#x2500;&#x2500; xxxx.png</p>\n<p>&#x751F;&#x6210;&#x7684; html &#x662F;</p>\n<p><code>&lt;img src=&quot;/2016/08/05/2016-08-05/xxx.png&quot; alt=&quot;xxx&quot;&gt;</code></p>\n","excerpt":"","more":"<p>&#x7531;&#x4E8E;&#x5BF9;markdown&#x8BED;&#x6CD5;&#x4E0D;&#x662F;&#x5F88;&#x719F;&#xFF0C;&#x4E0A;&#x7BC7;&#x535A;&#x5BA2;&#x90FD;&#x6CA1;&#x6709;&#x63D2;&#x56FE;&#xFF0C;&#x4ECA;&#x5929;&#x7814;&#x7A76;&#x4E86;&#x4E0B;&#x5728;&#x4E0A;&#x7BC7;&#x535A;&#x5BA2;&#x8865;&#x4E86;&#x4E24;&#x5F20;&#x56FE;&#x3002;&#x4E0B;&#x9762;&#x8BB0;&#x5F55;&#x4E0B;&#xFF0C;&#x600E;&#x4E48;&#x63D2;&#x5165;&#x56FE;&#x7247;&#xFF1A;</p>\n<h3 id=\"1-&#x9996;&#x5148;&#x786E;&#x8BA4;-config-yml-&#x4E2D;&#x6709;-post-asset-folder-true\"><a href=\"#1-&#x9996;&#x5148;&#x786E;&#x8BA4;-config-yml-&#x4E2D;&#x6709;-post-asset-folder-true\" class=\"headerlink\" title=\"1.&#x9996;&#x5148;&#x786E;&#x8BA4;_config.yml &#x4E2D;&#x6709; post_asset_folder:true\"></a>1.&#x9996;&#x5148;&#x786E;&#x8BA4;_config.yml &#x4E2D;&#x6709; post_asset_folder:true</h3><p>&#x7136;&#x540E;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4E0B;&#x8F7D;hexo&#x56FE;&#x7247;&#x63D2;&#x4EF6;<br><code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></p>\n<h3 id=\"2-&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\"><a href=\"#2-&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\" class=\"headerlink\" title=\"2.&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;\"></a>2.&#x5728;md&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x521B;&#x5EFA;&#x548C;md&#x540C;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x5982;&#xFF1A;</h3><p>2016-08-05<br>&#x251C;&#x2500;&#x2500; xxx.png<br>&#x2514;&#x2500;&#x2500; xxxx.png<br>2016-08-05.md</p>\n<p><img src=\"/2016/08/08/2016-8-8/catalog.jpg\" alt=\"catalog\"></p>\n<p>&#x7136;&#x540E;&#x4F7F;&#x7528;<code>![xxx](2016-08-05/xxx.png)</code>&#x5C31;&#x53EF;&#x63D2;&#x5165;&#x56FE;&#x7247;</p>\n<h1 id=\"&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\"><a href=\"#&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;\"></a>&#x6CE8;&#x610F;&#x5982;&#x679C;&#x662F;&#x5148;&#x4E0B;&#x8F7D;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x521B;&#x5EFA;md&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x6587;&#x4EF6;&#x5939;&#x7528;&#x6765;&#x5B58;&#x653E;&#x56FE;&#x7247;</h1><p>&#x751F;&#x6210;&#x7684;&#x7ED3;&#x6784;&#x4E3A;<br>public/2016/08/05/2016-08-05<br>&#x251C;&#x2500;&#x2500; xxx.png<br>&#x2514;&#x2500;&#x2500; xxxx.png</p>\n<p>&#x751F;&#x6210;&#x7684; html &#x662F;</p>\n<p><code>&lt;img src=&quot;/2016/08/05/2016-08-05/xxx.png&quot; alt=&quot;xxx&quot;&gt;</code></p>\n"},{"title":"如何用hexo搭建静态博客++","date":"2016-08-05T07:16:19.000Z","_content":"\n想好好写写博客了，又不喜欢那些平台各种花哨和广告。看好多大神都是用的hexo搭建的自己的博客，我也跟风搞一个，下面记录下过程以及遇到的坑。 \n## 1.安装git和node.js\n安装完git后，进入git bash配置ssh key\n首先检查电脑现有ssk key，执行命令`$ cd ~/.ssh`,如果提示No such file or directory 说明你是第一次使用git。\n生成新的ssh key：\n`$ ssh-keygen -t rsa -C\"邮件地址@youremail.com\"Generating public/private rsa key pair. Enter file in which to save the key(/Users/your_user_directory/.ssh/id_rsa):<回车就好>`\n注意1: 此处的邮箱地址，你可以输入自己的邮箱地址；注意2: 此处的「-C」的是大写的「C」\n然后系统会要你输入密码：\n`Enter passphrase (empty forno passphrase):<输入加密串> `\n`Enter same passphrase again:<再次输入加密串>`         \n最后看到这样的界面，就成功设置ssh key了：\n![sshkeyresult](2016-08-05/sshkeyresult.png)\n\n添加 SSH Key 到 GitHub（如果没有注册github账号，请先行注册，很简单）\n1.打开本地C:\\Documents and Settings\\Administrator.ssh\\id_rsa.pub文件。此文件里面内容为刚才生成人密钥。如果看不到这个文件，你需要设置显示隐藏文件。准确的复制这个文件的内容，才能保证设置的成功。\n2.登陆github系统。点击右上角的 Settings—>SSH and GPG keys —> New SSH key\n3.把你本地生成的密钥复制到里面（key文本框中）， 点击 add key 就ok了\n\n![addsshkeytogithub](2016-08-05/addsshkeytogithub.png)\n\n可以输入下面的命令，看看设置是否成功，git@github.com的部分不要修改：\n`$ ssh -T git@github.com`\n如果是下面的反馈：\nThe authenticity of host 'github.com (207.97.227.239)' can't be established.\nRSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.\nAre you sure you want to continue connecting (yes/no)?\n不要紧张，输入yes就好，然后会看到：\nHi cnfeat! You've successfully authenticated, but GitHub does not provide shell access.\n\n## 设置用户信息\n现在你已经可以通过 SSH 链接到 GitHub 了，还有一些个人信息需要完善的。\nGit 会根据用户的名字和邮箱来记录提交。GitHub 也是用这些信息来做权限的处理，输入下面的代码进行个人信息的设置，把名称和邮箱替换成你自己的，名字必须是你的真名，而不是GitHub的昵称。\n$ git config --global user.name \"cnfeat\"//用户名\n$ git config --global user.email  \"cnfeat@gmail.com\"//填写自己的邮箱\n\n## 2.安装hexo\n利用 npm 命令即可安装。在git bash输入命令`npm install -g hexo`\n\n创建hexo文件夹\n安装完成后，在你喜爱的文件夹下（如H:\\hexo），执行以下指令(在H:\\hexo内点击鼠标右键，选择Git bash)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。\n`hexo init`\n安装依赖包 \n`npm install`\n\n现在我们已经搭建起本地的hexo博客了，执行以下命令(在H:\\hexo)，然后到浏览器输入localhost:4000看看。\n`hexo generate`\n`hexo server`\n\n好了，至此，本地博客已经搭建起来了，只是本地哦，别人看不到的。下面，我们要部署到Github。\n\n## 3.创建repository\n在自己Github主页右下角，创建一个新的repository。比如我的Github账号是dinomonster，那么我应该创建的repository名字应该是dinomonster.github.io。\n\n## 4.部署\n编辑_config.yml(在H:\\hexo下)你在部署时，要把下面的dinomonster都换成你的账号名。\ndeploy:\n  type: github\n  repository: https://github.com/dinomonster/dinomonster.github.io.git\n  branch: master\n\n这里可能会有问题，在新版的hexo需要这样设置\ndeploy: \n  type: git\n  repository: git@github.com:dinomonster/dinomonster.github.io.git\n  branch: master\n\n  \n\n执行下列指令即可完成部署。\n  `hexo generate`\n  `hexo deploy`\n\n每次修改本地文件后，需要hexo generate才能保存。每次使用命令时，都要在H:\\hexo目录下。\n  Okay,我们的博客已经完全搭建起来了，在浏览器访问dinomonster.github.io就能看到你的成就了\n\n## bugs:\n    1.在github部署完成之后，马上访问可能出现404错误,可能需要等级分钟\n    2.部署的时候注意所有的\":\"后面都要有一个空格，否则会不报错也部署不成功、被这个坑了好久。\n\n\nhexo的命令有简写：\nhexo g == hexo generate\nhexo d == hexo deploy\nhexo s == hexo server\nhexo n == hexo new\n\n\n\n后续再写如何购买域名等等，下班闪人。","source":"_posts/2016-08-05.md","raw":"---\ntitle: '如何用hexo搭建静态博客++'\ndate: 2016-08-05 15:16:19\ntags: Hexo\n\n---\n\n想好好写写博客了，又不喜欢那些平台各种花哨和广告。看好多大神都是用的hexo搭建的自己的博客，我也跟风搞一个，下面记录下过程以及遇到的坑。 \n## 1.安装git和node.js\n安装完git后，进入git bash配置ssh key\n首先检查电脑现有ssk key，执行命令`$ cd ~/.ssh`,如果提示No such file or directory 说明你是第一次使用git。\n生成新的ssh key：\n`$ ssh-keygen -t rsa -C\"邮件地址@youremail.com\"Generating public/private rsa key pair. Enter file in which to save the key(/Users/your_user_directory/.ssh/id_rsa):<回车就好>`\n注意1: 此处的邮箱地址，你可以输入自己的邮箱地址；注意2: 此处的「-C」的是大写的「C」\n然后系统会要你输入密码：\n`Enter passphrase (empty forno passphrase):<输入加密串> `\n`Enter same passphrase again:<再次输入加密串>`         \n最后看到这样的界面，就成功设置ssh key了：\n![sshkeyresult](2016-08-05/sshkeyresult.png)\n\n添加 SSH Key 到 GitHub（如果没有注册github账号，请先行注册，很简单）\n1.打开本地C:\\Documents and Settings\\Administrator.ssh\\id_rsa.pub文件。此文件里面内容为刚才生成人密钥。如果看不到这个文件，你需要设置显示隐藏文件。准确的复制这个文件的内容，才能保证设置的成功。\n2.登陆github系统。点击右上角的 Settings—>SSH and GPG keys —> New SSH key\n3.把你本地生成的密钥复制到里面（key文本框中）， 点击 add key 就ok了\n\n![addsshkeytogithub](2016-08-05/addsshkeytogithub.png)\n\n可以输入下面的命令，看看设置是否成功，git@github.com的部分不要修改：\n`$ ssh -T git@github.com`\n如果是下面的反馈：\nThe authenticity of host 'github.com (207.97.227.239)' can't be established.\nRSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.\nAre you sure you want to continue connecting (yes/no)?\n不要紧张，输入yes就好，然后会看到：\nHi cnfeat! You've successfully authenticated, but GitHub does not provide shell access.\n\n## 设置用户信息\n现在你已经可以通过 SSH 链接到 GitHub 了，还有一些个人信息需要完善的。\nGit 会根据用户的名字和邮箱来记录提交。GitHub 也是用这些信息来做权限的处理，输入下面的代码进行个人信息的设置，把名称和邮箱替换成你自己的，名字必须是你的真名，而不是GitHub的昵称。\n$ git config --global user.name \"cnfeat\"//用户名\n$ git config --global user.email  \"cnfeat@gmail.com\"//填写自己的邮箱\n\n## 2.安装hexo\n利用 npm 命令即可安装。在git bash输入命令`npm install -g hexo`\n\n创建hexo文件夹\n安装完成后，在你喜爱的文件夹下（如H:\\hexo），执行以下指令(在H:\\hexo内点击鼠标右键，选择Git bash)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。\n`hexo init`\n安装依赖包 \n`npm install`\n\n现在我们已经搭建起本地的hexo博客了，执行以下命令(在H:\\hexo)，然后到浏览器输入localhost:4000看看。\n`hexo generate`\n`hexo server`\n\n好了，至此，本地博客已经搭建起来了，只是本地哦，别人看不到的。下面，我们要部署到Github。\n\n## 3.创建repository\n在自己Github主页右下角，创建一个新的repository。比如我的Github账号是dinomonster，那么我应该创建的repository名字应该是dinomonster.github.io。\n\n## 4.部署\n编辑_config.yml(在H:\\hexo下)你在部署时，要把下面的dinomonster都换成你的账号名。\ndeploy:\n  type: github\n  repository: https://github.com/dinomonster/dinomonster.github.io.git\n  branch: master\n\n这里可能会有问题，在新版的hexo需要这样设置\ndeploy: \n  type: git\n  repository: git@github.com:dinomonster/dinomonster.github.io.git\n  branch: master\n\n  \n\n执行下列指令即可完成部署。\n  `hexo generate`\n  `hexo deploy`\n\n每次修改本地文件后，需要hexo generate才能保存。每次使用命令时，都要在H:\\hexo目录下。\n  Okay,我们的博客已经完全搭建起来了，在浏览器访问dinomonster.github.io就能看到你的成就了\n\n## bugs:\n    1.在github部署完成之后，马上访问可能出现404错误,可能需要等级分钟\n    2.部署的时候注意所有的\":\"后面都要有一个空格，否则会不报错也部署不成功、被这个坑了好久。\n\n\nhexo的命令有简写：\nhexo g == hexo generate\nhexo d == hexo deploy\nhexo s == hexo server\nhexo n == hexo new\n\n\n\n后续再写如何购买域名等等，下班闪人。","slug":"2016-08-05","published":1,"updated":"2016-10-10T01:55:58.947Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwgm0002pkm827jlr5wq","content":"<p>&#x60F3;&#x597D;&#x597D;&#x5199;&#x5199;&#x535A;&#x5BA2;&#x4E86;&#xFF0C;&#x53C8;&#x4E0D;&#x559C;&#x6B22;&#x90A3;&#x4E9B;&#x5E73;&#x53F0;&#x5404;&#x79CD;&#x82B1;&#x54E8;&#x548C;&#x5E7F;&#x544A;&#x3002;&#x770B;&#x597D;&#x591A;&#x5927;&#x795E;&#x90FD;&#x662F;&#x7528;&#x7684;hexo&#x642D;&#x5EFA;&#x7684;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x4E5F;&#x8DDF;&#x98CE;&#x641E;&#x4E00;&#x4E2A;&#xFF0C;&#x4E0B;&#x9762;&#x8BB0;&#x5F55;&#x4E0B;&#x8FC7;&#x7A0B;&#x4EE5;&#x53CA;&#x9047;&#x5230;&#x7684;&#x5751;&#x3002; </p>\n<h2 id=\"1-&#x5B89;&#x88C5;git&#x548C;node-js\"><a href=\"#1-&#x5B89;&#x88C5;git&#x548C;node-js\" class=\"headerlink\" title=\"1.&#x5B89;&#x88C5;git&#x548C;node.js\"></a>1.&#x5B89;&#x88C5;git&#x548C;node.js</h2><p>&#x5B89;&#x88C5;&#x5B8C;git&#x540E;&#xFF0C;&#x8FDB;&#x5165;git bash&#x914D;&#x7F6E;ssh key<br>&#x9996;&#x5148;&#x68C0;&#x67E5;&#x7535;&#x8111;&#x73B0;&#x6709;ssk key&#xFF0C;&#x6267;&#x884C;&#x547D;&#x4EE4;<code>$ cd ~/.ssh</code>,&#x5982;&#x679C;&#x63D0;&#x793A;No such file or directory &#x8BF4;&#x660E;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;git&#x3002;<br>&#x751F;&#x6210;&#x65B0;&#x7684;ssh key&#xFF1A;<br><code>$ ssh-keygen -t rsa -C&quot;&#x90AE;&#x4EF6;&#x5730;&#x5740;@youremail.com&quot;Generating public/private rsa key pair. Enter file in which to save the key(/Users/your_user_directory/.ssh/id_rsa):&lt;&#x56DE;&#x8F66;&#x5C31;&#x597D;&gt;</code><br>&#x6CE8;&#x610F;1: &#x6B64;&#x5904;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8F93;&#x5165;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#xFF1B;&#x6CE8;&#x610F;2: &#x6B64;&#x5904;&#x7684;&#x300C;-C&#x300D;&#x7684;&#x662F;&#x5927;&#x5199;&#x7684;&#x300C;C&#x300D;<br>&#x7136;&#x540E;&#x7CFB;&#x7EDF;&#x4F1A;&#x8981;&#x4F60;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF1A;<br><code>Enter passphrase (empty forno passphrase):&lt;&#x8F93;&#x5165;&#x52A0;&#x5BC6;&#x4E32;&gt;</code><br><code>Enter same passphrase again:&lt;&#x518D;&#x6B21;&#x8F93;&#x5165;&#x52A0;&#x5BC6;&#x4E32;&gt;</code><br>&#x6700;&#x540E;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x5C31;&#x6210;&#x529F;&#x8BBE;&#x7F6E;ssh key&#x4E86;&#xFF1A;<br><img src=\"/2016/08/05/2016-08-05/sshkeyresult.png\" alt=\"sshkeyresult\"></p>\n<p>&#x6DFB;&#x52A0; SSH Key &#x5230; GitHub&#xFF08;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6CE8;&#x518C;github&#x8D26;&#x53F7;&#xFF0C;&#x8BF7;&#x5148;&#x884C;&#x6CE8;&#x518C;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#xFF09;<br>1.&#x6253;&#x5F00;&#x672C;&#x5730;C:\\Documents and Settings\\Administrator.ssh\\id_rsa.pub&#x6587;&#x4EF6;&#x3002;&#x6B64;&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x5185;&#x5BB9;&#x4E3A;&#x521A;&#x624D;&#x751F;&#x6210;&#x4EBA;&#x5BC6;&#x94A5;&#x3002;&#x5982;&#x679C;&#x770B;&#x4E0D;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x9690;&#x85CF;&#x6587;&#x4EF6;&#x3002;&#x51C6;&#x786E;&#x7684;&#x590D;&#x5236;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x8BBE;&#x7F6E;&#x7684;&#x6210;&#x529F;&#x3002;<br>2.&#x767B;&#x9646;github&#x7CFB;&#x7EDF;&#x3002;&#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7684; Settings&#x2014;&gt;SSH and GPG keys &#x2014;&gt; New SSH key<br>3.&#x628A;&#x4F60;&#x672C;&#x5730;&#x751F;&#x6210;&#x7684;&#x5BC6;&#x94A5;&#x590D;&#x5236;&#x5230;&#x91CC;&#x9762;&#xFF08;key&#x6587;&#x672C;&#x6846;&#x4E2D;&#xFF09;&#xFF0C; &#x70B9;&#x51FB; add key &#x5C31;ok&#x4E86;</p>\n<p><img src=\"/2016/08/05/2016-08-05/addsshkeytogithub.png\" alt=\"addsshkeytogithub\"></p>\n<p>&#x53EF;&#x4EE5;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x770B;&#x770B;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;git@github.com&#x7684;&#x90E8;&#x5206;&#x4E0D;&#x8981;&#x4FEE;&#x6539;&#xFF1A;<br><code>$ ssh -T git@github.com</code><br>&#x5982;&#x679C;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x53CD;&#x9988;&#xFF1A;<br>The authenticity of host &#x2018;github.com (207.97.227.239)&#x2019; can&#x2019;t be established.<br>RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.<br>Are you sure you want to continue connecting (yes/no)?<br>&#x4E0D;&#x8981;&#x7D27;&#x5F20;&#xFF0C;&#x8F93;&#x5165;yes&#x5C31;&#x597D;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x770B;&#x5230;&#xFF1A;<br>Hi cnfeat! You&#x2019;ve successfully authenticated, but GitHub does not provide shell access.</p>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\"><a href=\"#&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\"></a>&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;</h2><p>&#x73B0;&#x5728;&#x4F60;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; SSH &#x94FE;&#x63A5;&#x5230; GitHub &#x4E86;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#x9700;&#x8981;&#x5B8C;&#x5584;&#x7684;&#x3002;<br>Git &#x4F1A;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x540D;&#x5B57;&#x548C;&#x90AE;&#x7BB1;&#x6765;&#x8BB0;&#x5F55;&#x63D0;&#x4EA4;&#x3002;GitHub &#x4E5F;&#x662F;&#x7528;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x6765;&#x505A;&#x6743;&#x9650;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x628A;&#x540D;&#x79F0;&#x548C;&#x90AE;&#x7BB1;&#x66FF;&#x6362;&#x6210;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#xFF0C;&#x540D;&#x5B57;&#x5FC5;&#x987B;&#x662F;&#x4F60;&#x7684;&#x771F;&#x540D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;GitHub&#x7684;&#x6635;&#x79F0;&#x3002;<br>$ git config &#x2013;global user.name &#x201C;cnfeat&#x201D;//&#x7528;&#x6237;&#x540D;<br>$ git config &#x2013;global user.email  &#x201C;cnfeat@gmail.com&#x201D;//&#x586B;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;</p>\n<h2 id=\"2-&#x5B89;&#x88C5;hexo\"><a href=\"#2-&#x5B89;&#x88C5;hexo\" class=\"headerlink\" title=\"2.&#x5B89;&#x88C5;hexo\"></a>2.&#x5B89;&#x88C5;hexo</h2><p>&#x5229;&#x7528; npm &#x547D;&#x4EE4;&#x5373;&#x53EF;&#x5B89;&#x88C5;&#x3002;&#x5728;git bash&#x8F93;&#x5165;&#x547D;&#x4EE4;<code>npm install -g hexo</code></p>\n<p>&#x521B;&#x5EFA;hexo&#x6587;&#x4EF6;&#x5939;<br>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5728;&#x4F60;&#x559C;&#x7231;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF08;&#x5982;H:\\hexo&#xFF09;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x6307;&#x4EE4;(&#x5728;H:\\hexo&#x5185;&#x70B9;&#x51FB;&#x9F20;&#x6807;&#x53F3;&#x952E;&#xFF0C;&#x9009;&#x62E9;Git bash)&#xFF0C;Hexo &#x5373;&#x4F1A;&#x81EA;&#x52A8;&#x5728;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x5939;&#x5EFA;&#x7ACB;&#x7F51;&#x7AD9;&#x6240;&#x9700;&#x8981;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x3002;<br><code>hexo init</code><br>&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;<br><code>npm install</code></p>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x8D77;&#x672C;&#x5730;&#x7684;hexo&#x535A;&#x5BA2;&#x4E86;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;(&#x5728;H:\\hexo)&#xFF0C;&#x7136;&#x540E;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;localhost:4000&#x770B;&#x770B;&#x3002;<br><code>hexo generate</code><br><code>hexo server</code></p>\n<p>&#x597D;&#x4E86;&#xFF0C;&#x81F3;&#x6B64;&#xFF0C;&#x672C;&#x5730;&#x535A;&#x5BA2;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x672C;&#x5730;&#x54E6;&#xFF0C;&#x522B;&#x4EBA;&#x770B;&#x4E0D;&#x5230;&#x7684;&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x90E8;&#x7F72;&#x5230;Github&#x3002;</p>\n<h2 id=\"3-&#x521B;&#x5EFA;repository\"><a href=\"#3-&#x521B;&#x5EFA;repository\" class=\"headerlink\" title=\"3.&#x521B;&#x5EFA;repository\"></a>3.&#x521B;&#x5EFA;repository</h2><p>&#x5728;&#x81EA;&#x5DF1;Github&#x4E3B;&#x9875;&#x53F3;&#x4E0B;&#x89D2;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;repository&#x3002;&#x6BD4;&#x5982;&#x6211;&#x7684;Github&#x8D26;&#x53F7;&#x662F;dinomonster&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5E94;&#x8BE5;&#x521B;&#x5EFA;&#x7684;repository&#x540D;&#x5B57;&#x5E94;&#x8BE5;&#x662F;dinomonster.github.io&#x3002;</p>\n<h2 id=\"4-&#x90E8;&#x7F72;\"><a href=\"#4-&#x90E8;&#x7F72;\" class=\"headerlink\" title=\"4.&#x90E8;&#x7F72;\"></a>4.&#x90E8;&#x7F72;</h2><p>&#x7F16;&#x8F91;_config.yml(&#x5728;H:\\hexo&#x4E0B;)&#x4F60;&#x5728;&#x90E8;&#x7F72;&#x65F6;&#xFF0C;&#x8981;&#x628A;&#x4E0B;&#x9762;&#x7684;dinomonster&#x90FD;&#x6362;&#x6210;&#x4F60;&#x7684;&#x8D26;&#x53F7;&#x540D;&#x3002;<br>deploy:<br>  type: github<br>  repository: <a href=\"https://github.com/dinomonster/dinomonster.github.io.git\" target=\"_blank\" rel=\"external\">https://github.com/dinomonster/dinomonster.github.io.git</a><br>  branch: master</p>\n<p>&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x65B0;&#x7248;&#x7684;hexo&#x9700;&#x8981;&#x8FD9;&#x6837;&#x8BBE;&#x7F6E;<br>deploy:<br>  type: git<br>  repository: git@github.com:dinomonster/dinomonster.github.io.git<br>  branch: master</p>\n<p>&#x6267;&#x884C;&#x4E0B;&#x5217;&#x6307;&#x4EE4;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x90E8;&#x7F72;&#x3002;<br>  <code>hexo generate</code><br>  <code>hexo deploy</code></p>\n<p>&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x9700;&#x8981;hexo generate&#x624D;&#x80FD;&#x4FDD;&#x5B58;&#x3002;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x90FD;&#x8981;&#x5728;H:\\hexo&#x76EE;&#x5F55;&#x4E0B;&#x3002;<br>  Okay,&#x6211;&#x4EEC;&#x7684;&#x535A;&#x5BA2;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x642D;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;dinomonster.github.io&#x5C31;&#x80FD;&#x770B;&#x5230;&#x4F60;&#x7684;&#x6210;&#x5C31;&#x4E86;</p>\n<h2 id=\"bugs\"><a href=\"#bugs\" class=\"headerlink\" title=\"bugs:\"></a>bugs:</h2><pre><code>1.&#x5728;github&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x9A6C;&#x4E0A;&#x8BBF;&#x95EE;&#x53EF;&#x80FD;&#x51FA;&#x73B0;404&#x9519;&#x8BEF;,&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7B49;&#x7EA7;&#x5206;&#x949F;\n2.&#x90E8;&#x7F72;&#x7684;&#x65F6;&#x5019;&#x6CE8;&#x610F;&#x6240;&#x6709;&#x7684;&quot;:&quot;&#x540E;&#x9762;&#x90FD;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x4E0D;&#x62A5;&#x9519;&#x4E5F;&#x90E8;&#x7F72;&#x4E0D;&#x6210;&#x529F;&#x3001;&#x88AB;&#x8FD9;&#x4E2A;&#x5751;&#x4E86;&#x597D;&#x4E45;&#x3002;\n</code></pre><p>hexo&#x7684;&#x547D;&#x4EE4;&#x6709;&#x7B80;&#x5199;&#xFF1A;<br>hexo g == hexo generate<br>hexo d == hexo deploy<br>hexo s == hexo server<br>hexo n == hexo new</p>\n<p>&#x540E;&#x7EED;&#x518D;&#x5199;&#x5982;&#x4F55;&#x8D2D;&#x4E70;&#x57DF;&#x540D;&#x7B49;&#x7B49;&#xFF0C;&#x4E0B;&#x73ED;&#x95EA;&#x4EBA;&#x3002;</p>\n","excerpt":"","more":"<p>&#x60F3;&#x597D;&#x597D;&#x5199;&#x5199;&#x535A;&#x5BA2;&#x4E86;&#xFF0C;&#x53C8;&#x4E0D;&#x559C;&#x6B22;&#x90A3;&#x4E9B;&#x5E73;&#x53F0;&#x5404;&#x79CD;&#x82B1;&#x54E8;&#x548C;&#x5E7F;&#x544A;&#x3002;&#x770B;&#x597D;&#x591A;&#x5927;&#x795E;&#x90FD;&#x662F;&#x7528;&#x7684;hexo&#x642D;&#x5EFA;&#x7684;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x4E5F;&#x8DDF;&#x98CE;&#x641E;&#x4E00;&#x4E2A;&#xFF0C;&#x4E0B;&#x9762;&#x8BB0;&#x5F55;&#x4E0B;&#x8FC7;&#x7A0B;&#x4EE5;&#x53CA;&#x9047;&#x5230;&#x7684;&#x5751;&#x3002; </p>\n<h2 id=\"1-&#x5B89;&#x88C5;git&#x548C;node-js\"><a href=\"#1-&#x5B89;&#x88C5;git&#x548C;node-js\" class=\"headerlink\" title=\"1.&#x5B89;&#x88C5;git&#x548C;node.js\"></a>1.&#x5B89;&#x88C5;git&#x548C;node.js</h2><p>&#x5B89;&#x88C5;&#x5B8C;git&#x540E;&#xFF0C;&#x8FDB;&#x5165;git bash&#x914D;&#x7F6E;ssh key<br>&#x9996;&#x5148;&#x68C0;&#x67E5;&#x7535;&#x8111;&#x73B0;&#x6709;ssk key&#xFF0C;&#x6267;&#x884C;&#x547D;&#x4EE4;<code>$ cd ~/.ssh</code>,&#x5982;&#x679C;&#x63D0;&#x793A;No such file or directory &#x8BF4;&#x660E;&#x4F60;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;git&#x3002;<br>&#x751F;&#x6210;&#x65B0;&#x7684;ssh key&#xFF1A;<br><code>$ ssh-keygen -t rsa -C&quot;&#x90AE;&#x4EF6;&#x5730;&#x5740;@youremail.com&quot;Generating public/private rsa key pair. Enter file in which to save the key(/Users/your_user_directory/.ssh/id_rsa):&lt;&#x56DE;&#x8F66;&#x5C31;&#x597D;&gt;</code><br>&#x6CE8;&#x610F;1: &#x6B64;&#x5904;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8F93;&#x5165;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#xFF1B;&#x6CE8;&#x610F;2: &#x6B64;&#x5904;&#x7684;&#x300C;-C&#x300D;&#x7684;&#x662F;&#x5927;&#x5199;&#x7684;&#x300C;C&#x300D;<br>&#x7136;&#x540E;&#x7CFB;&#x7EDF;&#x4F1A;&#x8981;&#x4F60;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF1A;<br><code>Enter passphrase (empty forno passphrase):&lt;&#x8F93;&#x5165;&#x52A0;&#x5BC6;&#x4E32;&gt;</code><br><code>Enter same passphrase again:&lt;&#x518D;&#x6B21;&#x8F93;&#x5165;&#x52A0;&#x5BC6;&#x4E32;&gt;</code><br>&#x6700;&#x540E;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x5C31;&#x6210;&#x529F;&#x8BBE;&#x7F6E;ssh key&#x4E86;&#xFF1A;<br><img src=\"/2016/08/05/2016-08-05/sshkeyresult.png\" alt=\"sshkeyresult\"></p>\n<p>&#x6DFB;&#x52A0; SSH Key &#x5230; GitHub&#xFF08;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6CE8;&#x518C;github&#x8D26;&#x53F7;&#xFF0C;&#x8BF7;&#x5148;&#x884C;&#x6CE8;&#x518C;&#xFF0C;&#x5F88;&#x7B80;&#x5355;&#xFF09;<br>1.&#x6253;&#x5F00;&#x672C;&#x5730;C:\\Documents and Settings\\Administrator.ssh\\id_rsa.pub&#x6587;&#x4EF6;&#x3002;&#x6B64;&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x5185;&#x5BB9;&#x4E3A;&#x521A;&#x624D;&#x751F;&#x6210;&#x4EBA;&#x5BC6;&#x94A5;&#x3002;&#x5982;&#x679C;&#x770B;&#x4E0D;&#x5230;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x9690;&#x85CF;&#x6587;&#x4EF6;&#x3002;&#x51C6;&#x786E;&#x7684;&#x590D;&#x5236;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x8BBE;&#x7F6E;&#x7684;&#x6210;&#x529F;&#x3002;<br>2.&#x767B;&#x9646;github&#x7CFB;&#x7EDF;&#x3002;&#x70B9;&#x51FB;&#x53F3;&#x4E0A;&#x89D2;&#x7684; Settings&#x2014;&gt;SSH and GPG keys &#x2014;&gt; New SSH key<br>3.&#x628A;&#x4F60;&#x672C;&#x5730;&#x751F;&#x6210;&#x7684;&#x5BC6;&#x94A5;&#x590D;&#x5236;&#x5230;&#x91CC;&#x9762;&#xFF08;key&#x6587;&#x672C;&#x6846;&#x4E2D;&#xFF09;&#xFF0C; &#x70B9;&#x51FB; add key &#x5C31;ok&#x4E86;</p>\n<p><img src=\"/2016/08/05/2016-08-05/addsshkeytogithub.png\" alt=\"addsshkeytogithub\"></p>\n<p>&#x53EF;&#x4EE5;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x770B;&#x770B;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;git@github.com&#x7684;&#x90E8;&#x5206;&#x4E0D;&#x8981;&#x4FEE;&#x6539;&#xFF1A;<br><code>$ ssh -T git@github.com</code><br>&#x5982;&#x679C;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x53CD;&#x9988;&#xFF1A;<br>The authenticity of host &#x2018;github.com (207.97.227.239)&#x2019; can&#x2019;t be established.<br>RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.<br>Are you sure you want to continue connecting (yes/no)?<br>&#x4E0D;&#x8981;&#x7D27;&#x5F20;&#xFF0C;&#x8F93;&#x5165;yes&#x5C31;&#x597D;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x770B;&#x5230;&#xFF1A;<br>Hi cnfeat! You&#x2019;ve successfully authenticated, but GitHub does not provide shell access.</p>\n<h2 id=\"&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\"><a href=\"#&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;\"></a>&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4FE1;&#x606F;</h2><p>&#x73B0;&#x5728;&#x4F60;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; SSH &#x94FE;&#x63A5;&#x5230; GitHub &#x4E86;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#x9700;&#x8981;&#x5B8C;&#x5584;&#x7684;&#x3002;<br>Git &#x4F1A;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x540D;&#x5B57;&#x548C;&#x90AE;&#x7BB1;&#x6765;&#x8BB0;&#x5F55;&#x63D0;&#x4EA4;&#x3002;GitHub &#x4E5F;&#x662F;&#x7528;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x6765;&#x505A;&#x6743;&#x9650;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E2A;&#x4EBA;&#x4FE1;&#x606F;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x628A;&#x540D;&#x79F0;&#x548C;&#x90AE;&#x7BB1;&#x66FF;&#x6362;&#x6210;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#xFF0C;&#x540D;&#x5B57;&#x5FC5;&#x987B;&#x662F;&#x4F60;&#x7684;&#x771F;&#x540D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;GitHub&#x7684;&#x6635;&#x79F0;&#x3002;<br>$ git config &#x2013;global user.name &#x201C;cnfeat&#x201D;//&#x7528;&#x6237;&#x540D;<br>$ git config &#x2013;global user.email  &#x201C;cnfeat@gmail.com&#x201D;//&#x586B;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x90AE;&#x7BB1;</p>\n<h2 id=\"2-&#x5B89;&#x88C5;hexo\"><a href=\"#2-&#x5B89;&#x88C5;hexo\" class=\"headerlink\" title=\"2.&#x5B89;&#x88C5;hexo\"></a>2.&#x5B89;&#x88C5;hexo</h2><p>&#x5229;&#x7528; npm &#x547D;&#x4EE4;&#x5373;&#x53EF;&#x5B89;&#x88C5;&#x3002;&#x5728;git bash&#x8F93;&#x5165;&#x547D;&#x4EE4;<code>npm install -g hexo</code></p>\n<p>&#x521B;&#x5EFA;hexo&#x6587;&#x4EF6;&#x5939;<br>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5728;&#x4F60;&#x559C;&#x7231;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#xFF08;&#x5982;H:\\hexo&#xFF09;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x6307;&#x4EE4;(&#x5728;H:\\hexo&#x5185;&#x70B9;&#x51FB;&#x9F20;&#x6807;&#x53F3;&#x952E;&#xFF0C;&#x9009;&#x62E9;Git bash)&#xFF0C;Hexo &#x5373;&#x4F1A;&#x81EA;&#x52A8;&#x5728;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x5939;&#x5EFA;&#x7ACB;&#x7F51;&#x7AD9;&#x6240;&#x9700;&#x8981;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x3002;<br><code>hexo init</code><br>&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;<br><code>npm install</code></p>\n<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x8D77;&#x672C;&#x5730;&#x7684;hexo&#x535A;&#x5BA2;&#x4E86;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;(&#x5728;H:\\hexo)&#xFF0C;&#x7136;&#x540E;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165;localhost:4000&#x770B;&#x770B;&#x3002;<br><code>hexo generate</code><br><code>hexo server</code></p>\n<p>&#x597D;&#x4E86;&#xFF0C;&#x81F3;&#x6B64;&#xFF0C;&#x672C;&#x5730;&#x535A;&#x5BA2;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x672C;&#x5730;&#x54E6;&#xFF0C;&#x522B;&#x4EBA;&#x770B;&#x4E0D;&#x5230;&#x7684;&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x90E8;&#x7F72;&#x5230;Github&#x3002;</p>\n<h2 id=\"3-&#x521B;&#x5EFA;repository\"><a href=\"#3-&#x521B;&#x5EFA;repository\" class=\"headerlink\" title=\"3.&#x521B;&#x5EFA;repository\"></a>3.&#x521B;&#x5EFA;repository</h2><p>&#x5728;&#x81EA;&#x5DF1;Github&#x4E3B;&#x9875;&#x53F3;&#x4E0B;&#x89D2;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;repository&#x3002;&#x6BD4;&#x5982;&#x6211;&#x7684;Github&#x8D26;&#x53F7;&#x662F;dinomonster&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5E94;&#x8BE5;&#x521B;&#x5EFA;&#x7684;repository&#x540D;&#x5B57;&#x5E94;&#x8BE5;&#x662F;dinomonster.github.io&#x3002;</p>\n<h2 id=\"4-&#x90E8;&#x7F72;\"><a href=\"#4-&#x90E8;&#x7F72;\" class=\"headerlink\" title=\"4.&#x90E8;&#x7F72;\"></a>4.&#x90E8;&#x7F72;</h2><p>&#x7F16;&#x8F91;_config.yml(&#x5728;H:\\hexo&#x4E0B;)&#x4F60;&#x5728;&#x90E8;&#x7F72;&#x65F6;&#xFF0C;&#x8981;&#x628A;&#x4E0B;&#x9762;&#x7684;dinomonster&#x90FD;&#x6362;&#x6210;&#x4F60;&#x7684;&#x8D26;&#x53F7;&#x540D;&#x3002;<br>deploy:<br>  type: github<br>  repository: <a href=\"https://github.com/dinomonster/dinomonster.github.io.git\">https://github.com/dinomonster/dinomonster.github.io.git</a><br>  branch: master</p>\n<p>&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x65B0;&#x7248;&#x7684;hexo&#x9700;&#x8981;&#x8FD9;&#x6837;&#x8BBE;&#x7F6E;<br>deploy:<br>  type: git<br>  repository: git@github.com:dinomonster/dinomonster.github.io.git<br>  branch: master</p>\n<p>&#x6267;&#x884C;&#x4E0B;&#x5217;&#x6307;&#x4EE4;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x90E8;&#x7F72;&#x3002;<br>  <code>hexo generate</code><br>  <code>hexo deploy</code></p>\n<p>&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x9700;&#x8981;hexo generate&#x624D;&#x80FD;&#x4FDD;&#x5B58;&#x3002;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x90FD;&#x8981;&#x5728;H:\\hexo&#x76EE;&#x5F55;&#x4E0B;&#x3002;<br>  Okay,&#x6211;&#x4EEC;&#x7684;&#x535A;&#x5BA2;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x642D;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;dinomonster.github.io&#x5C31;&#x80FD;&#x770B;&#x5230;&#x4F60;&#x7684;&#x6210;&#x5C31;&#x4E86;</p>\n<h2 id=\"bugs\"><a href=\"#bugs\" class=\"headerlink\" title=\"bugs:\"></a>bugs:</h2><pre><code>1.&#x5728;github&#x90E8;&#x7F72;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x9A6C;&#x4E0A;&#x8BBF;&#x95EE;&#x53EF;&#x80FD;&#x51FA;&#x73B0;404&#x9519;&#x8BEF;,&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7B49;&#x7EA7;&#x5206;&#x949F;\n2.&#x90E8;&#x7F72;&#x7684;&#x65F6;&#x5019;&#x6CE8;&#x610F;&#x6240;&#x6709;&#x7684;&quot;:&quot;&#x540E;&#x9762;&#x90FD;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x4E0D;&#x62A5;&#x9519;&#x4E5F;&#x90E8;&#x7F72;&#x4E0D;&#x6210;&#x529F;&#x3001;&#x88AB;&#x8FD9;&#x4E2A;&#x5751;&#x4E86;&#x597D;&#x4E45;&#x3002;\n</code></pre><p>hexo&#x7684;&#x547D;&#x4EE4;&#x6709;&#x7B80;&#x5199;&#xFF1A;<br>hexo g == hexo generate<br>hexo d == hexo deploy<br>hexo s == hexo server<br>hexo n == hexo new</p>\n<p>&#x540E;&#x7EED;&#x518D;&#x5199;&#x5982;&#x4F55;&#x8D2D;&#x4E70;&#x57DF;&#x540D;&#x7B49;&#x7B49;&#xFF0C;&#x4E0B;&#x73ED;&#x95EA;&#x4EBA;&#x3002;</p>\n"},{"title":"Android如何使用Vector(矢量图)以及兼容旧版本","date":"2016-09-29T04:06:07.000Z","_content":"\n这段时间忙成狗，天天加班，昨天凌晨一点多下班，都没时间写东西了，今天中午抽个空记录下Vector兼容旧版本的问题\nAndroid 5.0发布的时候，Google提供了Vector的支持。Vector Drawable相对于普通的Drawable来说，有以下几个好处：\n\n### 1.Vector图像可以自动进行适配，不需要通过分辨率来设置不同的图片，\n### 2.Vector图像可以大幅减少图像的体积，同样一张图，用Vector来实现，可能只有PNG的几十分之一 使用简单，\n### 3.很多设计工具，都可以直接导出SVG图像，从而转换成Vector图像 功能强大，不用写很多代码就可以实现非常复杂的动画 成熟、稳定，前端已经非常广泛的进行使用了\n\nVector图像刚发布的时候，是只支持Android 5.0+的，对于Android pre-L的系统来说，并不能使用，所以，可以说那时候的Vector并没有什么卵用。\n不过自从AppCompat 23.2之后，Google对p-View的Android系统也进行了兼容，也就是说，Vector可以使用于Android 2.1以上的所有系统，\n只需要引用com.android.support:appcompat-v7:23.2.0以上的版本就可以了。\n\n### 兼容版本需要做以下三步：\n#### 1.引用com.android.support:appcompat-v7:23.2.0以上的包\n#### 2.在build中defaultConfig{}里面写`vectorDrawables.useSupportLibrary = true`\n#### 3.使用`app:srcCompat`替换`android:src`\n\n不过 `app:srcCompat` 支持ImageView\\ImageButton\n### Button并不能直接使用app:srcCompat来使用Vector图像，需要通过Selector来进行使用，首先，创建两个图像，用于Selector的两个状态\nselect1.xml\n```xml\n<code class=\"hljs xml\"><vector android:height=\"24dp\" android:viewportheight=\"24.0\" android:viewportwidth=\"24.0\" android:width=\"24dp\" xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <path android:fillcolor=\"#FF000000\" android:pathdata=\"M14.59,8L12,10.59 9.41,8 8,9.41 10.59,12 8,14.59 9.41,16 12,13.41 14.59,16 16,14.59 13.41,12 16,9.41 14.59,8zM12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z\">\n</path></vector>\n</code>\n```\nselect2.xml\n```xml\n<code class=\"hljs xml\"><vector android:height=\"24dp\" android:viewportheight=\"24.0\" android:viewportwidth=\"24.0\" android:width=\"24dp\" xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <path android:fillcolor=\"#FF000000\" android:pathdata=\"M11,15h2v2h-2zM11,7h2v6h-2zM11.99,2C6.47,2 2,6.48 2,12s4.47,10 9.99,10C17.52,22 22,17.52 22,12S17.52,2 11.99,2zM12,20c-4.42,0 -8,-3.58 -8,-8s3.58,-8 8,-8 8,3.58 8,8 -3.58,8 -8,8z\">\n</path></vector>\n</code>\n```\nselector.xml\n```\n<code class=\"hljs xml\"><!--?xml version=\"1.0\" encoding=\"utf-8\"?-->\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:drawable=\"@drawable/selector1\" android:state_pressed=\"true\">\n    <item android:drawable=\"@drawable/selector2\">\n</item></item></selector></code>\n```\n\nbutton\n```\n<button android:background=\"@drawable/selector\" android:id=\"@+id/btn\" android:layout_height=\"70dp\" android:layout_width=\"70dp\"></button>\n```\n\n然后运行，你会发现。。依然不行\n需要在activity里面加上\n```\nstatic {\n    AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);\n}\n```\n开启这个flag后，你就可以正常使用Selector这样的DrawableContainers了。\n同时，你还开启了类似android:drawableLeft这样的compound drawable的使用权限，以及RadioButton的使用权限，以及ImageView’s src属性。\n\nRadiobutton同样可以\n```\n<radiobutton android:button=\"@drawable/selector\" android:layout_height=\"50dp\" android:layout_width=\"50dp\"></radiobutton>\n```\n\n还有动态Vector等会再另起一篇好了\n\n","source":"_posts/Android如何使用Vector-矢量图-兼容旧版本.md","raw":"---\ntitle: Android如何使用Vector(矢量图)以及兼容旧版本\ndate: 2016-09-29 12:06:07\ntags: Android\n---\n\n这段时间忙成狗，天天加班，昨天凌晨一点多下班，都没时间写东西了，今天中午抽个空记录下Vector兼容旧版本的问题\nAndroid 5.0发布的时候，Google提供了Vector的支持。Vector Drawable相对于普通的Drawable来说，有以下几个好处：\n\n### 1.Vector图像可以自动进行适配，不需要通过分辨率来设置不同的图片，\n### 2.Vector图像可以大幅减少图像的体积，同样一张图，用Vector来实现，可能只有PNG的几十分之一 使用简单，\n### 3.很多设计工具，都可以直接导出SVG图像，从而转换成Vector图像 功能强大，不用写很多代码就可以实现非常复杂的动画 成熟、稳定，前端已经非常广泛的进行使用了\n\nVector图像刚发布的时候，是只支持Android 5.0+的，对于Android pre-L的系统来说，并不能使用，所以，可以说那时候的Vector并没有什么卵用。\n不过自从AppCompat 23.2之后，Google对p-View的Android系统也进行了兼容，也就是说，Vector可以使用于Android 2.1以上的所有系统，\n只需要引用com.android.support:appcompat-v7:23.2.0以上的版本就可以了。\n\n### 兼容版本需要做以下三步：\n#### 1.引用com.android.support:appcompat-v7:23.2.0以上的包\n#### 2.在build中defaultConfig{}里面写`vectorDrawables.useSupportLibrary = true`\n#### 3.使用`app:srcCompat`替换`android:src`\n\n不过 `app:srcCompat` 支持ImageView\\ImageButton\n### Button并不能直接使用app:srcCompat来使用Vector图像，需要通过Selector来进行使用，首先，创建两个图像，用于Selector的两个状态\nselect1.xml\n```xml\n<code class=\"hljs xml\"><vector android:height=\"24dp\" android:viewportheight=\"24.0\" android:viewportwidth=\"24.0\" android:width=\"24dp\" xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <path android:fillcolor=\"#FF000000\" android:pathdata=\"M14.59,8L12,10.59 9.41,8 8,9.41 10.59,12 8,14.59 9.41,16 12,13.41 14.59,16 16,14.59 13.41,12 16,9.41 14.59,8zM12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z\">\n</path></vector>\n</code>\n```\nselect2.xml\n```xml\n<code class=\"hljs xml\"><vector android:height=\"24dp\" android:viewportheight=\"24.0\" android:viewportwidth=\"24.0\" android:width=\"24dp\" xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <path android:fillcolor=\"#FF000000\" android:pathdata=\"M11,15h2v2h-2zM11,7h2v6h-2zM11.99,2C6.47,2 2,6.48 2,12s4.47,10 9.99,10C17.52,22 22,17.52 22,12S17.52,2 11.99,2zM12,20c-4.42,0 -8,-3.58 -8,-8s3.58,-8 8,-8 8,3.58 8,8 -3.58,8 -8,8z\">\n</path></vector>\n</code>\n```\nselector.xml\n```\n<code class=\"hljs xml\"><!--?xml version=\"1.0\" encoding=\"utf-8\"?-->\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:drawable=\"@drawable/selector1\" android:state_pressed=\"true\">\n    <item android:drawable=\"@drawable/selector2\">\n</item></item></selector></code>\n```\n\nbutton\n```\n<button android:background=\"@drawable/selector\" android:id=\"@+id/btn\" android:layout_height=\"70dp\" android:layout_width=\"70dp\"></button>\n```\n\n然后运行，你会发现。。依然不行\n需要在activity里面加上\n```\nstatic {\n    AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);\n}\n```\n开启这个flag后，你就可以正常使用Selector这样的DrawableContainers了。\n同时，你还开启了类似android:drawableLeft这样的compound drawable的使用权限，以及RadioButton的使用权限，以及ImageView’s src属性。\n\nRadiobutton同样可以\n```\n<radiobutton android:button=\"@drawable/selector\" android:layout_height=\"50dp\" android:layout_width=\"50dp\"></radiobutton>\n```\n\n还有动态Vector等会再另起一篇好了\n\n","slug":"Android如何使用Vector-矢量图-兼容旧版本","published":1,"updated":"2016-09-29T07:42:57.402Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwgs0005pkm8ovuv36h9","content":"<p>&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5FD9;&#x6210;&#x72D7;&#xFF0C;&#x5929;&#x5929;&#x52A0;&#x73ED;&#xFF0C;&#x6628;&#x5929;&#x51CC;&#x6668;&#x4E00;&#x70B9;&#x591A;&#x4E0B;&#x73ED;&#xFF0C;&#x90FD;&#x6CA1;&#x65F6;&#x95F4;&#x5199;&#x4E1C;&#x897F;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x4E2D;&#x5348;&#x62BD;&#x4E2A;&#x7A7A;&#x8BB0;&#x5F55;&#x4E0B;Vector&#x517C;&#x5BB9;&#x65E7;&#x7248;&#x672C;&#x7684;&#x95EE;&#x9898;<br>Android 5.0&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#xFF0C;Google&#x63D0;&#x4F9B;&#x4E86;Vector&#x7684;&#x652F;&#x6301;&#x3002;Vector Drawable&#x76F8;&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;Drawable&#x6765;&#x8BF4;&#xFF0C;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x597D;&#x5904;&#xFF1A;</p>\n<h3 id=\"1-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\"><a href=\"#1-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\" class=\"headerlink\" title=\"1.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\"></a>1.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;</h3><h3 id=\"2-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00;-&#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\"><a href=\"#2-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00;-&#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\" class=\"headerlink\" title=\"2.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00; &#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\"></a>2.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00; &#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;</h3><h3 id=\"3-&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF;-&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B;-&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\"><a href=\"#3-&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF;-&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B;-&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\" class=\"headerlink\" title=\"3.&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF; &#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B; &#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\"></a>3.&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF; &#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B; &#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;</h3><p>Vector&#x56FE;&#x50CF;&#x521A;&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x53EA;&#x652F;&#x6301;Android 5.0+&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;Android pre-L&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x90A3;&#x65F6;&#x5019;&#x7684;Vector&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5375;&#x7528;&#x3002;<br>&#x4E0D;&#x8FC7;&#x81EA;&#x4ECE;AppCompat 23.2&#x4E4B;&#x540E;&#xFF0C;Google&#x5BF9;p-View&#x7684;Android&#x7CFB;&#x7EDF;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x517C;&#x5BB9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;Vector&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8E;Android 2.1&#x4EE5;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#xFF0C;<br>&#x53EA;&#x9700;&#x8981;&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\"><a href=\"#&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\" class=\"headerlink\" title=\"&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\"></a>&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;</h3><h4 id=\"1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"><a href=\"#1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\" class=\"headerlink\" title=\"1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"></a>1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;</h4><h4 id=\"2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\"><a href=\"#2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\" class=\"headerlink\" title=\"2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;vectorDrawables.useSupportLibrary = true\"></a>2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;<code>vectorDrawables.useSupportLibrary = true</code></h4><h4 id=\"3-&#x4F7F;&#x7528;app-srcCompat&#x66FF;&#x6362;android-src\"><a href=\"#3-&#x4F7F;&#x7528;app-srcCompat&#x66FF;&#x6362;android-src\" class=\"headerlink\" title=\"3.&#x4F7F;&#x7528;app:srcCompat&#x66FF;&#x6362;android:src\"></a>3.&#x4F7F;&#x7528;<code>app:srcCompat</code>&#x66FF;&#x6362;<code>android:src</code></h4><p>&#x4E0D;&#x8FC7; <code>app:srcCompat</code> &#x652F;&#x6301;ImageView\\ImageButton</p>\n<h3 id=\"Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app-srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\"><a href=\"#Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app-srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app:srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\"></a>Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app:srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;</h3><p>select1.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hljs xml&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">android:viewportheight</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:viewportwidth</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">android:fillcolor</span>=<span class=\"string\">&quot;#FF000000&quot;</span> <span class=\"attr\">android:pathdata</span>=<span class=\"string\">&quot;M14.59,8L12,10.59 9.41,8 8,9.41 10.59,12 8,14.59 9.41,16 12,13.41 14.59,16 16,14.59 13.41,12 16,9.41 14.59,8zM12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z&quot;</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>select2.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hljs xml&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">android:viewportheight</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:viewportwidth</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">android:fillcolor</span>=<span class=\"string\">&quot;#FF000000&quot;</span> <span class=\"attr\">android:pathdata</span>=<span class=\"string\">&quot;M11,15h2v2h-2zM11,7h2v6h-2zM11.99,2C6.47,2 2,6.48 2,12s4.47,10 9.99,10C17.52,22 22,17.52 22,12S17.52,2 11.99,2zM12,20c-4.42,0 -8,-3.58 -8,-8s3.58,-8 8,-8 8,3.58 8,8 -3.58,8 -8,8z&quot;</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>selector.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;code class=&quot;hljs xml&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?--&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/selector1&quot; android:state_pressed=&quot;true&quot;&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/selector2&quot;&gt;</div><div class=\"line\">&lt;/item&gt;&lt;/item&gt;&lt;/selector&gt;&lt;/code&gt;</div></pre></td></tr></table></figure></p>\n<p>button<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button android:background=&quot;@drawable/selector&quot; android:id=&quot;@+id/btn&quot; android:layout_height=&quot;70dp&quot; android:layout_width=&quot;70dp&quot;&gt;&lt;/button&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x3002;&#x3002;&#x4F9D;&#x7136;&#x4E0D;&#x884C;<br>&#x9700;&#x8981;&#x5728;activity&#x91CC;&#x9762;&#x52A0;&#x4E0A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">static {</div><div class=\"line\">    AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);</div><div class=\"line\">}</div></pre></td></tr></table></figure></p>\n<p>&#x5F00;&#x542F;&#x8FD9;&#x4E2A;flag&#x540E;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x4F7F;&#x7528;Selector&#x8FD9;&#x6837;&#x7684;DrawableContainers&#x4E86;&#x3002;<br>&#x540C;&#x65F6;&#xFF0C;&#x4F60;&#x8FD8;&#x5F00;&#x542F;&#x4E86;&#x7C7B;&#x4F3C;android:drawableLeft&#x8FD9;&#x6837;&#x7684;compound drawable&#x7684;&#x4F7F;&#x7528;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x53CA;RadioButton&#x7684;&#x4F7F;&#x7528;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x53CA;ImageView&#x2019;s src&#x5C5E;&#x6027;&#x3002;</p>\n<p>Radiobutton&#x540C;&#x6837;&#x53EF;&#x4EE5;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;radiobutton android:button=&quot;@drawable/selector&quot; android:layout_height=&quot;50dp&quot; android:layout_width=&quot;50dp&quot;&gt;&lt;/radiobutton&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x8FD8;&#x6709;&#x52A8;&#x6001;Vector&#x7B49;&#x4F1A;&#x518D;&#x53E6;&#x8D77;&#x4E00;&#x7BC7;&#x597D;&#x4E86;</p>\n","excerpt":"","more":"<p>&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5FD9;&#x6210;&#x72D7;&#xFF0C;&#x5929;&#x5929;&#x52A0;&#x73ED;&#xFF0C;&#x6628;&#x5929;&#x51CC;&#x6668;&#x4E00;&#x70B9;&#x591A;&#x4E0B;&#x73ED;&#xFF0C;&#x90FD;&#x6CA1;&#x65F6;&#x95F4;&#x5199;&#x4E1C;&#x897F;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x4E2D;&#x5348;&#x62BD;&#x4E2A;&#x7A7A;&#x8BB0;&#x5F55;&#x4E0B;Vector&#x517C;&#x5BB9;&#x65E7;&#x7248;&#x672C;&#x7684;&#x95EE;&#x9898;<br>Android 5.0&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#xFF0C;Google&#x63D0;&#x4F9B;&#x4E86;Vector&#x7684;&#x652F;&#x6301;&#x3002;Vector Drawable&#x76F8;&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;Drawable&#x6765;&#x8BF4;&#xFF0C;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x597D;&#x5904;&#xFF1A;</p>\n<h3 id=\"1-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\"><a href=\"#1-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\" class=\"headerlink\" title=\"1.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;\"></a>1.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x9002;&#x914D;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5206;&#x8FA8;&#x7387;&#x6765;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x56FE;&#x7247;&#xFF0C;</h3><h3 id=\"2-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00;-&#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\"><a href=\"#2-Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00;-&#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\" class=\"headerlink\" title=\"2.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00; &#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;\"></a>2.Vector&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x51CF;&#x5C11;&#x56FE;&#x50CF;&#x7684;&#x4F53;&#x79EF;&#xFF0C;&#x540C;&#x6837;&#x4E00;&#x5F20;&#x56FE;&#xFF0C;&#x7528;Vector&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x6709;PNG&#x7684;&#x51E0;&#x5341;&#x5206;&#x4E4B;&#x4E00; &#x4F7F;&#x7528;&#x7B80;&#x5355;&#xFF0C;</h3><h3 id=\"3-&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF;-&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B;-&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\"><a href=\"#3-&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF;-&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B;-&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\" class=\"headerlink\" title=\"3.&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF; &#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B; &#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;\"></a>3.&#x5F88;&#x591A;&#x8BBE;&#x8BA1;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;SVG&#x56FE;&#x50CF;&#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x6362;&#x6210;Vector&#x56FE;&#x50CF; &#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x52A8;&#x753B; &#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#xFF0C;&#x524D;&#x7AEF;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x5E7F;&#x6CDB;&#x7684;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x4E86;</h3><p>Vector&#x56FE;&#x50CF;&#x521A;&#x53D1;&#x5E03;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x53EA;&#x652F;&#x6301;Android 5.0+&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;Android pre-L&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x90A3;&#x65F6;&#x5019;&#x7684;Vector&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5375;&#x7528;&#x3002;<br>&#x4E0D;&#x8FC7;&#x81EA;&#x4ECE;AppCompat 23.2&#x4E4B;&#x540E;&#xFF0C;Google&#x5BF9;p-View&#x7684;Android&#x7CFB;&#x7EDF;&#x4E5F;&#x8FDB;&#x884C;&#x4E86;&#x517C;&#x5BB9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;Vector&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8E;Android 2.1&#x4EE5;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#xFF0C;<br>&#x53EA;&#x9700;&#x8981;&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\"><a href=\"#&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\" class=\"headerlink\" title=\"&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;\"></a>&#x517C;&#x5BB9;&#x7248;&#x672C;&#x9700;&#x8981;&#x505A;&#x4EE5;&#x4E0B;&#x4E09;&#x6B65;&#xFF1A;</h3><h4 id=\"1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"><a href=\"#1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\" class=\"headerlink\" title=\"1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"></a>1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;</h4><h4 id=\"2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\"><a href=\"#2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\" class=\"headerlink\" title=\"2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;vectorDrawables.useSupportLibrary = true\"></a>2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;<code>vectorDrawables.useSupportLibrary = true</code></h4><h4 id=\"3-&#x4F7F;&#x7528;app-srcCompat&#x66FF;&#x6362;android-src\"><a href=\"#3-&#x4F7F;&#x7528;app-srcCompat&#x66FF;&#x6362;android-src\" class=\"headerlink\" title=\"3.&#x4F7F;&#x7528;app:srcCompat&#x66FF;&#x6362;android:src\"></a>3.&#x4F7F;&#x7528;<code>app:srcCompat</code>&#x66FF;&#x6362;<code>android:src</code></h4><p>&#x4E0D;&#x8FC7; <code>app:srcCompat</code> &#x652F;&#x6301;ImageView\\ImageButton</p>\n<h3 id=\"Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app-srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\"><a href=\"#Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app-srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app:srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;\"></a>Button&#x5E76;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;app:srcCompat&#x6765;&#x4F7F;&#x7528;Vector&#x56FE;&#x50CF;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;Selector&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x56FE;&#x50CF;&#xFF0C;&#x7528;&#x4E8E;Selector&#x7684;&#x4E24;&#x4E2A;&#x72B6;&#x6001;</h3><p>select1.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hljs xml&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">android:viewportheight</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:viewportwidth</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">android:fillcolor</span>=<span class=\"string\">&quot;#FF000000&quot;</span> <span class=\"attr\">android:pathdata</span>=<span class=\"string\">&quot;M14.59,8L12,10.59 9.41,8 8,9.41 10.59,12 8,14.59 9.41,16 12,13.41 14.59,16 16,14.59 13.41,12 16,9.41 14.59,8zM12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z&quot;</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>select2.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">code</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;hljs xml&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">vector</span> <span class=\"attr\">android:height</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">android:viewportheight</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:viewportwidth</span>=<span class=\"string\">&quot;24.0&quot;</span> <span class=\"attr\">android:width</span>=<span class=\"string\">&quot;24dp&quot;</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">android:fillcolor</span>=<span class=\"string\">&quot;#FF000000&quot;</span> <span class=\"attr\">android:pathdata</span>=<span class=\"string\">&quot;M11,15h2v2h-2zM11,7h2v6h-2zM11.99,2C6.47,2 2,6.48 2,12s4.47,10 9.99,10C17.52,22 22,17.52 22,12S17.52,2 11.99,2zM12,20c-4.42,0 -8,-3.58 -8,-8s3.58,-8 8,-8 8,3.58 8,8 -3.58,8 -8,8z&quot;</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">path</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">vector</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">code</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>selector.xml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;code class=&quot;hljs xml&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?--&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/selector1&quot; android:state_pressed=&quot;true&quot;&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/selector2&quot;&gt;</div><div class=\"line\">&lt;/item&gt;&lt;/item&gt;&lt;/selector&gt;&lt;/code&gt;</div></pre></td></tr></table></figure></p>\n<p>button<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;button android:background=&quot;@drawable/selector&quot; android:id=&quot;@+id/btn&quot; android:layout_height=&quot;70dp&quot; android:layout_width=&quot;70dp&quot;&gt;&lt;/button&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x3002;&#x3002;&#x4F9D;&#x7136;&#x4E0D;&#x884C;<br>&#x9700;&#x8981;&#x5728;activity&#x91CC;&#x9762;&#x52A0;&#x4E0A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">static {</div><div class=\"line\">    AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);</div><div class=\"line\">}</div></pre></td></tr></table></figure></p>\n<p>&#x5F00;&#x542F;&#x8FD9;&#x4E2A;flag&#x540E;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x4F7F;&#x7528;Selector&#x8FD9;&#x6837;&#x7684;DrawableContainers&#x4E86;&#x3002;<br>&#x540C;&#x65F6;&#xFF0C;&#x4F60;&#x8FD8;&#x5F00;&#x542F;&#x4E86;&#x7C7B;&#x4F3C;android:drawableLeft&#x8FD9;&#x6837;&#x7684;compound drawable&#x7684;&#x4F7F;&#x7528;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x53CA;RadioButton&#x7684;&#x4F7F;&#x7528;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x53CA;ImageView&#x2019;s src&#x5C5E;&#x6027;&#x3002;</p>\n<p>Radiobutton&#x540C;&#x6837;&#x53EF;&#x4EE5;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;radiobutton android:button=&quot;@drawable/selector&quot; android:layout_height=&quot;50dp&quot; android:layout_width=&quot;50dp&quot;&gt;&lt;/radiobutton&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x8FD8;&#x6709;&#x52A8;&#x6001;Vector&#x7B49;&#x4F1A;&#x518D;&#x53E6;&#x8D77;&#x4E00;&#x7BC7;&#x597D;&#x4E86;</p>\n"},{"title":"git nothing added to commit but untracked files present","date":"2016-10-10T06:38:55.000Z","_content":"\n执行 git add . -A 了，没报错，结果commit的时候死活报这个错nothing added to commit but untracked files present\n纠结了老半天，最后用AS提的时候才报出错误信息“filename too long”，原来是我这个插件的路径太深了\n执行一句`git config --global core.longpaths true` 再次commit成功了\n但是为嘛git命令不提示错误呢=。=\n\n","source":"_posts/git-nothing-added-to-commit-but-untracked-files-present.md","raw":"---\ntitle: git nothing added to commit but untracked files present\ndate: 2016-10-10 14:38:55\ntags: Android\n---\n\n执行 git add . -A 了，没报错，结果commit的时候死活报这个错nothing added to commit but untracked files present\n纠结了老半天，最后用AS提的时候才报出错误信息“filename too long”，原来是我这个插件的路径太深了\n执行一句`git config --global core.longpaths true` 再次commit成功了\n但是为嘛git命令不提示错误呢=。=\n\n","slug":"git-nothing-added-to-commit-but-untracked-files-present","published":1,"updated":"2016-10-10T06:51:01.767Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwgv0006pkm8k7k1tdbk","content":"<p>&#x6267;&#x884C; git add . -A &#x4E86;&#xFF0C;&#x6CA1;&#x62A5;&#x9519;&#xFF0C;&#x7ED3;&#x679C;commit&#x7684;&#x65F6;&#x5019;&#x6B7B;&#x6D3B;&#x62A5;&#x8FD9;&#x4E2A;&#x9519;nothing added to commit but untracked files present<br>&#x7EA0;&#x7ED3;&#x4E86;&#x8001;&#x534A;&#x5929;&#xFF0C;&#x6700;&#x540E;&#x7528;AS&#x63D0;&#x7684;&#x65F6;&#x5019;&#x624D;&#x62A5;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x201C;filename too long&#x201D;&#xFF0C;&#x539F;&#x6765;&#x662F;&#x6211;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x592A;&#x6DF1;&#x4E86;<br>&#x6267;&#x884C;&#x4E00;&#x53E5;<code>git config --global core.longpaths true</code> &#x518D;&#x6B21;commit&#x6210;&#x529F;&#x4E86;<br>&#x4F46;&#x662F;&#x4E3A;&#x561B;git&#x547D;&#x4EE4;&#x4E0D;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x5462;=&#x3002;=</p>\n","excerpt":"","more":"<p>&#x6267;&#x884C; git add . -A &#x4E86;&#xFF0C;&#x6CA1;&#x62A5;&#x9519;&#xFF0C;&#x7ED3;&#x679C;commit&#x7684;&#x65F6;&#x5019;&#x6B7B;&#x6D3B;&#x62A5;&#x8FD9;&#x4E2A;&#x9519;nothing added to commit but untracked files present<br>&#x7EA0;&#x7ED3;&#x4E86;&#x8001;&#x534A;&#x5929;&#xFF0C;&#x6700;&#x540E;&#x7528;AS&#x63D0;&#x7684;&#x65F6;&#x5019;&#x624D;&#x62A5;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x201C;filename too long&#x201D;&#xFF0C;&#x539F;&#x6765;&#x662F;&#x6211;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x592A;&#x6DF1;&#x4E86;<br>&#x6267;&#x884C;&#x4E00;&#x53E5;<code>git config --global core.longpaths true</code> &#x518D;&#x6B21;commit&#x6210;&#x529F;&#x4E86;<br>&#x4F46;&#x662F;&#x4E3A;&#x561B;git&#x547D;&#x4EE4;&#x4E0D;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x5462;=&#x3002;=</p>\n"},{"title":"为过滤动态加入单选按钮","date":"2016-08-16T11:22:28.000Z","_content":"\n项目上做的一个过滤筛选的，先看看效果图\n![1](为过滤动态加入单选按钮/1.gif)\n\n这里的数据都是动态写入的，弹出的的是popupwindow，原本是侧滑的抽屉布局，领导要改成这样子，只好改了。\n\n### 1.Android Radiogroup的坑\nAndroid原生的Radiogroup是不支持换行的，也就是要么一直竖着要么一直横着，如果用两组radiogroup还需要自己实现互斥算法，比较麻烦。\n我这里使用自定义radiogroup，继承系统的RadioGroup来实现，也可以继承LinearLayout，不过显然第一种比较简单。\n\n```java\n\nimport android.content.Context;\nimport android.util.AttributeSet;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.RadioGroup;\n\n/**\n * 重新对RadioGroup进行布局，可以折行 \n * 默认水平开始排布 \n */\npublic class RadioGroupEx extends RadioGroup {\n    private static final String TAG = \"RadioGroupEx\";\n\n    public RadioGroupEx(Context context) {\n        super(context);\n    }\n\n    public RadioGroupEx(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n\n        //调用ViewGroup的方法，测量子view  \n        measureChildren(widthMeasureSpec, heightMeasureSpec);\n\n        //最大的宽  \n        int maxWidth = 0;\n        //累计的高  \n        int totalHeight = 0;\n\n        //当前这一行的累计行宽  \n        int lineWidth = 0;\n        //当前这行的最大行高  \n        int maxLineHeight = 0;\n        //用于记录换行前的行宽和行高  \n        int oldHeight;\n        int oldWidth;\n\n        int count = getChildCount();\n        //假设 widthMode和heightMode都是AT_MOST  \n        for (int i = 0; i < count; i++) {\n            View child = getChildAt(i);\n            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();\n            //得到这一行的最高  \n            oldHeight = maxLineHeight;\n            //当前最大宽度  \n            oldWidth = maxWidth;\n\n            int deltaX = child.getMeasuredWidth() + params.leftMargin + params.rightMargin;\n            if (lineWidth + deltaX + getPaddingLeft() + getPaddingRight() > widthSize) {//如果折行,height增加  \n                //和目前最大的宽度比较,得到最宽。不能加上当前的child的宽,所以用的是oldWidth  \n                maxWidth = Math.max(lineWidth, oldWidth);\n                //重置宽度  \n                lineWidth = deltaX;\n                //累加高度  \n                totalHeight += oldHeight;\n                //重置行高,当前这个View，属于下一行，因此当前最大行高为这个child的高度加上margin  \n                maxLineHeight = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;\n                Log.v(TAG, \"maxHeight:\" + totalHeight + \"---\" + \"maxWidth:\" + maxWidth);\n\n            } else {\n                //不换行，累加宽度  \n                lineWidth += deltaX;\n                //不换行，计算行最高  \n                int deltaY = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;\n                maxLineHeight = Math.max(maxLineHeight, deltaY);\n            }\n            if (i == count - 1) {\n                //前面没有加上下一行的搞，如果是最后一行，还要再叠加上最后一行的最高的值  \n                totalHeight += maxLineHeight;\n                //计算最后一行和前面的最宽的一行比较  \n                maxWidth = Math.max(lineWidth, oldWidth);\n            }\n        }\n\n        //加上当前容器的padding值  \n        maxWidth += getPaddingLeft() + getPaddingRight();\n        totalHeight += getPaddingTop() + getPaddingBottom();\n        setMeasuredDimension(widthMode == MeasureSpec.EXACTLY ? widthSize : maxWidth,\n                heightMode == MeasureSpec.EXACTLY ? heightSize : totalHeight);\n\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b) {\n        int count = getChildCount();\n        //pre为前面所有的child的相加后的位置  \n        int preLeft = getPaddingLeft();\n        int preTop = getPaddingTop();\n        //记录每一行的最高值  \n        int maxHeight = 0;\n        for (int i = 0; i < count; i++) {\n            View child = getChildAt(i);\n            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();\n            //r-l为当前容器的宽度。如果子view的累积宽度大于容器宽度，就换行。  \n            if (preLeft + params.leftMargin + child.getMeasuredWidth() + params.rightMargin + getPaddingRight() > (r - l)) {\n                //重置  \n                preLeft = getPaddingLeft();\n                //要选择child的height最大的作为设置  \n                preTop = preTop + maxHeight;\n                maxHeight = getChildAt(i).getMeasuredHeight() + params.topMargin + params.bottomMargin;\n            } else { //不换行,计算最大高度  \n                maxHeight = Math.max(maxHeight, child.getMeasuredHeight() + params.topMargin + params.bottomMargin);\n            }\n            //left坐标  \n            int left = preLeft + params.leftMargin;\n            //top坐标  \n            int top = preTop + params.topMargin;\n            int right = left + child.getMeasuredWidth();\n            int bottom = top + child.getMeasuredHeight();\n            //为子view布局  \n            child.layout(left, top, right, bottom);\n            //计算布局结束后，preLeft的值  \n            preLeft += params.leftMargin + child.getMeasuredWidth() + params.rightMargin;\n\n        }\n\n    }  }\n  \n\n```\n在布局中用这个radiogroup替代原生的既可，使用方法不变\n\n\n### 2.在activity中加入popup以及动态添加radiobutton的代码\n\n```java\n/**\n     * 过滤的popup\n     */\n    private final static String primaryUrl = \"www/js/primary_class_phase.json\";//小学\n    private final static String juniorUrl = \"www/js/junior_class_phase.json\";//初中\n    private final static String seniorUrl = \"www/js/senior_class_phase.json\";//高中\n\n    private RadioGroupEx phaseRadio;//学段\n    private RadioGroupEx gradeRadio;//年级\n    private RadioGroupEx subjectRadio;//科目\n    private String[] phaseCode={\"2\",\"3\",\"4\"};\n    private String[] gradeCode={\"1\",\"2\",\"3\",\"5\",\"7\",\"9\"};\n    private List<String> subjectCode=new ArrayList<>();\n    private void showPopupWindowFilter(View view) {\n        // 一个自定义的布局，作为显示的内容\n        View contentView = LayoutInflater.from(this).inflate(R.layout.openclass_filter_popup, null);\n        phaseRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_phase);\n        gradeRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_grade);\n        subjectRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_subject);\n        phaseRadio.setOrientation(LinearLayout.HORIZONTAL);\n        gradeRadio.setOrientation(LinearLayout.HORIZONTAL);\n        subjectRadio.setOrientation(LinearLayout.HORIZONTAL);\n\n        RadioGroup.OnCheckedChangeListener popupRadioCheckListener = new RadioGroup.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\n                switch (group.getId()){\n                    case R.id.openclass_radio_phase://学段\n                        phaseId = (String)group.findViewById(checkedId).getTag();\n                        mGradeId = \"\";\n                        subjectId = \"\";\n                        int pid = Integer.parseInt(phaseId);\n                        createSubjectRadio(pid,subjectRadio);\n                        createGradeRadio(pid,gradeRadio);\n                        break;\n                    case R.id.openclass_radio_grade://年级\n                        mGradeId = (String)group.findViewById(checkedId).getTag();\n                        break;\n                    case R.id.openclass_radio_subject://科目\n                        subjectId = (String)group.findViewById(checkedId).getTag();\n                        break;\n                }\n                Log.d(TAG,\"phaseId:\"+phaseId+\"mGradeId:\"+mGradeId+\"subjectId:\"+subjectId);\n                if(!StringUtils.isEmpty(phaseId)&&!StringUtils.isEmpty(mGradeId)&&!StringUtils.isEmpty(subjectId)){\n                    int currentItem = mViewPager.getCurrentItem();\n                    Fragment fragment = adapter.getPage(currentItem);\n                    if (fragment instanceof OpenclassUpdateFilter) {\n                        OpenclassUpdateFilter openclassUpdateFilter = (OpenclassUpdateFilter)fragment ;\n                        openclassUpdateFilter.updateData(phaseId,mGradeId,subjectId);\n                    }\n                }\n\n            }\n        };\n\n        phaseRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        gradeRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        subjectRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        createPhaseRadio(phaseRadio);\n        createGradeRadio(2,gradeRadio);//创建年级单选，根据学段，默认小学\n        createSubjectRadio(2,subjectRadio);//创建科目单选，根据学段，默认小学\n\n        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);\n        int width = (int) ((wm.getDefaultDisplay().getWidth()) * 0.35);//获取屏幕宽度的0.35倍赋给该popupWindow\n        final PopupWindow popupWindow = new PopupWindow(contentView,\n                LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, true);\n        popupWindow.setAnimationStyle(R.style.popwin_anim_style);\n\n        popupWindow.setTouchable(true);\n\n        popupWindow.setTouchInterceptor(new View.OnTouchListener() {\n\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n\n                Log.i(\"mengdd\", \"onTouch : \");\n\n                return false;\n                // 这里如果返回true的话，touch事件将被拦截\n                // 拦截后 PopupWindow的onTouchEvent不被调用，这样点击外部区域无法dismiss\n            }\n        });\n\n        // 如果不设置PopupWindow的背景，无论是点击外部区域还是Back键都无法dismiss弹框\n        // 我觉得这里是API的一个bug\n        popupWindow.setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.transparent)));\n\n        // 设置好参数之后再show\n        popupWindow.showAsDropDown(view);\n//        popupWindow.showAtLocation(view, Gravity.RIGHT | Gravity.TOP, ScreenUtil.dip2px(this, 8), ScreenUtil.dip2px(this, 70));\n    }\n\n    private void createPhaseRadio(RadioGroup radioGroup){\n        RadioButton tempButton1 = getBaseRadioButton();\n        tempButton1.setText(\"小学\");\n        tempButton1.setTag(phaseCode[0]);\n\n        radioGroup.addView(tempButton1, getbaseLayoutParams());\n        RadioButton tempButton2 = getBaseRadioButton();\n        tempButton2.setText(\"初中\");\n        tempButton2.setTag(phaseCode[1]);\n        radioGroup.addView(tempButton2, getbaseLayoutParams());\n        RadioButton tempButton3 = getBaseRadioButton();\n        tempButton3.setText(\"高中\");\n        tempButton3.setTag(phaseCode[2]);\n        radioGroup.addView(tempButton3, getbaseLayoutParams());\n\n        tempButton1.setChecked(true);//默认小学\n        phaseId = \"2\";\n    }\n\n    private void createGradeRadio(int phase,RadioGroup radioGroup){\n        radioGroup.removeAllViews();\n        switch (phase){\n            case 2:\n                RadioButton tempButton1 = getBaseRadioButton();\n                tempButton1.setText(\"一年级\");\n                tempButton1.setTag(gradeCode[0]);\n                radioGroup.addView(tempButton1, getbaseLayoutParams());\n                RadioButton tempButton2 = getBaseRadioButton();\n                tempButton2.setText(\"二年级\");\n                tempButton2.setTag(gradeCode[1]);\n                radioGroup.addView(tempButton2, getbaseLayoutParams());\n                RadioButton tempButton3 = getBaseRadioButton();\n                tempButton3.setText(\"三年级\");\n                tempButton3.setTag(gradeCode[2]);\n                radioGroup.addView(tempButton3, getbaseLayoutParams());\n                RadioButton tempButton4 = getBaseRadioButton();\n                tempButton4.setText(\"四年级\");\n                tempButton4.setTag(gradeCode[3]);\n                radioGroup.addView(tempButton4, getbaseLayoutParams());\n                RadioButton tempButton5 = getBaseRadioButton();\n                tempButton5.setText(\"五年级\");\n                tempButton5.setTag(gradeCode[4]);\n                radioGroup.addView(tempButton5, getbaseLayoutParams());\n                RadioButton tempButton6 = getBaseRadioButton();\n                tempButton6.setText(\"六年级\");\n                tempButton6.setTag(gradeCode[5]);\n                radioGroup.addView(tempButton6, getbaseLayoutParams());\n                break;\n            case 3:\n            case 4:\n                RadioButton tempButton7 = getBaseRadioButton();\n                tempButton7.setText(\"一年级\");\n                tempButton7.setTag(gradeCode[0]);\n                radioGroup.addView(tempButton7, getbaseLayoutParams());\n                RadioButton tempButton8 = getBaseRadioButton();\n                tempButton8.setText(\"二年级\");\n                tempButton8.setTag(gradeCode[1]);\n                radioGroup.addView(tempButton8, getbaseLayoutParams());\n                RadioButton tempButton9 = getBaseRadioButton();\n                tempButton9.setText(\"三年级\");\n                tempButton9.setTag(gradeCode[2]);\n                radioGroup.addView(tempButton9, getbaseLayoutParams());\n                break;\n        }\n    }\n\n\n\n    private void createSubjectRadio(final int phase, final RadioGroup radioGroup){\n        dialogHelper.showProgressDialog(\"加载中...\");\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String jsonStr=\"\";\n                switch (phase){\n                    case 2:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,primaryUrl);//小学\n                        break;\n                    case 3:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,juniorUrl);//初中\n                        break;\n                    case 4:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,seniorUrl);//高中\n                        break;\n                }\n\n\n                final List<Map<String, String>> data = AppJsonFileReader.setListData(jsonStr);\n\n//                    list.addAll(mCources);\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        radioGroup.removeAllViews();\n                        subjectCode.clear();\n                        radioGroup.setOrientation(LinearLayout.HORIZONTAL);\n                        for(int i = 0;i<data.size();i++){\n                            RadioButton tempButton = getBaseRadioButton();\n                            tempButton.setText(data.get(i).get(\"Name\"));\n                            tempButton.setTag(data.get(i).get(\"Code\"));\n                            radioGroup.addView(tempButton, getbaseLayoutParams());\n                            subjectCode.add(data.get(i).get(\"Code\"));\n                        }\n                        dialogHelper.dismissProgressDialog();\n                    }\n                });\n            }\n        }).start();\n    }\n\n    private RadioButton getBaseRadioButton(){\n        RadioButton tempButton = new RadioButton(this);\n//                        tempButton.setTextSize(ScreenUtil.dip2px(context, 5));\n        tempButton.setTextSize(TypedValue.COMPLEX_UNIT_SP,16);\n        tempButton.setTextColor(getResources().getColorStateList(R.color.filter_phase_text_selecter));\n        tempButton.setButtonDrawable(getResources().getDrawable(android.R.color.transparent));\n//        tempButton.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);\n\n\n        tempButton.setBackgroundResource(R.drawable.filter_phase_selecter);\n//        tempButton.setCompoundDrawablePadding(ScreenUtil.dip2px(getActivity(), 10));\n//        tempButton.setPadding(20, 20, 20, 20);                 // 设置文字距离按钮四周的距离\n\n//        layoutParams.weight =0.3f;\n//        tempButton.setLayoutParams(layoutParams);\n        return tempButton;\n    }\n\n    private RadioGroup.LayoutParams getbaseLayoutParams(){\n        RadioGroup.LayoutParams layoutParams = new RadioGroup.LayoutParams(RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);\n        layoutParams.setMargins(15,15,15,15);\n        return layoutParams;\n    }\n\n```\n\n动态创建radiobutton的地方纠结了好久，主要是设置margin不生效的问题，这里要注意要用RadioGroup.LayoutParams，在stackoverflow上找到的解决办法。\n\n服务端的过滤数据写的是配置，不会变的的学段和年级就直接写死了，科目写的json配置文件，动态读取。\n\npopup的xml\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:student=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@id/openclass_filter\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/white\"\n    android:orientation=\"vertical\">\n\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center_vertical\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_phase\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_phase\"\n            android:textSize=\"20sp\" />\n\n        <com.tyky.edu.teacher.main.ui.RadioGroupEx\n            android:id=\"@+id/openclass_radio_phase\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_phase\"></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n    </RelativeLayout>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:background=\"@color/filter_radio_line\" />\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_grade\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_grade\"\n            android:textSize=\"20sp\" />\n\n        <com.tyky.edu.teacher.main.ui.RadioGroupEx\n            android:id=\"@+id/openclass_radio_grade\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_grade\"></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n    </RelativeLayout>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:background=\"@color/filter_radio_line\" />\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_subject\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_subject\"\n            android:textSize=\"20sp\" />\n\n        <ScrollView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_subject\"\n            android:fillViewport=\"true\">\n\n            <com.tyky.edu.teacher.main.ui.RadioGroupEx\n                android:id=\"@+id/openclass_radio_subject\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                ></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n        </ScrollView>\n    </RelativeLayout>\n\n\n</LinearLayout>\n\n```\n\n### 3.直接在点击事件出调用showPopupWindowFilter既可\n\n\n### 这里popup弹出用到了一个折叠动画\n下面附上代码，以后有时间再详细写写各种动画\n\nstyle:\n```java\n<style name=\"popwin_anim_style\">\n        <item name=\"android:windowEnterAnimation\">@anim/popup_show_anim</item>\n        <item name=\"android:windowExitAnimation\">@anim/popup_hide_anim</item>\n    </style>\n```\npopup_show_anim:\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <scale\n        android:fromXScale=\"1.0\"\n        android:toXScale=\"1.0\"\n        android:fromYScale=\"0.0\"\n        android:toYScale=\"1.0\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0\"\n        android:duration=\"300\" />\n</set>\n```\n\npopup_hide_anim:\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <scale\n        android:fromXScale=\"1.0\"\n        android:toXScale=\"1.0\"\n        android:fromYScale=\"1.0\"\n        android:toYScale=\"0.0\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0\"\n        android:duration=\"300\" />\n</set>\n```","source":"_posts/为过滤动态加入单选按钮.md","raw":"---\ntitle: 为过滤动态加入单选按钮\ndate: 2016-08-16 19:22:28\ntags: Android\n---\n\n项目上做的一个过滤筛选的，先看看效果图\n![1](为过滤动态加入单选按钮/1.gif)\n\n这里的数据都是动态写入的，弹出的的是popupwindow，原本是侧滑的抽屉布局，领导要改成这样子，只好改了。\n\n### 1.Android Radiogroup的坑\nAndroid原生的Radiogroup是不支持换行的，也就是要么一直竖着要么一直横着，如果用两组radiogroup还需要自己实现互斥算法，比较麻烦。\n我这里使用自定义radiogroup，继承系统的RadioGroup来实现，也可以继承LinearLayout，不过显然第一种比较简单。\n\n```java\n\nimport android.content.Context;\nimport android.util.AttributeSet;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.RadioGroup;\n\n/**\n * 重新对RadioGroup进行布局，可以折行 \n * 默认水平开始排布 \n */\npublic class RadioGroupEx extends RadioGroup {\n    private static final String TAG = \"RadioGroupEx\";\n\n    public RadioGroupEx(Context context) {\n        super(context);\n    }\n\n    public RadioGroupEx(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n\n        //调用ViewGroup的方法，测量子view  \n        measureChildren(widthMeasureSpec, heightMeasureSpec);\n\n        //最大的宽  \n        int maxWidth = 0;\n        //累计的高  \n        int totalHeight = 0;\n\n        //当前这一行的累计行宽  \n        int lineWidth = 0;\n        //当前这行的最大行高  \n        int maxLineHeight = 0;\n        //用于记录换行前的行宽和行高  \n        int oldHeight;\n        int oldWidth;\n\n        int count = getChildCount();\n        //假设 widthMode和heightMode都是AT_MOST  \n        for (int i = 0; i < count; i++) {\n            View child = getChildAt(i);\n            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();\n            //得到这一行的最高  \n            oldHeight = maxLineHeight;\n            //当前最大宽度  \n            oldWidth = maxWidth;\n\n            int deltaX = child.getMeasuredWidth() + params.leftMargin + params.rightMargin;\n            if (lineWidth + deltaX + getPaddingLeft() + getPaddingRight() > widthSize) {//如果折行,height增加  \n                //和目前最大的宽度比较,得到最宽。不能加上当前的child的宽,所以用的是oldWidth  \n                maxWidth = Math.max(lineWidth, oldWidth);\n                //重置宽度  \n                lineWidth = deltaX;\n                //累加高度  \n                totalHeight += oldHeight;\n                //重置行高,当前这个View，属于下一行，因此当前最大行高为这个child的高度加上margin  \n                maxLineHeight = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;\n                Log.v(TAG, \"maxHeight:\" + totalHeight + \"---\" + \"maxWidth:\" + maxWidth);\n\n            } else {\n                //不换行，累加宽度  \n                lineWidth += deltaX;\n                //不换行，计算行最高  \n                int deltaY = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;\n                maxLineHeight = Math.max(maxLineHeight, deltaY);\n            }\n            if (i == count - 1) {\n                //前面没有加上下一行的搞，如果是最后一行，还要再叠加上最后一行的最高的值  \n                totalHeight += maxLineHeight;\n                //计算最后一行和前面的最宽的一行比较  \n                maxWidth = Math.max(lineWidth, oldWidth);\n            }\n        }\n\n        //加上当前容器的padding值  \n        maxWidth += getPaddingLeft() + getPaddingRight();\n        totalHeight += getPaddingTop() + getPaddingBottom();\n        setMeasuredDimension(widthMode == MeasureSpec.EXACTLY ? widthSize : maxWidth,\n                heightMode == MeasureSpec.EXACTLY ? heightSize : totalHeight);\n\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b) {\n        int count = getChildCount();\n        //pre为前面所有的child的相加后的位置  \n        int preLeft = getPaddingLeft();\n        int preTop = getPaddingTop();\n        //记录每一行的最高值  \n        int maxHeight = 0;\n        for (int i = 0; i < count; i++) {\n            View child = getChildAt(i);\n            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();\n            //r-l为当前容器的宽度。如果子view的累积宽度大于容器宽度，就换行。  \n            if (preLeft + params.leftMargin + child.getMeasuredWidth() + params.rightMargin + getPaddingRight() > (r - l)) {\n                //重置  \n                preLeft = getPaddingLeft();\n                //要选择child的height最大的作为设置  \n                preTop = preTop + maxHeight;\n                maxHeight = getChildAt(i).getMeasuredHeight() + params.topMargin + params.bottomMargin;\n            } else { //不换行,计算最大高度  \n                maxHeight = Math.max(maxHeight, child.getMeasuredHeight() + params.topMargin + params.bottomMargin);\n            }\n            //left坐标  \n            int left = preLeft + params.leftMargin;\n            //top坐标  \n            int top = preTop + params.topMargin;\n            int right = left + child.getMeasuredWidth();\n            int bottom = top + child.getMeasuredHeight();\n            //为子view布局  \n            child.layout(left, top, right, bottom);\n            //计算布局结束后，preLeft的值  \n            preLeft += params.leftMargin + child.getMeasuredWidth() + params.rightMargin;\n\n        }\n\n    }  }\n  \n\n```\n在布局中用这个radiogroup替代原生的既可，使用方法不变\n\n\n### 2.在activity中加入popup以及动态添加radiobutton的代码\n\n```java\n/**\n     * 过滤的popup\n     */\n    private final static String primaryUrl = \"www/js/primary_class_phase.json\";//小学\n    private final static String juniorUrl = \"www/js/junior_class_phase.json\";//初中\n    private final static String seniorUrl = \"www/js/senior_class_phase.json\";//高中\n\n    private RadioGroupEx phaseRadio;//学段\n    private RadioGroupEx gradeRadio;//年级\n    private RadioGroupEx subjectRadio;//科目\n    private String[] phaseCode={\"2\",\"3\",\"4\"};\n    private String[] gradeCode={\"1\",\"2\",\"3\",\"5\",\"7\",\"9\"};\n    private List<String> subjectCode=new ArrayList<>();\n    private void showPopupWindowFilter(View view) {\n        // 一个自定义的布局，作为显示的内容\n        View contentView = LayoutInflater.from(this).inflate(R.layout.openclass_filter_popup, null);\n        phaseRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_phase);\n        gradeRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_grade);\n        subjectRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_subject);\n        phaseRadio.setOrientation(LinearLayout.HORIZONTAL);\n        gradeRadio.setOrientation(LinearLayout.HORIZONTAL);\n        subjectRadio.setOrientation(LinearLayout.HORIZONTAL);\n\n        RadioGroup.OnCheckedChangeListener popupRadioCheckListener = new RadioGroup.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\n                switch (group.getId()){\n                    case R.id.openclass_radio_phase://学段\n                        phaseId = (String)group.findViewById(checkedId).getTag();\n                        mGradeId = \"\";\n                        subjectId = \"\";\n                        int pid = Integer.parseInt(phaseId);\n                        createSubjectRadio(pid,subjectRadio);\n                        createGradeRadio(pid,gradeRadio);\n                        break;\n                    case R.id.openclass_radio_grade://年级\n                        mGradeId = (String)group.findViewById(checkedId).getTag();\n                        break;\n                    case R.id.openclass_radio_subject://科目\n                        subjectId = (String)group.findViewById(checkedId).getTag();\n                        break;\n                }\n                Log.d(TAG,\"phaseId:\"+phaseId+\"mGradeId:\"+mGradeId+\"subjectId:\"+subjectId);\n                if(!StringUtils.isEmpty(phaseId)&&!StringUtils.isEmpty(mGradeId)&&!StringUtils.isEmpty(subjectId)){\n                    int currentItem = mViewPager.getCurrentItem();\n                    Fragment fragment = adapter.getPage(currentItem);\n                    if (fragment instanceof OpenclassUpdateFilter) {\n                        OpenclassUpdateFilter openclassUpdateFilter = (OpenclassUpdateFilter)fragment ;\n                        openclassUpdateFilter.updateData(phaseId,mGradeId,subjectId);\n                    }\n                }\n\n            }\n        };\n\n        phaseRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        gradeRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        subjectRadio.setOnCheckedChangeListener(popupRadioCheckListener);\n        createPhaseRadio(phaseRadio);\n        createGradeRadio(2,gradeRadio);//创建年级单选，根据学段，默认小学\n        createSubjectRadio(2,subjectRadio);//创建科目单选，根据学段，默认小学\n\n        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);\n        int width = (int) ((wm.getDefaultDisplay().getWidth()) * 0.35);//获取屏幕宽度的0.35倍赋给该popupWindow\n        final PopupWindow popupWindow = new PopupWindow(contentView,\n                LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, true);\n        popupWindow.setAnimationStyle(R.style.popwin_anim_style);\n\n        popupWindow.setTouchable(true);\n\n        popupWindow.setTouchInterceptor(new View.OnTouchListener() {\n\n            @Override\n            public boolean onTouch(View v, MotionEvent event) {\n\n                Log.i(\"mengdd\", \"onTouch : \");\n\n                return false;\n                // 这里如果返回true的话，touch事件将被拦截\n                // 拦截后 PopupWindow的onTouchEvent不被调用，这样点击外部区域无法dismiss\n            }\n        });\n\n        // 如果不设置PopupWindow的背景，无论是点击外部区域还是Back键都无法dismiss弹框\n        // 我觉得这里是API的一个bug\n        popupWindow.setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.transparent)));\n\n        // 设置好参数之后再show\n        popupWindow.showAsDropDown(view);\n//        popupWindow.showAtLocation(view, Gravity.RIGHT | Gravity.TOP, ScreenUtil.dip2px(this, 8), ScreenUtil.dip2px(this, 70));\n    }\n\n    private void createPhaseRadio(RadioGroup radioGroup){\n        RadioButton tempButton1 = getBaseRadioButton();\n        tempButton1.setText(\"小学\");\n        tempButton1.setTag(phaseCode[0]);\n\n        radioGroup.addView(tempButton1, getbaseLayoutParams());\n        RadioButton tempButton2 = getBaseRadioButton();\n        tempButton2.setText(\"初中\");\n        tempButton2.setTag(phaseCode[1]);\n        radioGroup.addView(tempButton2, getbaseLayoutParams());\n        RadioButton tempButton3 = getBaseRadioButton();\n        tempButton3.setText(\"高中\");\n        tempButton3.setTag(phaseCode[2]);\n        radioGroup.addView(tempButton3, getbaseLayoutParams());\n\n        tempButton1.setChecked(true);//默认小学\n        phaseId = \"2\";\n    }\n\n    private void createGradeRadio(int phase,RadioGroup radioGroup){\n        radioGroup.removeAllViews();\n        switch (phase){\n            case 2:\n                RadioButton tempButton1 = getBaseRadioButton();\n                tempButton1.setText(\"一年级\");\n                tempButton1.setTag(gradeCode[0]);\n                radioGroup.addView(tempButton1, getbaseLayoutParams());\n                RadioButton tempButton2 = getBaseRadioButton();\n                tempButton2.setText(\"二年级\");\n                tempButton2.setTag(gradeCode[1]);\n                radioGroup.addView(tempButton2, getbaseLayoutParams());\n                RadioButton tempButton3 = getBaseRadioButton();\n                tempButton3.setText(\"三年级\");\n                tempButton3.setTag(gradeCode[2]);\n                radioGroup.addView(tempButton3, getbaseLayoutParams());\n                RadioButton tempButton4 = getBaseRadioButton();\n                tempButton4.setText(\"四年级\");\n                tempButton4.setTag(gradeCode[3]);\n                radioGroup.addView(tempButton4, getbaseLayoutParams());\n                RadioButton tempButton5 = getBaseRadioButton();\n                tempButton5.setText(\"五年级\");\n                tempButton5.setTag(gradeCode[4]);\n                radioGroup.addView(tempButton5, getbaseLayoutParams());\n                RadioButton tempButton6 = getBaseRadioButton();\n                tempButton6.setText(\"六年级\");\n                tempButton6.setTag(gradeCode[5]);\n                radioGroup.addView(tempButton6, getbaseLayoutParams());\n                break;\n            case 3:\n            case 4:\n                RadioButton tempButton7 = getBaseRadioButton();\n                tempButton7.setText(\"一年级\");\n                tempButton7.setTag(gradeCode[0]);\n                radioGroup.addView(tempButton7, getbaseLayoutParams());\n                RadioButton tempButton8 = getBaseRadioButton();\n                tempButton8.setText(\"二年级\");\n                tempButton8.setTag(gradeCode[1]);\n                radioGroup.addView(tempButton8, getbaseLayoutParams());\n                RadioButton tempButton9 = getBaseRadioButton();\n                tempButton9.setText(\"三年级\");\n                tempButton9.setTag(gradeCode[2]);\n                radioGroup.addView(tempButton9, getbaseLayoutParams());\n                break;\n        }\n    }\n\n\n\n    private void createSubjectRadio(final int phase, final RadioGroup radioGroup){\n        dialogHelper.showProgressDialog(\"加载中...\");\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                String jsonStr=\"\";\n                switch (phase){\n                    case 2:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,primaryUrl);//小学\n                        break;\n                    case 3:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,juniorUrl);//初中\n                        break;\n                    case 4:\n                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.this,seniorUrl);//高中\n                        break;\n                }\n\n\n                final List<Map<String, String>> data = AppJsonFileReader.setListData(jsonStr);\n\n//                    list.addAll(mCources);\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        radioGroup.removeAllViews();\n                        subjectCode.clear();\n                        radioGroup.setOrientation(LinearLayout.HORIZONTAL);\n                        for(int i = 0;i<data.size();i++){\n                            RadioButton tempButton = getBaseRadioButton();\n                            tempButton.setText(data.get(i).get(\"Name\"));\n                            tempButton.setTag(data.get(i).get(\"Code\"));\n                            radioGroup.addView(tempButton, getbaseLayoutParams());\n                            subjectCode.add(data.get(i).get(\"Code\"));\n                        }\n                        dialogHelper.dismissProgressDialog();\n                    }\n                });\n            }\n        }).start();\n    }\n\n    private RadioButton getBaseRadioButton(){\n        RadioButton tempButton = new RadioButton(this);\n//                        tempButton.setTextSize(ScreenUtil.dip2px(context, 5));\n        tempButton.setTextSize(TypedValue.COMPLEX_UNIT_SP,16);\n        tempButton.setTextColor(getResources().getColorStateList(R.color.filter_phase_text_selecter));\n        tempButton.setButtonDrawable(getResources().getDrawable(android.R.color.transparent));\n//        tempButton.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);\n\n\n        tempButton.setBackgroundResource(R.drawable.filter_phase_selecter);\n//        tempButton.setCompoundDrawablePadding(ScreenUtil.dip2px(getActivity(), 10));\n//        tempButton.setPadding(20, 20, 20, 20);                 // 设置文字距离按钮四周的距离\n\n//        layoutParams.weight =0.3f;\n//        tempButton.setLayoutParams(layoutParams);\n        return tempButton;\n    }\n\n    private RadioGroup.LayoutParams getbaseLayoutParams(){\n        RadioGroup.LayoutParams layoutParams = new RadioGroup.LayoutParams(RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);\n        layoutParams.setMargins(15,15,15,15);\n        return layoutParams;\n    }\n\n```\n\n动态创建radiobutton的地方纠结了好久，主要是设置margin不生效的问题，这里要注意要用RadioGroup.LayoutParams，在stackoverflow上找到的解决办法。\n\n服务端的过滤数据写的是配置，不会变的的学段和年级就直接写死了，科目写的json配置文件，动态读取。\n\npopup的xml\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:student=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@id/openclass_filter\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/white\"\n    android:orientation=\"vertical\">\n\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center_vertical\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_phase\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_phase\"\n            android:textSize=\"20sp\" />\n\n        <com.tyky.edu.teacher.main.ui.RadioGroupEx\n            android:id=\"@+id/openclass_radio_phase\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_phase\"></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n    </RelativeLayout>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:background=\"@color/filter_radio_line\" />\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_grade\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_grade\"\n            android:textSize=\"20sp\" />\n\n        <com.tyky.edu.teacher.main.ui.RadioGroupEx\n            android:id=\"@+id/openclass_radio_grade\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_grade\"></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n    </RelativeLayout>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginRight=\"8dp\"\n        android:background=\"@color/filter_radio_line\" />\n\n    <RelativeLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"15dp\"\n        android:layout_marginLeft=\"15dp\"\n        android:layout_marginTop=\"15dp\">\n\n        <TextView\n            android:id=\"@id/openclass_condition_subject\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginRight=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:text=\"@string/openclass_screening_subject\"\n            android:textSize=\"20sp\" />\n\n        <ScrollView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_toRightOf=\"@id/openclass_condition_subject\"\n            android:fillViewport=\"true\">\n\n            <com.tyky.edu.teacher.main.ui.RadioGroupEx\n                android:id=\"@+id/openclass_radio_subject\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                ></com.tyky.edu.teacher.main.ui.RadioGroupEx>\n        </ScrollView>\n    </RelativeLayout>\n\n\n</LinearLayout>\n\n```\n\n### 3.直接在点击事件出调用showPopupWindowFilter既可\n\n\n### 这里popup弹出用到了一个折叠动画\n下面附上代码，以后有时间再详细写写各种动画\n\nstyle:\n```java\n<style name=\"popwin_anim_style\">\n        <item name=\"android:windowEnterAnimation\">@anim/popup_show_anim</item>\n        <item name=\"android:windowExitAnimation\">@anim/popup_hide_anim</item>\n    </style>\n```\npopup_show_anim:\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <scale\n        android:fromXScale=\"1.0\"\n        android:toXScale=\"1.0\"\n        android:fromYScale=\"0.0\"\n        android:toYScale=\"1.0\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0\"\n        android:duration=\"300\" />\n</set>\n```\n\npopup_hide_anim:\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<set xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <scale\n        android:fromXScale=\"1.0\"\n        android:toXScale=\"1.0\"\n        android:fromYScale=\"1.0\"\n        android:toYScale=\"0.0\"\n        android:pivotX=\"100%\"\n        android:pivotY=\"0\"\n        android:duration=\"300\" />\n</set>\n```","slug":"为过滤动态加入单选按钮","published":1,"updated":"2016-08-26T02:58:02.394Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwgy0008pkm85gxmo3pt","content":"<p>&#x9879;&#x76EE;&#x4E0A;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x7B5B;&#x9009;&#x7684;&#xFF0C;&#x5148;&#x770B;&#x770B;&#x6548;&#x679C;&#x56FE;<br><img src=\"/2016/08/16/&#x4E3A;&#x8FC7;&#x6EE4;&#x52A8;&#x6001;&#x52A0;&#x5165;&#x5355;&#x9009;&#x6309;&#x94AE;/1.gif\" alt=\"1\"></p>\n<p>&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x52A8;&#x6001;&#x5199;&#x5165;&#x7684;&#xFF0C;&#x5F39;&#x51FA;&#x7684;&#x7684;&#x662F;popupwindow&#xFF0C;&#x539F;&#x672C;&#x662F;&#x4FA7;&#x6ED1;&#x7684;&#x62BD;&#x5C49;&#x5E03;&#x5C40;&#xFF0C;&#x9886;&#x5BFC;&#x8981;&#x6539;&#x6210;&#x8FD9;&#x6837;&#x5B50;&#xFF0C;&#x53EA;&#x597D;&#x6539;&#x4E86;&#x3002;</p>\n<h3 id=\"1-Android-Radiogroup&#x7684;&#x5751;\"><a href=\"#1-Android-Radiogroup&#x7684;&#x5751;\" class=\"headerlink\" title=\"1.Android Radiogroup&#x7684;&#x5751;\"></a>1.Android Radiogroup&#x7684;&#x5751;</h3><p>Android&#x539F;&#x751F;&#x7684;Radiogroup&#x662F;&#x4E0D;&#x652F;&#x6301;&#x6362;&#x884C;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8981;&#x4E48;&#x4E00;&#x76F4;&#x7AD6;&#x7740;&#x8981;&#x4E48;&#x4E00;&#x76F4;&#x6A2A;&#x7740;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x4E24;&#x7EC4;radiogroup&#x8FD8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E92;&#x65A5;&#x7B97;&#x6CD5;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;<br>&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;radiogroup&#xFF0C;&#x7EE7;&#x627F;&#x7CFB;&#x7EDF;&#x7684;RadioGroup&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;LinearLayout&#xFF0C;&#x4E0D;&#x8FC7;&#x663E;&#x7136;&#x7B2C;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.RadioGroup;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * &#x91CD;&#x65B0;&#x5BF9;RadioGroup&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#xFF0C;&#x53EF;&#x4EE5;&#x6298;&#x884C; </div><div class=\"line\"> * &#x9ED8;&#x8BA4;&#x6C34;&#x5E73;&#x5F00;&#x59CB;&#x6392;&#x5E03; </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RadioGroupEx</span> <span class=\"keyword\">extends</span> <span class=\"title\">RadioGroup</span> </span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">&quot;RadioGroupEx&quot;</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RadioGroupEx</span><span class=\"params\">(Context context)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RadioGroupEx</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x8C03;&#x7528;ViewGroup&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6D4B;&#x91CF;&#x5B50;view  </span></div><div class=\"line\">        measureChildren(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x6700;&#x5927;&#x7684;&#x5BBD;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x7D2F;&#x8BA1;&#x7684;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> totalHeight = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x5F53;&#x524D;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x7D2F;&#x8BA1;&#x884C;&#x5BBD;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> lineWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x5F53;&#x524D;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x5927;&#x884C;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxLineHeight = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6362;&#x884C;&#x524D;&#x7684;&#x884C;&#x5BBD;&#x548C;&#x884C;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> oldHeight;</div><div class=\"line\">        <span class=\"keyword\">int</span> oldWidth;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> count = getChildCount();</div><div class=\"line\">        <span class=\"comment\">//&#x5047;&#x8BBE; widthMode&#x548C;heightMode&#x90FD;&#x662F;AT_MOST  </span></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">            <span class=\"comment\">//&#x5F97;&#x5230;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;  </span></div><div class=\"line\">            oldHeight = maxLineHeight;</div><div class=\"line\">            <span class=\"comment\">//&#x5F53;&#x524D;&#x6700;&#x5927;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">            oldWidth = maxWidth;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">int</span> deltaX = child.getMeasuredWidth() + params.leftMargin + params.rightMargin;</div><div class=\"line\">            <span class=\"keyword\">if</span> (lineWidth + deltaX + getPaddingLeft() + getPaddingRight() &gt; widthSize) {<span class=\"comment\">//&#x5982;&#x679C;&#x6298;&#x884C;,height&#x589E;&#x52A0;  </span></div><div class=\"line\">                <span class=\"comment\">//&#x548C;&#x76EE;&#x524D;&#x6700;&#x5927;&#x7684;&#x5BBD;&#x5EA6;&#x6BD4;&#x8F83;,&#x5F97;&#x5230;&#x6700;&#x5BBD;&#x3002;&#x4E0D;&#x80FD;&#x52A0;&#x4E0A;&#x5F53;&#x524D;&#x7684;child&#x7684;&#x5BBD;,&#x6240;&#x4EE5;&#x7528;&#x7684;&#x662F;oldWidth  </span></div><div class=\"line\">                maxWidth = Math.max(lineWidth, oldWidth);</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">                lineWidth = deltaX;</div><div class=\"line\">                <span class=\"comment\">//&#x7D2F;&#x52A0;&#x9AD8;&#x5EA6;  </span></div><div class=\"line\">                totalHeight += oldHeight;</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;&#x884C;&#x9AD8;,&#x5F53;&#x524D;&#x8FD9;&#x4E2A;View&#xFF0C;&#x5C5E;&#x4E8E;&#x4E0B;&#x4E00;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x524D;&#x6700;&#x5927;&#x884C;&#x9AD8;&#x4E3A;&#x8FD9;&#x4E2A;child&#x7684;&#x9AD8;&#x5EA6;&#x52A0;&#x4E0A;margin  </span></div><div class=\"line\">                maxLineHeight = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">                Log.v(TAG, <span class=\"string\">&quot;maxHeight:&quot;</span> + totalHeight + <span class=\"string\">&quot;---&quot;</span> + <span class=\"string\">&quot;maxWidth:&quot;</span> + maxWidth);</div><div class=\"line\"></div><div class=\"line\">            } <span class=\"keyword\">else</span> {</div><div class=\"line\">                <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;&#xFF0C;&#x7D2F;&#x52A0;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">                lineWidth += deltaX;</div><div class=\"line\">                <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;&#xFF0C;&#x8BA1;&#x7B97;&#x884C;&#x6700;&#x9AD8;  </span></div><div class=\"line\">                <span class=\"keyword\">int</span> deltaY = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">                maxLineHeight = Math.max(maxLineHeight, deltaY);</div><div class=\"line\">            }</div><div class=\"line\">            <span class=\"keyword\">if</span> (i == count - <span class=\"number\">1</span>) {</div><div class=\"line\">                <span class=\"comment\">//&#x524D;&#x9762;&#x6CA1;&#x6709;&#x52A0;&#x4E0A;&#x4E0B;&#x4E00;&#x884C;&#x7684;&#x641E;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6700;&#x540E;&#x4E00;&#x884C;&#xFF0C;&#x8FD8;&#x8981;&#x518D;&#x53E0;&#x52A0;&#x4E0A;&#x6700;&#x540E;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;&#x7684;&#x503C;  </span></div><div class=\"line\">                totalHeight += maxLineHeight;</div><div class=\"line\">                <span class=\"comment\">//&#x8BA1;&#x7B97;&#x6700;&#x540E;&#x4E00;&#x884C;&#x548C;&#x524D;&#x9762;&#x7684;&#x6700;&#x5BBD;&#x7684;&#x4E00;&#x884C;&#x6BD4;&#x8F83;  </span></div><div class=\"line\">                maxWidth = Math.max(lineWidth, oldWidth);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x52A0;&#x4E0A;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x7684;padding&#x503C;  </span></div><div class=\"line\">        maxWidth += getPaddingLeft() + getPaddingRight();</div><div class=\"line\">        totalHeight += getPaddingTop() + getPaddingBottom();</div><div class=\"line\">        setMeasuredDimension(widthMode == MeasureSpec.EXACTLY ? widthSize : maxWidth,</div><div class=\"line\">                heightMode == MeasureSpec.EXACTLY ? heightSize : totalHeight);</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> t, <span class=\"keyword\">int</span> r, <span class=\"keyword\">int</span> b)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> count = getChildCount();</div><div class=\"line\">        <span class=\"comment\">//pre&#x4E3A;&#x524D;&#x9762;&#x6240;&#x6709;&#x7684;child&#x7684;&#x76F8;&#x52A0;&#x540E;&#x7684;&#x4F4D;&#x7F6E;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> preLeft = getPaddingLeft();</div><div class=\"line\">        <span class=\"keyword\">int</span> preTop = getPaddingTop();</div><div class=\"line\">        <span class=\"comment\">//&#x8BB0;&#x5F55;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;&#x503C;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxHeight = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">            <span class=\"comment\">//r-l&#x4E3A;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x7684;&#x5BBD;&#x5EA6;&#x3002;&#x5982;&#x679C;&#x5B50;view&#x7684;&#x7D2F;&#x79EF;&#x5BBD;&#x5EA6;&#x5927;&#x4E8E;&#x5BB9;&#x5668;&#x5BBD;&#x5EA6;&#xFF0C;&#x5C31;&#x6362;&#x884C;&#x3002;  </span></div><div class=\"line\">            <span class=\"keyword\">if</span> (preLeft + params.leftMargin + child.getMeasuredWidth() + params.rightMargin + getPaddingRight() &gt; (r - l)) {</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;  </span></div><div class=\"line\">                preLeft = getPaddingLeft();</div><div class=\"line\">                <span class=\"comment\">//&#x8981;&#x9009;&#x62E9;child&#x7684;height&#x6700;&#x5927;&#x7684;&#x4F5C;&#x4E3A;&#x8BBE;&#x7F6E;  </span></div><div class=\"line\">                preTop = preTop + maxHeight;</div><div class=\"line\">                maxHeight = getChildAt(i).getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">            } <span class=\"keyword\">else</span> { <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;,&#x8BA1;&#x7B97;&#x6700;&#x5927;&#x9AD8;&#x5EA6;  </span></div><div class=\"line\">                maxHeight = Math.max(maxHeight, child.getMeasuredHeight() + params.topMargin + params.bottomMargin);</div><div class=\"line\">            }</div><div class=\"line\">            <span class=\"comment\">//left&#x5750;&#x6807;  </span></div><div class=\"line\">            <span class=\"keyword\">int</span> left = preLeft + params.leftMargin;</div><div class=\"line\">            <span class=\"comment\">//top&#x5750;&#x6807;  </span></div><div class=\"line\">            <span class=\"keyword\">int</span> top = preTop + params.topMargin;</div><div class=\"line\">            <span class=\"keyword\">int</span> right = left + child.getMeasuredWidth();</div><div class=\"line\">            <span class=\"keyword\">int</span> bottom = top + child.getMeasuredHeight();</div><div class=\"line\">            <span class=\"comment\">//&#x4E3A;&#x5B50;view&#x5E03;&#x5C40;  </span></div><div class=\"line\">            child.layout(left, top, right, bottom);</div><div class=\"line\">            <span class=\"comment\">//&#x8BA1;&#x7B97;&#x5E03;&#x5C40;&#x7ED3;&#x675F;&#x540E;&#xFF0C;preLeft&#x7684;&#x503C;  </span></div><div class=\"line\">            preLeft += params.leftMargin + child.getMeasuredWidth() + params.rightMargin;</div><div class=\"line\"></div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">    }  }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x5E03;&#x5C40;&#x4E2D;&#x7528;&#x8FD9;&#x4E2A;radiogroup&#x66FF;&#x4EE3;&#x539F;&#x751F;&#x7684;&#x65E2;&#x53EF;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x4E0D;&#x53D8;</p>\n<h3 id=\"2-&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\"><a href=\"#2-&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"2.&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\"></a>2.&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8FC7;&#x6EE4;&#x7684;popup</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String primaryUrl = <span class=\"string\">&quot;www/js/primary_class_phase.json&quot;</span>;<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String juniorUrl = <span class=\"string\">&quot;www/js/junior_class_phase.json&quot;</span>;<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String seniorUrl = <span class=\"string\">&quot;www/js/senior_class_phase.json&quot;</span>;<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx phaseRadio;<span class=\"comment\">//&#x5B66;&#x6BB5;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx gradeRadio;<span class=\"comment\">//&#x5E74;&#x7EA7;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx subjectRadio;<span class=\"comment\">//&#x79D1;&#x76EE;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String[] phaseCode={<span class=\"string\">&quot;2&quot;</span>,<span class=\"string\">&quot;3&quot;</span>,<span class=\"string\">&quot;4&quot;</span>};</div><div class=\"line\">    <span class=\"keyword\">private</span> String[] gradeCode={<span class=\"string\">&quot;1&quot;</span>,<span class=\"string\">&quot;2&quot;</span>,<span class=\"string\">&quot;3&quot;</span>,<span class=\"string\">&quot;5&quot;</span>,<span class=\"string\">&quot;7&quot;</span>,<span class=\"string\">&quot;9&quot;</span>};</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; subjectCode=<span class=\"keyword\">new</span> ArrayList&lt;&gt;();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showPopupWindowFilter</span><span class=\"params\">(View view)</span> </span>{</div><div class=\"line\">        <span class=\"comment\">// &#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x4F5C;&#x4E3A;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;</span></div><div class=\"line\">        View contentView = LayoutInflater.from(<span class=\"keyword\">this</span>).inflate(R.layout.openclass_filter_popup, <span class=\"keyword\">null</span>);</div><div class=\"line\">        phaseRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_phase);</div><div class=\"line\">        gradeRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_grade);</div><div class=\"line\">        subjectRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_subject);</div><div class=\"line\">        phaseRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">        gradeRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">        subjectRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\"></div><div class=\"line\">        RadioGroup.OnCheckedChangeListener popupRadioCheckListener = <span class=\"keyword\">new</span> RadioGroup.OnCheckedChangeListener() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCheckedChanged</span><span class=\"params\">(RadioGroup group, <span class=\"keyword\">int</span> checkedId)</span> </span>{</div><div class=\"line\">                <span class=\"keyword\">switch</span> (group.getId()){</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_phase:<span class=\"comment\">//&#x5B66;&#x6BB5;</span></div><div class=\"line\">                        phaseId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        mGradeId = <span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                        subjectId = <span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                        <span class=\"keyword\">int</span> pid = Integer.parseInt(phaseId);</div><div class=\"line\">                        createSubjectRadio(pid,subjectRadio);</div><div class=\"line\">                        createGradeRadio(pid,gradeRadio);</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_grade:<span class=\"comment\">//&#x5E74;&#x7EA7;</span></div><div class=\"line\">                        mGradeId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_subject:<span class=\"comment\">//&#x79D1;&#x76EE;</span></div><div class=\"line\">                        subjectId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(TAG,<span class=\"string\">&quot;phaseId:&quot;</span>+phaseId+<span class=\"string\">&quot;mGradeId:&quot;</span>+mGradeId+<span class=\"string\">&quot;subjectId:&quot;</span>+subjectId);</div><div class=\"line\">                <span class=\"keyword\">if</span>(!StringUtils.isEmpty(phaseId)&amp;&amp;!StringUtils.isEmpty(mGradeId)&amp;&amp;!StringUtils.isEmpty(subjectId)){</div><div class=\"line\">                    <span class=\"keyword\">int</span> currentItem = mViewPager.getCurrentItem();</div><div class=\"line\">                    Fragment fragment = adapter.getPage(currentItem);</div><div class=\"line\">                    <span class=\"keyword\">if</span> (fragment <span class=\"keyword\">instanceof</span> OpenclassUpdateFilter) {</div><div class=\"line\">                        OpenclassUpdateFilter openclassUpdateFilter = (OpenclassUpdateFilter)fragment ;</div><div class=\"line\">                        openclassUpdateFilter.updateData(phaseId,mGradeId,subjectId);</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\"></div><div class=\"line\">        phaseRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        gradeRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        subjectRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        createPhaseRadio(phaseRadio);</div><div class=\"line\">        createGradeRadio(<span class=\"number\">2</span>,gradeRadio);<span class=\"comment\">//&#x521B;&#x5EFA;&#x5E74;&#x7EA7;&#x5355;&#x9009;&#xFF0C;&#x6839;&#x636E;&#x5B66;&#x6BB5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\">        createSubjectRadio(<span class=\"number\">2</span>,subjectRadio);<span class=\"comment\">//&#x521B;&#x5EFA;&#x79D1;&#x76EE;&#x5355;&#x9009;&#xFF0C;&#x6839;&#x636E;&#x5B66;&#x6BB5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\"></div><div class=\"line\">        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">int</span> width = (<span class=\"keyword\">int</span>) ((wm.getDefaultDisplay().getWidth()) * <span class=\"number\">0.35</span>);<span class=\"comment\">//&#x83B7;&#x53D6;&#x5C4F;&#x5E55;&#x5BBD;&#x5EA6;&#x7684;0.35&#x500D;&#x8D4B;&#x7ED9;&#x8BE5;popupWindow</span></div><div class=\"line\">        <span class=\"keyword\">final</span> PopupWindow popupWindow = <span class=\"keyword\">new</span> PopupWindow(contentView,</div><div class=\"line\">                LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, <span class=\"keyword\">true</span>);</div><div class=\"line\">        popupWindow.setAnimationStyle(R.style.popwin_anim_style);</div><div class=\"line\"></div><div class=\"line\">        popupWindow.setTouchable(<span class=\"keyword\">true</span>);</div><div class=\"line\"></div><div class=\"line\">        popupWindow.setTouchInterceptor(<span class=\"keyword\">new</span> View.OnTouchListener() {</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouch</span><span class=\"params\">(View v, MotionEvent event)</span> </span>{</div><div class=\"line\"></div><div class=\"line\">                Log.i(<span class=\"string\">&quot;mengdd&quot;</span>, <span class=\"string\">&quot;onTouch : &quot;</span>);</div><div class=\"line\"></div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">                <span class=\"comment\">// &#x8FD9;&#x91CC;&#x5982;&#x679C;&#x8FD4;&#x56DE;true&#x7684;&#x8BDD;&#xFF0C;touch&#x4E8B;&#x4EF6;&#x5C06;&#x88AB;&#x62E6;&#x622A;</span></div><div class=\"line\">                <span class=\"comment\">// &#x62E6;&#x622A;&#x540E; PopupWindow&#x7684;onTouchEvent&#x4E0D;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x70B9;&#x51FB;&#x5916;&#x90E8;&#x533A;&#x57DF;&#x65E0;&#x6CD5;dismiss</span></div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// &#x5982;&#x679C;&#x4E0D;&#x8BBE;&#x7F6E;PopupWindow&#x7684;&#x80CC;&#x666F;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x70B9;&#x51FB;&#x5916;&#x90E8;&#x533A;&#x57DF;&#x8FD8;&#x662F;Back&#x952E;&#x90FD;&#x65E0;&#x6CD5;dismiss&#x5F39;&#x6846;</span></div><div class=\"line\">        <span class=\"comment\">// &#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x91CC;&#x662F;API&#x7684;&#x4E00;&#x4E2A;bug</span></div><div class=\"line\">        popupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(getResources().getColor(R.color.transparent)));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// &#x8BBE;&#x7F6E;&#x597D;&#x53C2;&#x6570;&#x4E4B;&#x540E;&#x518D;show</span></div><div class=\"line\">        popupWindow.showAsDropDown(view);</div><div class=\"line\"><span class=\"comment\">//        popupWindow.showAtLocation(view, Gravity.RIGHT | Gravity.TOP, ScreenUtil.dip2px(this, 8), ScreenUtil.dip2px(this, 70));</span></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createPhaseRadio</span><span class=\"params\">(RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        RadioButton tempButton1 = getBaseRadioButton();</div><div class=\"line\">        tempButton1.setText(<span class=\"string\">&quot;&#x5C0F;&#x5B66;&quot;</span>);</div><div class=\"line\">        tempButton1.setTag(phaseCode[<span class=\"number\">0</span>]);</div><div class=\"line\"></div><div class=\"line\">        radioGroup.addView(tempButton1, getbaseLayoutParams());</div><div class=\"line\">        RadioButton tempButton2 = getBaseRadioButton();</div><div class=\"line\">        tempButton2.setText(<span class=\"string\">&quot;&#x521D;&#x4E2D;&quot;</span>);</div><div class=\"line\">        tempButton2.setTag(phaseCode[<span class=\"number\">1</span>]);</div><div class=\"line\">        radioGroup.addView(tempButton2, getbaseLayoutParams());</div><div class=\"line\">        RadioButton tempButton3 = getBaseRadioButton();</div><div class=\"line\">        tempButton3.setText(<span class=\"string\">&quot;&#x9AD8;&#x4E2D;&quot;</span>);</div><div class=\"line\">        tempButton3.setTag(phaseCode[<span class=\"number\">2</span>]);</div><div class=\"line\">        radioGroup.addView(tempButton3, getbaseLayoutParams());</div><div class=\"line\"></div><div class=\"line\">        tempButton1.setChecked(<span class=\"keyword\">true</span>);<span class=\"comment\">//&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\">        phaseId = <span class=\"string\">&quot;2&quot;</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createGradeRadio</span><span class=\"params\">(<span class=\"keyword\">int</span> phase,RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        radioGroup.removeAllViews();</div><div class=\"line\">        <span class=\"keyword\">switch</span> (phase){</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</div><div class=\"line\">                RadioButton tempButton1 = getBaseRadioButton();</div><div class=\"line\">                tempButton1.setText(<span class=\"string\">&quot;&#x4E00;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton1.setTag(gradeCode[<span class=\"number\">0</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton1, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton2 = getBaseRadioButton();</div><div class=\"line\">                tempButton2.setText(<span class=\"string\">&quot;&#x4E8C;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton2.setTag(gradeCode[<span class=\"number\">1</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton2, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton3 = getBaseRadioButton();</div><div class=\"line\">                tempButton3.setText(<span class=\"string\">&quot;&#x4E09;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton3.setTag(gradeCode[<span class=\"number\">2</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton3, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton4 = getBaseRadioButton();</div><div class=\"line\">                tempButton4.setText(<span class=\"string\">&quot;&#x56DB;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton4.setTag(gradeCode[<span class=\"number\">3</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton4, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton5 = getBaseRadioButton();</div><div class=\"line\">                tempButton5.setText(<span class=\"string\">&quot;&#x4E94;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton5.setTag(gradeCode[<span class=\"number\">4</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton5, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton6 = getBaseRadioButton();</div><div class=\"line\">                tempButton6.setText(<span class=\"string\">&quot;&#x516D;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton6.setTag(gradeCode[<span class=\"number\">5</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton6, getbaseLayoutParams());</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</div><div class=\"line\">                RadioButton tempButton7 = getBaseRadioButton();</div><div class=\"line\">                tempButton7.setText(<span class=\"string\">&quot;&#x4E00;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton7.setTag(gradeCode[<span class=\"number\">0</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton7, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton8 = getBaseRadioButton();</div><div class=\"line\">                tempButton8.setText(<span class=\"string\">&quot;&#x4E8C;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton8.setTag(gradeCode[<span class=\"number\">1</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton8, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton9 = getBaseRadioButton();</div><div class=\"line\">                tempButton9.setText(<span class=\"string\">&quot;&#x4E09;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton9.setTag(gradeCode[<span class=\"number\">2</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton9, getbaseLayoutParams());</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createSubjectRadio</span><span class=\"params\">(<span class=\"keyword\">final</span> <span class=\"keyword\">int</span> phase, <span class=\"keyword\">final</span> RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        dialogHelper.showProgressDialog(<span class=\"string\">&quot;&#x52A0;&#x8F7D;&#x4E2D;...&quot;</span>);</div><div class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                String jsonStr=<span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                <span class=\"keyword\">switch</span> (phase){</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,primaryUrl);<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,juniorUrl);<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,seniorUrl);<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">                <span class=\"keyword\">final</span> List&lt;Map&lt;String, String&gt;&gt; data = AppJsonFileReader.setListData(jsonStr);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//                    list.addAll(mCources);</span></div><div class=\"line\">                runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        radioGroup.removeAllViews();</div><div class=\"line\">                        subjectCode.clear();</div><div class=\"line\">                        radioGroup.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">                        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i&lt;data.size();i++){</div><div class=\"line\">                            RadioButton tempButton = getBaseRadioButton();</div><div class=\"line\">                            tempButton.setText(data.get(i).get(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                            tempButton.setTag(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                            radioGroup.addView(tempButton, getbaseLayoutParams());</div><div class=\"line\">                            subjectCode.add(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                        }</div><div class=\"line\">                        dialogHelper.dismissProgressDialog();</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> RadioButton <span class=\"title\">getBaseRadioButton</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        RadioButton tempButton = <span class=\"keyword\">new</span> RadioButton(<span class=\"keyword\">this</span>);</div><div class=\"line\"><span class=\"comment\">//                        tempButton.setTextSize(ScreenUtil.dip2px(context, 5));</span></div><div class=\"line\">        tempButton.setTextSize(TypedValue.COMPLEX_UNIT_SP,<span class=\"number\">16</span>);</div><div class=\"line\">        tempButton.setTextColor(getResources().getColorStateList(R.color.filter_phase_text_selecter));</div><div class=\"line\">        tempButton.setButtonDrawable(getResources().getDrawable(android.R.color.transparent));</div><div class=\"line\"><span class=\"comment\">//        tempButton.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        tempButton.setBackgroundResource(R.drawable.filter_phase_selecter);</div><div class=\"line\"><span class=\"comment\">//        tempButton.setCompoundDrawablePadding(ScreenUtil.dip2px(getActivity(), 10));</span></div><div class=\"line\"><span class=\"comment\">//        tempButton.setPadding(20, 20, 20, 20);                 // &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x8DDD;&#x79BB;&#x6309;&#x94AE;&#x56DB;&#x5468;&#x7684;&#x8DDD;&#x79BB;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        layoutParams.weight =0.3f;</span></div><div class=\"line\"><span class=\"comment\">//        tempButton.setLayoutParams(layoutParams);</span></div><div class=\"line\">        <span class=\"keyword\">return</span> tempButton;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroup.<span class=\"function\">LayoutParams <span class=\"title\">getbaseLayoutParams</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        RadioGroup.LayoutParams layoutParams = <span class=\"keyword\">new</span> RadioGroup.LayoutParams(RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);</div><div class=\"line\">        layoutParams.setMargins(<span class=\"number\">15</span>,<span class=\"number\">15</span>,<span class=\"number\">15</span>,<span class=\"number\">15</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> layoutParams;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x52A8;&#x6001;&#x521B;&#x5EFA;radiobutton&#x7684;&#x5730;&#x65B9;&#x7EA0;&#x7ED3;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x8BBE;&#x7F6E;margin&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x8981;&#x7528;RadioGroup.LayoutParams&#xFF0C;&#x5728;stackoverflow&#x4E0A;&#x627E;&#x5230;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x3002;</p>\n<p>&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x8FC7;&#x6EE4;&#x6570;&#x636E;&#x5199;&#x7684;&#x662F;&#x914D;&#x7F6E;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D8;&#x7684;&#x7684;&#x5B66;&#x6BB5;&#x548C;&#x5E74;&#x7EA7;&#x5C31;&#x76F4;&#x63A5;&#x5199;&#x6B7B;&#x4E86;&#xFF0C;&#x79D1;&#x76EE;&#x5199;&#x7684;json&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x52A8;&#x6001;&#x8BFB;&#x53D6;&#x3002;</p>\n<p>popup&#x7684;xml<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    xmlns:student=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">    android:id=&quot;@id/openclass_filter&quot;</div><div class=\"line\">    android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">    android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">    android:background=&quot;@color/white&quot;</div><div class=\"line\">    android:orientation=&quot;vertical&quot;&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_gravity=&quot;center_vertical&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_phase&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_phase&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">            android:id=&quot;@+id/openclass_radio_phase&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_phase&quot;&gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;1dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;8dp&quot;</div><div class=\"line\">        android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">        android:background=&quot;@color/filter_radio_line&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_grade&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_grade&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">            android:id=&quot;@+id/openclass_radio_grade&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_grade&quot;&gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;1dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;8dp&quot;</div><div class=\"line\">        android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">        android:background=&quot;@color/filter_radio_line&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_subject&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_subject&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;ScrollView</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_subject&quot;</div><div class=\"line\">            android:fillViewport=&quot;true&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">            &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">                android:id=&quot;@+id/openclass_radio_subject&quot;</div><div class=\"line\">                android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">                android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">                &gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">        &lt;/ScrollView&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\"><a href=\"#3-&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\" class=\"headerlink\" title=\"3.&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\"></a>3.&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;</h3><h3 id=\"&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\"><a href=\"#&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\"></a>&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;</h3><p>&#x4E0B;&#x9762;&#x9644;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x8BE6;&#x7EC6;&#x5199;&#x5199;&#x5404;&#x79CD;&#x52A8;&#x753B;</p>\n<p>style:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style name=&quot;popwin_anim_style&quot;&gt;</div><div class=\"line\">        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@anim/popup_show_anim&lt;/item&gt;</div><div class=\"line\">        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@anim/popup_hide_anim&lt;/item&gt;</div><div class=\"line\">    &lt;/style&gt;</div></pre></td></tr></table></figure></p>\n<p>popup_show_anim:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;scale</div><div class=\"line\">        android:fromXScale=&quot;1.0&quot;</div><div class=\"line\">        android:toXScale=&quot;1.0&quot;</div><div class=\"line\">        android:fromYScale=&quot;0.0&quot;</div><div class=\"line\">        android:toYScale=&quot;1.0&quot;</div><div class=\"line\">        android:pivotX=&quot;100%&quot;</div><div class=\"line\">        android:pivotY=&quot;0&quot;</div><div class=\"line\">        android:duration=&quot;300&quot; /&gt;</div><div class=\"line\">&lt;/set&gt;</div></pre></td></tr></table></figure></p>\n<p>popup_hide_anim:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;scale</div><div class=\"line\">        android:fromXScale=&quot;1.0&quot;</div><div class=\"line\">        android:toXScale=&quot;1.0&quot;</div><div class=\"line\">        android:fromYScale=&quot;1.0&quot;</div><div class=\"line\">        android:toYScale=&quot;0.0&quot;</div><div class=\"line\">        android:pivotX=&quot;100%&quot;</div><div class=\"line\">        android:pivotY=&quot;0&quot;</div><div class=\"line\">        android:duration=&quot;300&quot; /&gt;</div><div class=\"line\">&lt;/set&gt;</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<p>&#x9879;&#x76EE;&#x4E0A;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x7B5B;&#x9009;&#x7684;&#xFF0C;&#x5148;&#x770B;&#x770B;&#x6548;&#x679C;&#x56FE;<br><img src=\"/2016/08/16/&#x4E3A;&#x8FC7;&#x6EE4;&#x52A8;&#x6001;&#x52A0;&#x5165;&#x5355;&#x9009;&#x6309;&#x94AE;/1.gif\" alt=\"1\"></p>\n<p>&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x636E;&#x90FD;&#x662F;&#x52A8;&#x6001;&#x5199;&#x5165;&#x7684;&#xFF0C;&#x5F39;&#x51FA;&#x7684;&#x7684;&#x662F;popupwindow&#xFF0C;&#x539F;&#x672C;&#x662F;&#x4FA7;&#x6ED1;&#x7684;&#x62BD;&#x5C49;&#x5E03;&#x5C40;&#xFF0C;&#x9886;&#x5BFC;&#x8981;&#x6539;&#x6210;&#x8FD9;&#x6837;&#x5B50;&#xFF0C;&#x53EA;&#x597D;&#x6539;&#x4E86;&#x3002;</p>\n<h3 id=\"1-Android-Radiogroup&#x7684;&#x5751;\"><a href=\"#1-Android-Radiogroup&#x7684;&#x5751;\" class=\"headerlink\" title=\"1.Android Radiogroup&#x7684;&#x5751;\"></a>1.Android Radiogroup&#x7684;&#x5751;</h3><p>Android&#x539F;&#x751F;&#x7684;Radiogroup&#x662F;&#x4E0D;&#x652F;&#x6301;&#x6362;&#x884C;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8981;&#x4E48;&#x4E00;&#x76F4;&#x7AD6;&#x7740;&#x8981;&#x4E48;&#x4E00;&#x76F4;&#x6A2A;&#x7740;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x4E24;&#x7EC4;radiogroup&#x8FD8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E92;&#x65A5;&#x7B97;&#x6CD5;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;<br>&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;radiogroup&#xFF0C;&#x7EE7;&#x627F;&#x7CFB;&#x7EDF;&#x7684;RadioGroup&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;LinearLayout&#xFF0C;&#x4E0D;&#x8FC7;&#x663E;&#x7136;&#x7B2C;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.RadioGroup;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * &#x91CD;&#x65B0;&#x5BF9;RadioGroup&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#xFF0C;&#x53EF;&#x4EE5;&#x6298;&#x884C; </div><div class=\"line\"> * &#x9ED8;&#x8BA4;&#x6C34;&#x5E73;&#x5F00;&#x59CB;&#x6392;&#x5E03; </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RadioGroupEx</span> <span class=\"keyword\">extends</span> <span class=\"title\">RadioGroup</span> </span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">&quot;RadioGroupEx&quot;</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RadioGroupEx</span><span class=\"params\">(Context context)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RadioGroupEx</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x8C03;&#x7528;ViewGroup&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6D4B;&#x91CF;&#x5B50;view  </span></div><div class=\"line\">        measureChildren(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x6700;&#x5927;&#x7684;&#x5BBD;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x7D2F;&#x8BA1;&#x7684;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> totalHeight = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x5F53;&#x524D;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x7D2F;&#x8BA1;&#x884C;&#x5BBD;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> lineWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x5F53;&#x524D;&#x8FD9;&#x884C;&#x7684;&#x6700;&#x5927;&#x884C;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxLineHeight = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"comment\">//&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6362;&#x884C;&#x524D;&#x7684;&#x884C;&#x5BBD;&#x548C;&#x884C;&#x9AD8;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> oldHeight;</div><div class=\"line\">        <span class=\"keyword\">int</span> oldWidth;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> count = getChildCount();</div><div class=\"line\">        <span class=\"comment\">//&#x5047;&#x8BBE; widthMode&#x548C;heightMode&#x90FD;&#x662F;AT_MOST  </span></div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">            <span class=\"comment\">//&#x5F97;&#x5230;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;  </span></div><div class=\"line\">            oldHeight = maxLineHeight;</div><div class=\"line\">            <span class=\"comment\">//&#x5F53;&#x524D;&#x6700;&#x5927;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">            oldWidth = maxWidth;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">int</span> deltaX = child.getMeasuredWidth() + params.leftMargin + params.rightMargin;</div><div class=\"line\">            <span class=\"keyword\">if</span> (lineWidth + deltaX + getPaddingLeft() + getPaddingRight() &gt; widthSize) {<span class=\"comment\">//&#x5982;&#x679C;&#x6298;&#x884C;,height&#x589E;&#x52A0;  </span></div><div class=\"line\">                <span class=\"comment\">//&#x548C;&#x76EE;&#x524D;&#x6700;&#x5927;&#x7684;&#x5BBD;&#x5EA6;&#x6BD4;&#x8F83;,&#x5F97;&#x5230;&#x6700;&#x5BBD;&#x3002;&#x4E0D;&#x80FD;&#x52A0;&#x4E0A;&#x5F53;&#x524D;&#x7684;child&#x7684;&#x5BBD;,&#x6240;&#x4EE5;&#x7528;&#x7684;&#x662F;oldWidth  </span></div><div class=\"line\">                maxWidth = Math.max(lineWidth, oldWidth);</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">                lineWidth = deltaX;</div><div class=\"line\">                <span class=\"comment\">//&#x7D2F;&#x52A0;&#x9AD8;&#x5EA6;  </span></div><div class=\"line\">                totalHeight += oldHeight;</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;&#x884C;&#x9AD8;,&#x5F53;&#x524D;&#x8FD9;&#x4E2A;View&#xFF0C;&#x5C5E;&#x4E8E;&#x4E0B;&#x4E00;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x5F53;&#x524D;&#x6700;&#x5927;&#x884C;&#x9AD8;&#x4E3A;&#x8FD9;&#x4E2A;child&#x7684;&#x9AD8;&#x5EA6;&#x52A0;&#x4E0A;margin  </span></div><div class=\"line\">                maxLineHeight = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">                Log.v(TAG, <span class=\"string\">&quot;maxHeight:&quot;</span> + totalHeight + <span class=\"string\">&quot;---&quot;</span> + <span class=\"string\">&quot;maxWidth:&quot;</span> + maxWidth);</div><div class=\"line\"></div><div class=\"line\">            } <span class=\"keyword\">else</span> {</div><div class=\"line\">                <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;&#xFF0C;&#x7D2F;&#x52A0;&#x5BBD;&#x5EA6;  </span></div><div class=\"line\">                lineWidth += deltaX;</div><div class=\"line\">                <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;&#xFF0C;&#x8BA1;&#x7B97;&#x884C;&#x6700;&#x9AD8;  </span></div><div class=\"line\">                <span class=\"keyword\">int</span> deltaY = child.getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">                maxLineHeight = Math.max(maxLineHeight, deltaY);</div><div class=\"line\">            }</div><div class=\"line\">            <span class=\"keyword\">if</span> (i == count - <span class=\"number\">1</span>) {</div><div class=\"line\">                <span class=\"comment\">//&#x524D;&#x9762;&#x6CA1;&#x6709;&#x52A0;&#x4E0A;&#x4E0B;&#x4E00;&#x884C;&#x7684;&#x641E;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6700;&#x540E;&#x4E00;&#x884C;&#xFF0C;&#x8FD8;&#x8981;&#x518D;&#x53E0;&#x52A0;&#x4E0A;&#x6700;&#x540E;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;&#x7684;&#x503C;  </span></div><div class=\"line\">                totalHeight += maxLineHeight;</div><div class=\"line\">                <span class=\"comment\">//&#x8BA1;&#x7B97;&#x6700;&#x540E;&#x4E00;&#x884C;&#x548C;&#x524D;&#x9762;&#x7684;&#x6700;&#x5BBD;&#x7684;&#x4E00;&#x884C;&#x6BD4;&#x8F83;  </span></div><div class=\"line\">                maxWidth = Math.max(lineWidth, oldWidth);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x52A0;&#x4E0A;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x7684;padding&#x503C;  </span></div><div class=\"line\">        maxWidth += getPaddingLeft() + getPaddingRight();</div><div class=\"line\">        totalHeight += getPaddingTop() + getPaddingBottom();</div><div class=\"line\">        setMeasuredDimension(widthMode == MeasureSpec.EXACTLY ? widthSize : maxWidth,</div><div class=\"line\">                heightMode == MeasureSpec.EXACTLY ? heightSize : totalHeight);</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> t, <span class=\"keyword\">int</span> r, <span class=\"keyword\">int</span> b)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> count = getChildCount();</div><div class=\"line\">        <span class=\"comment\">//pre&#x4E3A;&#x524D;&#x9762;&#x6240;&#x6709;&#x7684;child&#x7684;&#x76F8;&#x52A0;&#x540E;&#x7684;&#x4F4D;&#x7F6E;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> preLeft = getPaddingLeft();</div><div class=\"line\">        <span class=\"keyword\">int</span> preTop = getPaddingTop();</div><div class=\"line\">        <span class=\"comment\">//&#x8BB0;&#x5F55;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x6700;&#x9AD8;&#x503C;  </span></div><div class=\"line\">        <span class=\"keyword\">int</span> maxHeight = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; count; i++) {</div><div class=\"line\">            View child = getChildAt(i);</div><div class=\"line\">            MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\">            <span class=\"comment\">//r-l&#x4E3A;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x7684;&#x5BBD;&#x5EA6;&#x3002;&#x5982;&#x679C;&#x5B50;view&#x7684;&#x7D2F;&#x79EF;&#x5BBD;&#x5EA6;&#x5927;&#x4E8E;&#x5BB9;&#x5668;&#x5BBD;&#x5EA6;&#xFF0C;&#x5C31;&#x6362;&#x884C;&#x3002;  </span></div><div class=\"line\">            <span class=\"keyword\">if</span> (preLeft + params.leftMargin + child.getMeasuredWidth() + params.rightMargin + getPaddingRight() &gt; (r - l)) {</div><div class=\"line\">                <span class=\"comment\">//&#x91CD;&#x7F6E;  </span></div><div class=\"line\">                preLeft = getPaddingLeft();</div><div class=\"line\">                <span class=\"comment\">//&#x8981;&#x9009;&#x62E9;child&#x7684;height&#x6700;&#x5927;&#x7684;&#x4F5C;&#x4E3A;&#x8BBE;&#x7F6E;  </span></div><div class=\"line\">                preTop = preTop + maxHeight;</div><div class=\"line\">                maxHeight = getChildAt(i).getMeasuredHeight() + params.topMargin + params.bottomMargin;</div><div class=\"line\">            } <span class=\"keyword\">else</span> { <span class=\"comment\">//&#x4E0D;&#x6362;&#x884C;,&#x8BA1;&#x7B97;&#x6700;&#x5927;&#x9AD8;&#x5EA6;  </span></div><div class=\"line\">                maxHeight = Math.max(maxHeight, child.getMeasuredHeight() + params.topMargin + params.bottomMargin);</div><div class=\"line\">            }</div><div class=\"line\">            <span class=\"comment\">//left&#x5750;&#x6807;  </span></div><div class=\"line\">            <span class=\"keyword\">int</span> left = preLeft + params.leftMargin;</div><div class=\"line\">            <span class=\"comment\">//top&#x5750;&#x6807;  </span></div><div class=\"line\">            <span class=\"keyword\">int</span> top = preTop + params.topMargin;</div><div class=\"line\">            <span class=\"keyword\">int</span> right = left + child.getMeasuredWidth();</div><div class=\"line\">            <span class=\"keyword\">int</span> bottom = top + child.getMeasuredHeight();</div><div class=\"line\">            <span class=\"comment\">//&#x4E3A;&#x5B50;view&#x5E03;&#x5C40;  </span></div><div class=\"line\">            child.layout(left, top, right, bottom);</div><div class=\"line\">            <span class=\"comment\">//&#x8BA1;&#x7B97;&#x5E03;&#x5C40;&#x7ED3;&#x675F;&#x540E;&#xFF0C;preLeft&#x7684;&#x503C;  </span></div><div class=\"line\">            preLeft += params.leftMargin + child.getMeasuredWidth() + params.rightMargin;</div><div class=\"line\"></div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">    }  }</div></pre></td></tr></table></figure>\n<p>&#x5728;&#x5E03;&#x5C40;&#x4E2D;&#x7528;&#x8FD9;&#x4E2A;radiogroup&#x66FF;&#x4EE3;&#x539F;&#x751F;&#x7684;&#x65E2;&#x53EF;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x4E0D;&#x53D8;</p>\n<h3 id=\"2-&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\"><a href=\"#2-&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"2.&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;\"></a>2.&#x5728;activity&#x4E2D;&#x52A0;&#x5165;popup&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x6DFB;&#x52A0;radiobutton&#x7684;&#x4EE3;&#x7801;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8FC7;&#x6EE4;&#x7684;popup</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String primaryUrl = <span class=\"string\">&quot;www/js/primary_class_phase.json&quot;</span>;<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String juniorUrl = <span class=\"string\">&quot;www/js/junior_class_phase.json&quot;</span>;<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String seniorUrl = <span class=\"string\">&quot;www/js/senior_class_phase.json&quot;</span>;<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx phaseRadio;<span class=\"comment\">//&#x5B66;&#x6BB5;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx gradeRadio;<span class=\"comment\">//&#x5E74;&#x7EA7;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroupEx subjectRadio;<span class=\"comment\">//&#x79D1;&#x76EE;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String[] phaseCode={<span class=\"string\">&quot;2&quot;</span>,<span class=\"string\">&quot;3&quot;</span>,<span class=\"string\">&quot;4&quot;</span>};</div><div class=\"line\">    <span class=\"keyword\">private</span> String[] gradeCode={<span class=\"string\">&quot;1&quot;</span>,<span class=\"string\">&quot;2&quot;</span>,<span class=\"string\">&quot;3&quot;</span>,<span class=\"string\">&quot;5&quot;</span>,<span class=\"string\">&quot;7&quot;</span>,<span class=\"string\">&quot;9&quot;</span>};</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; subjectCode=<span class=\"keyword\">new</span> ArrayList&lt;&gt;();</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showPopupWindowFilter</span><span class=\"params\">(View view)</span> </span>{</div><div class=\"line\">        <span class=\"comment\">// &#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x4F5C;&#x4E3A;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;</span></div><div class=\"line\">        View contentView = LayoutInflater.from(<span class=\"keyword\">this</span>).inflate(R.layout.openclass_filter_popup, <span class=\"keyword\">null</span>);</div><div class=\"line\">        phaseRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_phase);</div><div class=\"line\">        gradeRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_grade);</div><div class=\"line\">        subjectRadio = (RadioGroupEx) contentView.findViewById(R.id.openclass_radio_subject);</div><div class=\"line\">        phaseRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">        gradeRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">        subjectRadio.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\"></div><div class=\"line\">        RadioGroup.OnCheckedChangeListener popupRadioCheckListener = <span class=\"keyword\">new</span> RadioGroup.OnCheckedChangeListener() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCheckedChanged</span><span class=\"params\">(RadioGroup group, <span class=\"keyword\">int</span> checkedId)</span> </span>{</div><div class=\"line\">                <span class=\"keyword\">switch</span> (group.getId()){</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_phase:<span class=\"comment\">//&#x5B66;&#x6BB5;</span></div><div class=\"line\">                        phaseId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        mGradeId = <span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                        subjectId = <span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                        <span class=\"keyword\">int</span> pid = Integer.parseInt(phaseId);</div><div class=\"line\">                        createSubjectRadio(pid,subjectRadio);</div><div class=\"line\">                        createGradeRadio(pid,gradeRadio);</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_grade:<span class=\"comment\">//&#x5E74;&#x7EA7;</span></div><div class=\"line\">                        mGradeId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> R.id.openclass_radio_subject:<span class=\"comment\">//&#x79D1;&#x76EE;</span></div><div class=\"line\">                        subjectId = (String)group.findViewById(checkedId).getTag();</div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                }</div><div class=\"line\">                Log.d(TAG,<span class=\"string\">&quot;phaseId:&quot;</span>+phaseId+<span class=\"string\">&quot;mGradeId:&quot;</span>+mGradeId+<span class=\"string\">&quot;subjectId:&quot;</span>+subjectId);</div><div class=\"line\">                <span class=\"keyword\">if</span>(!StringUtils.isEmpty(phaseId)&amp;&amp;!StringUtils.isEmpty(mGradeId)&amp;&amp;!StringUtils.isEmpty(subjectId)){</div><div class=\"line\">                    <span class=\"keyword\">int</span> currentItem = mViewPager.getCurrentItem();</div><div class=\"line\">                    Fragment fragment = adapter.getPage(currentItem);</div><div class=\"line\">                    <span class=\"keyword\">if</span> (fragment <span class=\"keyword\">instanceof</span> OpenclassUpdateFilter) {</div><div class=\"line\">                        OpenclassUpdateFilter openclassUpdateFilter = (OpenclassUpdateFilter)fragment ;</div><div class=\"line\">                        openclassUpdateFilter.updateData(phaseId,mGradeId,subjectId);</div><div class=\"line\">                    }</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\">            }</div><div class=\"line\">        };</div><div class=\"line\"></div><div class=\"line\">        phaseRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        gradeRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        subjectRadio.setOnCheckedChangeListener(popupRadioCheckListener);</div><div class=\"line\">        createPhaseRadio(phaseRadio);</div><div class=\"line\">        createGradeRadio(<span class=\"number\">2</span>,gradeRadio);<span class=\"comment\">//&#x521B;&#x5EFA;&#x5E74;&#x7EA7;&#x5355;&#x9009;&#xFF0C;&#x6839;&#x636E;&#x5B66;&#x6BB5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\">        createSubjectRadio(<span class=\"number\">2</span>,subjectRadio);<span class=\"comment\">//&#x521B;&#x5EFA;&#x79D1;&#x76EE;&#x5355;&#x9009;&#xFF0C;&#x6839;&#x636E;&#x5B66;&#x6BB5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\"></div><div class=\"line\">        WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);</div><div class=\"line\">        <span class=\"keyword\">int</span> width = (<span class=\"keyword\">int</span>) ((wm.getDefaultDisplay().getWidth()) * <span class=\"number\">0.35</span>);<span class=\"comment\">//&#x83B7;&#x53D6;&#x5C4F;&#x5E55;&#x5BBD;&#x5EA6;&#x7684;0.35&#x500D;&#x8D4B;&#x7ED9;&#x8BE5;popupWindow</span></div><div class=\"line\">        <span class=\"keyword\">final</span> PopupWindow popupWindow = <span class=\"keyword\">new</span> PopupWindow(contentView,</div><div class=\"line\">                LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, <span class=\"keyword\">true</span>);</div><div class=\"line\">        popupWindow.setAnimationStyle(R.style.popwin_anim_style);</div><div class=\"line\"></div><div class=\"line\">        popupWindow.setTouchable(<span class=\"keyword\">true</span>);</div><div class=\"line\"></div><div class=\"line\">        popupWindow.setTouchInterceptor(<span class=\"keyword\">new</span> View.OnTouchListener() {</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouch</span><span class=\"params\">(View v, MotionEvent event)</span> </span>{</div><div class=\"line\"></div><div class=\"line\">                Log.i(<span class=\"string\">&quot;mengdd&quot;</span>, <span class=\"string\">&quot;onTouch : &quot;</span>);</div><div class=\"line\"></div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">                <span class=\"comment\">// &#x8FD9;&#x91CC;&#x5982;&#x679C;&#x8FD4;&#x56DE;true&#x7684;&#x8BDD;&#xFF0C;touch&#x4E8B;&#x4EF6;&#x5C06;&#x88AB;&#x62E6;&#x622A;</span></div><div class=\"line\">                <span class=\"comment\">// &#x62E6;&#x622A;&#x540E; PopupWindow&#x7684;onTouchEvent&#x4E0D;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x70B9;&#x51FB;&#x5916;&#x90E8;&#x533A;&#x57DF;&#x65E0;&#x6CD5;dismiss</span></div><div class=\"line\">            }</div><div class=\"line\">        });</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// &#x5982;&#x679C;&#x4E0D;&#x8BBE;&#x7F6E;PopupWindow&#x7684;&#x80CC;&#x666F;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x70B9;&#x51FB;&#x5916;&#x90E8;&#x533A;&#x57DF;&#x8FD8;&#x662F;Back&#x952E;&#x90FD;&#x65E0;&#x6CD5;dismiss&#x5F39;&#x6846;</span></div><div class=\"line\">        <span class=\"comment\">// &#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x91CC;&#x662F;API&#x7684;&#x4E00;&#x4E2A;bug</span></div><div class=\"line\">        popupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(getResources().getColor(R.color.transparent)));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// &#x8BBE;&#x7F6E;&#x597D;&#x53C2;&#x6570;&#x4E4B;&#x540E;&#x518D;show</span></div><div class=\"line\">        popupWindow.showAsDropDown(view);</div><div class=\"line\"><span class=\"comment\">//        popupWindow.showAtLocation(view, Gravity.RIGHT | Gravity.TOP, ScreenUtil.dip2px(this, 8), ScreenUtil.dip2px(this, 70));</span></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createPhaseRadio</span><span class=\"params\">(RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        RadioButton tempButton1 = getBaseRadioButton();</div><div class=\"line\">        tempButton1.setText(<span class=\"string\">&quot;&#x5C0F;&#x5B66;&quot;</span>);</div><div class=\"line\">        tempButton1.setTag(phaseCode[<span class=\"number\">0</span>]);</div><div class=\"line\"></div><div class=\"line\">        radioGroup.addView(tempButton1, getbaseLayoutParams());</div><div class=\"line\">        RadioButton tempButton2 = getBaseRadioButton();</div><div class=\"line\">        tempButton2.setText(<span class=\"string\">&quot;&#x521D;&#x4E2D;&quot;</span>);</div><div class=\"line\">        tempButton2.setTag(phaseCode[<span class=\"number\">1</span>]);</div><div class=\"line\">        radioGroup.addView(tempButton2, getbaseLayoutParams());</div><div class=\"line\">        RadioButton tempButton3 = getBaseRadioButton();</div><div class=\"line\">        tempButton3.setText(<span class=\"string\">&quot;&#x9AD8;&#x4E2D;&quot;</span>);</div><div class=\"line\">        tempButton3.setTag(phaseCode[<span class=\"number\">2</span>]);</div><div class=\"line\">        radioGroup.addView(tempButton3, getbaseLayoutParams());</div><div class=\"line\"></div><div class=\"line\">        tempButton1.setChecked(<span class=\"keyword\">true</span>);<span class=\"comment\">//&#x9ED8;&#x8BA4;&#x5C0F;&#x5B66;</span></div><div class=\"line\">        phaseId = <span class=\"string\">&quot;2&quot;</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createGradeRadio</span><span class=\"params\">(<span class=\"keyword\">int</span> phase,RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        radioGroup.removeAllViews();</div><div class=\"line\">        <span class=\"keyword\">switch</span> (phase){</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</div><div class=\"line\">                RadioButton tempButton1 = getBaseRadioButton();</div><div class=\"line\">                tempButton1.setText(<span class=\"string\">&quot;&#x4E00;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton1.setTag(gradeCode[<span class=\"number\">0</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton1, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton2 = getBaseRadioButton();</div><div class=\"line\">                tempButton2.setText(<span class=\"string\">&quot;&#x4E8C;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton2.setTag(gradeCode[<span class=\"number\">1</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton2, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton3 = getBaseRadioButton();</div><div class=\"line\">                tempButton3.setText(<span class=\"string\">&quot;&#x4E09;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton3.setTag(gradeCode[<span class=\"number\">2</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton3, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton4 = getBaseRadioButton();</div><div class=\"line\">                tempButton4.setText(<span class=\"string\">&quot;&#x56DB;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton4.setTag(gradeCode[<span class=\"number\">3</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton4, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton5 = getBaseRadioButton();</div><div class=\"line\">                tempButton5.setText(<span class=\"string\">&quot;&#x4E94;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton5.setTag(gradeCode[<span class=\"number\">4</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton5, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton6 = getBaseRadioButton();</div><div class=\"line\">                tempButton6.setText(<span class=\"string\">&quot;&#x516D;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton6.setTag(gradeCode[<span class=\"number\">5</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton6, getbaseLayoutParams());</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</div><div class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</div><div class=\"line\">                RadioButton tempButton7 = getBaseRadioButton();</div><div class=\"line\">                tempButton7.setText(<span class=\"string\">&quot;&#x4E00;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton7.setTag(gradeCode[<span class=\"number\">0</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton7, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton8 = getBaseRadioButton();</div><div class=\"line\">                tempButton8.setText(<span class=\"string\">&quot;&#x4E8C;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton8.setTag(gradeCode[<span class=\"number\">1</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton8, getbaseLayoutParams());</div><div class=\"line\">                RadioButton tempButton9 = getBaseRadioButton();</div><div class=\"line\">                tempButton9.setText(<span class=\"string\">&quot;&#x4E09;&#x5E74;&#x7EA7;&quot;</span>);</div><div class=\"line\">                tempButton9.setTag(gradeCode[<span class=\"number\">2</span>]);</div><div class=\"line\">                radioGroup.addView(tempButton9, getbaseLayoutParams());</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">createSubjectRadio</span><span class=\"params\">(<span class=\"keyword\">final</span> <span class=\"keyword\">int</span> phase, <span class=\"keyword\">final</span> RadioGroup radioGroup)</span></span>{</div><div class=\"line\">        dialogHelper.showProgressDialog(<span class=\"string\">&quot;&#x52A0;&#x8F7D;&#x4E2D;...&quot;</span>);</div><div class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                String jsonStr=<span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                <span class=\"keyword\">switch</span> (phase){</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,primaryUrl);<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,juniorUrl);<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</div><div class=\"line\">                        jsonStr = AppJsonFileReader.getJson(OpenClassActivity.<span class=\"keyword\">this</span>,seniorUrl);<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\">                        <span class=\"keyword\">break</span>;</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">                <span class=\"keyword\">final</span> List&lt;Map&lt;String, String&gt;&gt; data = AppJsonFileReader.setListData(jsonStr);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//                    list.addAll(mCources);</span></div><div class=\"line\">                runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        radioGroup.removeAllViews();</div><div class=\"line\">                        subjectCode.clear();</div><div class=\"line\">                        radioGroup.setOrientation(LinearLayout.HORIZONTAL);</div><div class=\"line\">                        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i&lt;data.size();i++){</div><div class=\"line\">                            RadioButton tempButton = getBaseRadioButton();</div><div class=\"line\">                            tempButton.setText(data.get(i).get(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                            tempButton.setTag(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                            radioGroup.addView(tempButton, getbaseLayoutParams());</div><div class=\"line\">                            subjectCode.add(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                        }</div><div class=\"line\">                        dialogHelper.dismissProgressDialog();</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> RadioButton <span class=\"title\">getBaseRadioButton</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        RadioButton tempButton = <span class=\"keyword\">new</span> RadioButton(<span class=\"keyword\">this</span>);</div><div class=\"line\"><span class=\"comment\">//                        tempButton.setTextSize(ScreenUtil.dip2px(context, 5));</span></div><div class=\"line\">        tempButton.setTextSize(TypedValue.COMPLEX_UNIT_SP,<span class=\"number\">16</span>);</div><div class=\"line\">        tempButton.setTextColor(getResources().getColorStateList(R.color.filter_phase_text_selecter));</div><div class=\"line\">        tempButton.setButtonDrawable(getResources().getDrawable(android.R.color.transparent));</div><div class=\"line\"><span class=\"comment\">//        tempButton.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        tempButton.setBackgroundResource(R.drawable.filter_phase_selecter);</div><div class=\"line\"><span class=\"comment\">//        tempButton.setCompoundDrawablePadding(ScreenUtil.dip2px(getActivity(), 10));</span></div><div class=\"line\"><span class=\"comment\">//        tempButton.setPadding(20, 20, 20, 20);                 // &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x8DDD;&#x79BB;&#x6309;&#x94AE;&#x56DB;&#x5468;&#x7684;&#x8DDD;&#x79BB;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//        layoutParams.weight =0.3f;</span></div><div class=\"line\"><span class=\"comment\">//        tempButton.setLayoutParams(layoutParams);</span></div><div class=\"line\">        <span class=\"keyword\">return</span> tempButton;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> RadioGroup.<span class=\"function\">LayoutParams <span class=\"title\">getbaseLayoutParams</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        RadioGroup.LayoutParams layoutParams = <span class=\"keyword\">new</span> RadioGroup.LayoutParams(RadioGroup.LayoutParams.WRAP_CONTENT, RadioGroup.LayoutParams.WRAP_CONTENT);</div><div class=\"line\">        layoutParams.setMargins(<span class=\"number\">15</span>,<span class=\"number\">15</span>,<span class=\"number\">15</span>,<span class=\"number\">15</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> layoutParams;</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x52A8;&#x6001;&#x521B;&#x5EFA;radiobutton&#x7684;&#x5730;&#x65B9;&#x7EA0;&#x7ED3;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x8BBE;&#x7F6E;margin&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x8981;&#x6CE8;&#x610F;&#x8981;&#x7528;RadioGroup.LayoutParams&#xFF0C;&#x5728;stackoverflow&#x4E0A;&#x627E;&#x5230;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x3002;</p>\n<p>&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x8FC7;&#x6EE4;&#x6570;&#x636E;&#x5199;&#x7684;&#x662F;&#x914D;&#x7F6E;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D8;&#x7684;&#x7684;&#x5B66;&#x6BB5;&#x548C;&#x5E74;&#x7EA7;&#x5C31;&#x76F4;&#x63A5;&#x5199;&#x6B7B;&#x4E86;&#xFF0C;&#x79D1;&#x76EE;&#x5199;&#x7684;json&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x52A8;&#x6001;&#x8BFB;&#x53D6;&#x3002;</p>\n<p>popup&#x7684;xml<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    xmlns:student=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class=\"line\">    android:id=&quot;@id/openclass_filter&quot;</div><div class=\"line\">    android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">    android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">    android:background=&quot;@color/white&quot;</div><div class=\"line\">    android:orientation=&quot;vertical&quot;&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_gravity=&quot;center_vertical&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_phase&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_phase&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">            android:id=&quot;@+id/openclass_radio_phase&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_phase&quot;&gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;1dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;8dp&quot;</div><div class=\"line\">        android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">        android:background=&quot;@color/filter_radio_line&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_grade&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_grade&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">            android:id=&quot;@+id/openclass_radio_grade&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_grade&quot;&gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">        android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">        android:layout_height=&quot;1dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;8dp&quot;</div><div class=\"line\">        android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">        android:background=&quot;@color/filter_radio_line&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;RelativeLayout</div><div class=\"line\">        android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">        android:layout_marginBottom=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginLeft=&quot;15dp&quot;</div><div class=\"line\">        android:layout_marginTop=&quot;15dp&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;TextView</div><div class=\"line\">            android:id=&quot;@id/openclass_condition_subject&quot;</div><div class=\"line\">            android:layout_width=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_marginRight=&quot;8dp&quot;</div><div class=\"line\">            android:layout_marginTop=&quot;8dp&quot;</div><div class=\"line\">            android:text=&quot;@string/openclass_screening_subject&quot;</div><div class=\"line\">            android:textSize=&quot;20sp&quot; /&gt;</div><div class=\"line\"></div><div class=\"line\">        &lt;ScrollView</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">            android:layout_toRightOf=&quot;@id/openclass_condition_subject&quot;</div><div class=\"line\">            android:fillViewport=&quot;true&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">            &lt;com.tyky.edu.teacher.main.ui.RadioGroupEx</div><div class=\"line\">                android:id=&quot;@+id/openclass_radio_subject&quot;</div><div class=\"line\">                android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">                android:layout_height=&quot;wrap_content&quot;</div><div class=\"line\">                &gt;&lt;/com.tyky.edu.teacher.main.ui.RadioGroupEx&gt;</div><div class=\"line\">        &lt;/ScrollView&gt;</div><div class=\"line\">    &lt;/RelativeLayout&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\"><a href=\"#3-&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\" class=\"headerlink\" title=\"3.&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;\"></a>3.&#x76F4;&#x63A5;&#x5728;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x51FA;&#x8C03;&#x7528;showPopupWindowFilter&#x65E2;&#x53EF;</h3><h3 id=\"&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\"><a href=\"#&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;\"></a>&#x8FD9;&#x91CC;popup&#x5F39;&#x51FA;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x6298;&#x53E0;&#x52A8;&#x753B;</h3><p>&#x4E0B;&#x9762;&#x9644;&#x4E0A;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x8BE6;&#x7EC6;&#x5199;&#x5199;&#x5404;&#x79CD;&#x52A8;&#x753B;</p>\n<p>style:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;style name=&quot;popwin_anim_style&quot;&gt;</div><div class=\"line\">        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@anim/popup_show_anim&lt;/item&gt;</div><div class=\"line\">        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@anim/popup_hide_anim&lt;/item&gt;</div><div class=\"line\">    &lt;/style&gt;</div></pre></td></tr></table></figure></p>\n<p>popup_show_anim:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;scale</div><div class=\"line\">        android:fromXScale=&quot;1.0&quot;</div><div class=\"line\">        android:toXScale=&quot;1.0&quot;</div><div class=\"line\">        android:fromYScale=&quot;0.0&quot;</div><div class=\"line\">        android:toYScale=&quot;1.0&quot;</div><div class=\"line\">        android:pivotX=&quot;100%&quot;</div><div class=\"line\">        android:pivotY=&quot;0&quot;</div><div class=\"line\">        android:duration=&quot;300&quot; /&gt;</div><div class=\"line\">&lt;/set&gt;</div></pre></td></tr></table></figure></p>\n<p>popup_hide_anim:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\">    &lt;scale</div><div class=\"line\">        android:fromXScale=&quot;1.0&quot;</div><div class=\"line\">        android:toXScale=&quot;1.0&quot;</div><div class=\"line\">        android:fromYScale=&quot;1.0&quot;</div><div class=\"line\">        android:toYScale=&quot;0.0&quot;</div><div class=\"line\">        android:pivotX=&quot;100%&quot;</div><div class=\"line\">        android:pivotY=&quot;0&quot;</div><div class=\"line\">        android:duration=&quot;300&quot; /&gt;</div><div class=\"line\">&lt;/set&gt;</div></pre></td></tr></table></figure></p>\n"},{"title":"vector动画以及兼容sssss","date":"2016-10-06T08:32:01.000Z","_content":"\n### 之前讲过了用静态的Vector，这里讲一下使用动画，这里就直接使用支持包了\n#### 1.引用com.android.support:appcompat-v7:23.2.0以上的包\n#### 2.在build中defaultConfig{}里面写`vectorDrawables.useSupportLibrary = true`\n上面两步和使用静态vector要求一样\n下面开始就是使用动画的步骤\n#### 1.新建vector静态文件\n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"256dp\"\n    android:height=\"256dp\"\n    android:viewportHeight=\"70\"\n    android:viewportWidth=\"70\">\n    <path\n        android:name=\"heart1\"\n        android:pathData=\"...\"\n        android:strokeColor=\"#E91E63\"\n        android:strokeWidth=\"1\"\n        />\n    <path\n        android:name=\"heart2\"\n        android:pathData=\"...\"\n        android:strokeColor=\"#E91E63\"\n        android:strokeWidth=\"1\"\n        />\n\n    \n</vector>\n```\n\n#### 2.新建动画文件\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<objectAnimator\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"6000\"\n    android:propertyName=\"trimPathEnd\"\n    android:valueFrom=\"0\"\n    android:valueTo=\"1\"\n    android:valueType=\"floatType\"/>\n```\n\n#### 3.新建Animated-Vector图像\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<animated-vector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:drawable=\"@drawable/ic_android_black_24dp\">\n    <target\n        android:name=\"heart1\"\n        android:animation=\"@animator/path_animator\"/>\n    <target\n        android:name=\"heart2\"\n        android:animation=\"@animator/path_animator\"/>\n   \n\n</animated-vector>\n```\n\n#### 4.在布局文件引用Animated-Vector图像\n```java\n<android.support.v7.widget.AppCompatImageView\n        android:id=\"@+id/aaaa\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:srcCompat=\"@drawable/v_animation\"/>\n```\n\n#### 5.在代码中启动动画\n```java\nAppCompatImageView imageView = (AppCompatImageView)findViewById(R.id.aaaa);\nDrawable animation = imageView.getDrawable();\n        if (animation instanceof Animatable) {\n            ((Animatable) animation).start();\n        }\n```\n\n完整代码可以可以查看[github](https://github.com/dinomonster/VectorsTest \"github\")\nhttp://inloop.github.io/svg2android/\n附上两个图标库\n[iconfont](http://www.iconfont.cn/ \"iconfont\")\n[easyicon](http://www.easyicon.net/ \"easyicon\")\n\n还有[svg在线转vector](http://inloop.github.io/svg2android/ \"svg在线转vector\")","source":"_posts/vector动画以及兼容.md","raw":"---\ntitle: vector动画以及兼容sssss\ndate: 2016-10-06 16:32:01\ntags: Android\n---\n\n### 之前讲过了用静态的Vector，这里讲一下使用动画，这里就直接使用支持包了\n#### 1.引用com.android.support:appcompat-v7:23.2.0以上的包\n#### 2.在build中defaultConfig{}里面写`vectorDrawables.useSupportLibrary = true`\n上面两步和使用静态vector要求一样\n下面开始就是使用动画的步骤\n#### 1.新建vector静态文件\n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"256dp\"\n    android:height=\"256dp\"\n    android:viewportHeight=\"70\"\n    android:viewportWidth=\"70\">\n    <path\n        android:name=\"heart1\"\n        android:pathData=\"...\"\n        android:strokeColor=\"#E91E63\"\n        android:strokeWidth=\"1\"\n        />\n    <path\n        android:name=\"heart2\"\n        android:pathData=\"...\"\n        android:strokeColor=\"#E91E63\"\n        android:strokeWidth=\"1\"\n        />\n\n    \n</vector>\n```\n\n#### 2.新建动画文件\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<objectAnimator\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"6000\"\n    android:propertyName=\"trimPathEnd\"\n    android:valueFrom=\"0\"\n    android:valueTo=\"1\"\n    android:valueType=\"floatType\"/>\n```\n\n#### 3.新建Animated-Vector图像\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<animated-vector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:drawable=\"@drawable/ic_android_black_24dp\">\n    <target\n        android:name=\"heart1\"\n        android:animation=\"@animator/path_animator\"/>\n    <target\n        android:name=\"heart2\"\n        android:animation=\"@animator/path_animator\"/>\n   \n\n</animated-vector>\n```\n\n#### 4.在布局文件引用Animated-Vector图像\n```java\n<android.support.v7.widget.AppCompatImageView\n        android:id=\"@+id/aaaa\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:srcCompat=\"@drawable/v_animation\"/>\n```\n\n#### 5.在代码中启动动画\n```java\nAppCompatImageView imageView = (AppCompatImageView)findViewById(R.id.aaaa);\nDrawable animation = imageView.getDrawable();\n        if (animation instanceof Animatable) {\n            ((Animatable) animation).start();\n        }\n```\n\n完整代码可以可以查看[github](https://github.com/dinomonster/VectorsTest \"github\")\nhttp://inloop.github.io/svg2android/\n附上两个图标库\n[iconfont](http://www.iconfont.cn/ \"iconfont\")\n[easyicon](http://www.easyicon.net/ \"easyicon\")\n\n还有[svg在线转vector](http://inloop.github.io/svg2android/ \"svg在线转vector\")","slug":"vector动画以及兼容","published":1,"updated":"2016-10-10T10:09:19.132Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwh2000apkm8ez1nd3f1","content":"<h3 id=\"&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\"><a href=\"#&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\" class=\"headerlink\" title=\"&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\"></a>&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;</h3><h4 id=\"1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"><a href=\"#1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\" class=\"headerlink\" title=\"1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"></a>1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;</h4><h4 id=\"2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\"><a href=\"#2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\" class=\"headerlink\" title=\"2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;vectorDrawables.useSupportLibrary = true\"></a>2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;<code>vectorDrawables.useSupportLibrary = true</code></h4><p>&#x4E0A;&#x9762;&#x4E24;&#x6B65;&#x548C;&#x4F7F;&#x7528;&#x9759;&#x6001;vector&#x8981;&#x6C42;&#x4E00;&#x6837;<br>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#x7684;&#x6B65;&#x9AA4;</p>\n<h4 id=\"1-&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\"><a href=\"#1-&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"1.&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\"></a>1.&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    android:width=&quot;256dp&quot;</div><div class=\"line\">    android:height=&quot;256dp&quot;</div><div class=\"line\">    android:viewportHeight=&quot;70&quot;</div><div class=\"line\">    android:viewportWidth=&quot;70&quot;&gt;</div><div class=\"line\">    &lt;path</div><div class=\"line\">        android:name=&quot;heart1&quot;</div><div class=\"line\">        android:pathData=&quot;...&quot;</div><div class=\"line\">        android:strokeColor=&quot;#E91E63&quot;</div><div class=\"line\">        android:strokeWidth=&quot;1&quot;</div><div class=\"line\">        /&gt;</div><div class=\"line\">    &lt;path</div><div class=\"line\">        android:name=&quot;heart2&quot;</div><div class=\"line\">        android:pathData=&quot;...&quot;</div><div class=\"line\">        android:strokeColor=&quot;#E91E63&quot;</div><div class=\"line\">        android:strokeWidth=&quot;1&quot;</div><div class=\"line\">        /&gt;</div><div class=\"line\"></div><div class=\"line\">    </div><div class=\"line\">&lt;/vector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\"><a href=\"#2-&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2.&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\"></a>2.&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</div><div class=\"line\">&lt;objectAnimator</div><div class=\"line\">    xmlns:android=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></div><div class=\"line\">    android:duration=<span class=\"string\">&quot;6000&quot;</span></div><div class=\"line\">    android:propertyName=<span class=\"string\">&quot;trimPathEnd&quot;</span></div><div class=\"line\">    android:valueFrom=<span class=\"string\">&quot;0&quot;</span></div><div class=\"line\">    android:valueTo=<span class=\"string\">&quot;1&quot;</span></div><div class=\"line\">    android:valueType=<span class=\"string\">&quot;floatType&quot;</span>/&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\"><a href=\"#3-&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\" class=\"headerlink\" title=\"3.&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\"></a>3.&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;animated-vector</div><div class=\"line\">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    android:drawable=&quot;@drawable/ic_android_black_24dp&quot;&gt;</div><div class=\"line\">    &lt;target</div><div class=\"line\">        android:name=&quot;heart1&quot;</div><div class=\"line\">        android:animation=&quot;@animator/path_animator&quot;/&gt;</div><div class=\"line\">    &lt;target</div><div class=\"line\">        android:name=&quot;heart2&quot;</div><div class=\"line\">        android:animation=&quot;@animator/path_animator&quot;/&gt;</div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">&lt;/animated-vector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\"><a href=\"#4-&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\" class=\"headerlink\" title=\"4.&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\"></a>4.&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;android.support.v7.widget.AppCompatImageView</div><div class=\"line\">        android:id=<span class=\"string\">&quot;@+id/aaaa&quot;</span></div><div class=\"line\">        android:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">        android:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">        app:srcCompat=<span class=\"string\">&quot;@drawable/v_animation&quot;</span>/&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\"><a href=\"#5-&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"5.&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\"></a>5.&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">AppCompatImageView imageView = (AppCompatImageView)findViewById(R.id.aaaa);</div><div class=\"line\">Drawable animation = imageView.getDrawable();</div><div class=\"line\">        <span class=\"keyword\">if</span> (animation <span class=\"keyword\">instanceof</span> Animatable) {</div><div class=\"line\">            ((Animatable) animation).start();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://github.com/dinomonster/VectorsTest\" title=\"github\" target=\"_blank\" rel=\"external\">github</a><br><a href=\"http://inloop.github.io/svg2android/\" target=\"_blank\" rel=\"external\">http://inloop.github.io/svg2android/</a><br>&#x9644;&#x4E0A;&#x4E24;&#x4E2A;&#x56FE;&#x6807;&#x5E93;<br><a href=\"http://www.iconfont.cn/\" title=\"iconfont\" target=\"_blank\" rel=\"external\">iconfont</a><br><a href=\"http://www.easyicon.net/\" title=\"easyicon\" target=\"_blank\" rel=\"external\">easyicon</a></p>\n<p>&#x8FD8;&#x6709;<a href=\"http://inloop.github.io/svg2android/\" title=\"svg&#x5728;&#x7EBF;&#x8F6C;vector\" target=\"_blank\" rel=\"external\">svg&#x5728;&#x7EBF;&#x8F6C;vector</a></p>\n","excerpt":"","more":"<h3 id=\"&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\"><a href=\"#&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\" class=\"headerlink\" title=\"&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;\"></a>&#x4E4B;&#x524D;&#x8BB2;&#x8FC7;&#x4E86;&#x7528;&#x9759;&#x6001;&#x7684;Vector&#xFF0C;&#x8FD9;&#x91CC;&#x8BB2;&#x4E00;&#x4E0B;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x652F;&#x6301;&#x5305;&#x4E86;</h3><h4 id=\"1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"><a href=\"#1-&#x5F15;&#x7528;com-android-support-appcompat-v7-23-2-0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\" class=\"headerlink\" title=\"1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;\"></a>1.&#x5F15;&#x7528;com.android.support:appcompat-v7:23.2.0&#x4EE5;&#x4E0A;&#x7684;&#x5305;</h4><h4 id=\"2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\"><a href=\"#2-&#x5728;build&#x4E2D;defaultConfig-&#x91CC;&#x9762;&#x5199;vectorDrawables-useSupportLibrary-true\" class=\"headerlink\" title=\"2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;vectorDrawables.useSupportLibrary = true\"></a>2.&#x5728;build&#x4E2D;defaultConfig{}&#x91CC;&#x9762;&#x5199;<code>vectorDrawables.useSupportLibrary = true</code></h4><p>&#x4E0A;&#x9762;&#x4E24;&#x6B65;&#x548C;&#x4F7F;&#x7528;&#x9759;&#x6001;vector&#x8981;&#x6C42;&#x4E00;&#x6837;<br>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x52A8;&#x753B;&#x7684;&#x6B65;&#x9AA4;</p>\n<h4 id=\"1-&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\"><a href=\"#1-&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"1.&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;\"></a>1.&#x65B0;&#x5EFA;vector&#x9759;&#x6001;&#x6587;&#x4EF6;</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    android:width=&quot;256dp&quot;</div><div class=\"line\">    android:height=&quot;256dp&quot;</div><div class=\"line\">    android:viewportHeight=&quot;70&quot;</div><div class=\"line\">    android:viewportWidth=&quot;70&quot;&gt;</div><div class=\"line\">    &lt;path</div><div class=\"line\">        android:name=&quot;heart1&quot;</div><div class=\"line\">        android:pathData=&quot;...&quot;</div><div class=\"line\">        android:strokeColor=&quot;#E91E63&quot;</div><div class=\"line\">        android:strokeWidth=&quot;1&quot;</div><div class=\"line\">        /&gt;</div><div class=\"line\">    &lt;path</div><div class=\"line\">        android:name=&quot;heart2&quot;</div><div class=\"line\">        android:pathData=&quot;...&quot;</div><div class=\"line\">        android:strokeColor=&quot;#E91E63&quot;</div><div class=\"line\">        android:strokeWidth=&quot;1&quot;</div><div class=\"line\">        /&gt;</div><div class=\"line\"></div><div class=\"line\">    </div><div class=\"line\">&lt;/vector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"2-&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\"><a href=\"#2-&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2.&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;\"></a>2.&#x65B0;&#x5EFA;&#x52A8;&#x753B;&#x6587;&#x4EF6;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;</div><div class=\"line\">&lt;objectAnimator</div><div class=\"line\">    xmlns:android=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></div><div class=\"line\">    android:duration=<span class=\"string\">&quot;6000&quot;</span></div><div class=\"line\">    android:propertyName=<span class=\"string\">&quot;trimPathEnd&quot;</span></div><div class=\"line\">    android:valueFrom=<span class=\"string\">&quot;0&quot;</span></div><div class=\"line\">    android:valueTo=<span class=\"string\">&quot;1&quot;</span></div><div class=\"line\">    android:valueType=<span class=\"string\">&quot;floatType&quot;</span>/&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"3-&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\"><a href=\"#3-&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\" class=\"headerlink\" title=\"3.&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;\"></a>3.&#x65B0;&#x5EFA;Animated-Vector&#x56FE;&#x50CF;</h4><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;animated-vector</div><div class=\"line\">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">    android:drawable=&quot;@drawable/ic_android_black_24dp&quot;&gt;</div><div class=\"line\">    &lt;target</div><div class=\"line\">        android:name=&quot;heart1&quot;</div><div class=\"line\">        android:animation=&quot;@animator/path_animator&quot;/&gt;</div><div class=\"line\">    &lt;target</div><div class=\"line\">        android:name=&quot;heart2&quot;</div><div class=\"line\">        android:animation=&quot;@animator/path_animator&quot;/&gt;</div><div class=\"line\">   </div><div class=\"line\"></div><div class=\"line\">&lt;/animated-vector&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"4-&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\"><a href=\"#4-&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\" class=\"headerlink\" title=\"4.&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;\"></a>4.&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x5F15;&#x7528;Animated-Vector&#x56FE;&#x50CF;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;android.support.v7.widget.AppCompatImageView</div><div class=\"line\">        android:id=<span class=\"string\">&quot;@+id/aaaa&quot;</span></div><div class=\"line\">        android:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">        android:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">        app:srcCompat=<span class=\"string\">&quot;@drawable/v_animation&quot;</span>/&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"5-&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\"><a href=\"#5-&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\" class=\"headerlink\" title=\"5.&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;\"></a>5.&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x542F;&#x52A8;&#x52A8;&#x753B;</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">AppCompatImageView imageView = (AppCompatImageView)findViewById(R.id.aaaa);</div><div class=\"line\">Drawable animation = imageView.getDrawable();</div><div class=\"line\">        <span class=\"keyword\">if</span> (animation <span class=\"keyword\">instanceof</span> Animatable) {</div><div class=\"line\">            ((Animatable) animation).start();</div><div class=\"line\">        }</div></pre></td></tr></table></figure>\n<p>&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href=\"https://github.com/dinomonster/VectorsTest\" title=\"github\">github</a><br><a href=\"http://inloop.github.io/svg2android/\">http://inloop.github.io/svg2android/</a><br>&#x9644;&#x4E0A;&#x4E24;&#x4E2A;&#x56FE;&#x6807;&#x5E93;<br><a href=\"http://www.iconfont.cn/\" title=\"iconfont\">iconfont</a><br><a href=\"http://www.easyicon.net/\" title=\"easyicon\">easyicon</a></p>\n<p>&#x8FD8;&#x6709;<a href=\"http://inloop.github.io/svg2android/\" title=\"svg&#x5728;&#x7EBF;&#x8F6C;vector\">svg&#x5728;&#x7EBF;&#x8F6C;vector</a></p>\n"},{"title":"使用AnimatorSet执行一组动画","date":"2016-10-06T08:58:25.000Z","_content":"\n#### 需求要实现一组动画按顺序执行，发现用AnimationSet实现不了，只能一组动画同时播放。发现还有个AnimatorSet可以实现。\n\nAnimationSet 与 AnimatorSet 最大的不同在于，AnimationSet 使用的是 Animation 子类、AnimatorSet 使用的是 Animator 的子类。\n\nAnimation 是针对视图外观的动画实现，动画被应用时外观改变但视图的触发点不会发生变化，还是在原来定义的位置。\n\nAnimator 是针对视图属性的动画实现，动画被应用时对象属性产生变化，最终导致视图外观变化。\n\n```java\npublic static void startScale(View view, long duration,float fromeScale,float toScale) {\n        AnimatorSet animationSet = new AnimatorSet();\n        ObjectAnimator scaleX = ObjectAnimator.ofFloat(view, \"scaleX\", fromeScale, toScale);\n        ObjectAnimator scaleY = ObjectAnimator.ofFloat(view, \"scaleY\", fromeScale, toScale);\n        ObjectAnimator scaleXshrink = ObjectAnimator.ofFloat(view, \"scaleX\", toScale, fromeScale);\n        ObjectAnimator scaleYshrink = ObjectAnimator.ofFloat(view, \"scaleY\", toScale, fromeScale);\n        ObjectAnimator scaleXRe = ObjectAnimator.ofFloat(view, \"scaleX\", fromeScale, toScale);\n        ObjectAnimator scaleYRe = ObjectAnimator.ofFloat(view, \"scaleY\", fromeScale, toScale);\n        animationSet.setDuration(duration);\n        animationSet.playSequentially(scaleX, scaleXshrink, scaleXRe);\n        animationSet.playSequentially(scaleY, scaleYshrink, scaleYRe);\n        animationSet.start();\n    }\n```\n\n以上是实现的对一个view放大>缩小>放大 按顺序执行的一组动画\n还可以调用其play、before、with、after 等方法设置动画的执行顺序。\n","source":"_posts/使用AnimatorSet执行一组动画.md","raw":"---\ntitle: 使用AnimatorSet执行一组动画\ndate: 2016-10-06 16:58:25\ntags: Android\n---\n\n#### 需求要实现一组动画按顺序执行，发现用AnimationSet实现不了，只能一组动画同时播放。发现还有个AnimatorSet可以实现。\n\nAnimationSet 与 AnimatorSet 最大的不同在于，AnimationSet 使用的是 Animation 子类、AnimatorSet 使用的是 Animator 的子类。\n\nAnimation 是针对视图外观的动画实现，动画被应用时外观改变但视图的触发点不会发生变化，还是在原来定义的位置。\n\nAnimator 是针对视图属性的动画实现，动画被应用时对象属性产生变化，最终导致视图外观变化。\n\n```java\npublic static void startScale(View view, long duration,float fromeScale,float toScale) {\n        AnimatorSet animationSet = new AnimatorSet();\n        ObjectAnimator scaleX = ObjectAnimator.ofFloat(view, \"scaleX\", fromeScale, toScale);\n        ObjectAnimator scaleY = ObjectAnimator.ofFloat(view, \"scaleY\", fromeScale, toScale);\n        ObjectAnimator scaleXshrink = ObjectAnimator.ofFloat(view, \"scaleX\", toScale, fromeScale);\n        ObjectAnimator scaleYshrink = ObjectAnimator.ofFloat(view, \"scaleY\", toScale, fromeScale);\n        ObjectAnimator scaleXRe = ObjectAnimator.ofFloat(view, \"scaleX\", fromeScale, toScale);\n        ObjectAnimator scaleYRe = ObjectAnimator.ofFloat(view, \"scaleY\", fromeScale, toScale);\n        animationSet.setDuration(duration);\n        animationSet.playSequentially(scaleX, scaleXshrink, scaleXRe);\n        animationSet.playSequentially(scaleY, scaleYshrink, scaleYRe);\n        animationSet.start();\n    }\n```\n\n以上是实现的对一个view放大>缩小>放大 按顺序执行的一组动画\n还可以调用其play、before、with、after 等方法设置动画的执行顺序。\n","slug":"使用AnimatorSet执行一组动画","published":1,"updated":"2016-10-06T09:10:26.709Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwh5000cpkm8muucc1g5","content":"<h4 id=\"&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\"><a href=\"#&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\" class=\"headerlink\" title=\"&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\"></a>&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;</h4><p>AnimationSet &#x4E0E; AnimatorSet &#x6700;&#x5927;&#x7684;&#x4E0D;&#x540C;&#x5728;&#x4E8E;&#xFF0C;AnimationSet &#x4F7F;&#x7528;&#x7684;&#x662F; Animation &#x5B50;&#x7C7B;&#x3001;AnimatorSet &#x4F7F;&#x7528;&#x7684;&#x662F; Animator &#x7684;&#x5B50;&#x7C7B;&#x3002;</p>\n<p>Animation &#x662F;&#x9488;&#x5BF9;&#x89C6;&#x56FE;&#x5916;&#x89C2;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x52A8;&#x753B;&#x88AB;&#x5E94;&#x7528;&#x65F6;&#x5916;&#x89C2;&#x6539;&#x53D8;&#x4F46;&#x89C6;&#x56FE;&#x7684;&#x89E6;&#x53D1;&#x70B9;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x539F;&#x6765;&#x5B9A;&#x4E49;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>Animator &#x662F;&#x9488;&#x5BF9;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x52A8;&#x753B;&#x88AB;&#x5E94;&#x7528;&#x65F6;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x4EA7;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x89C6;&#x56FE;&#x5916;&#x89C2;&#x53D8;&#x5316;&#x3002;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">startScale</span><span class=\"params\">(View view, <span class=\"keyword\">long</span> duration,<span class=\"keyword\">float</span> fromeScale,<span class=\"keyword\">float</span> toScale)</span> </span>{</div><div class=\"line\">        AnimatorSet animationSet = <span class=\"keyword\">new</span> AnimatorSet();</div><div class=\"line\">        ObjectAnimator scaleX = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleY = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleXshrink = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, toScale, fromeScale);</div><div class=\"line\">        ObjectAnimator scaleYshrink = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, toScale, fromeScale);</div><div class=\"line\">        ObjectAnimator scaleXRe = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleYRe = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        animationSet.setDuration(duration);</div><div class=\"line\">        animationSet.playSequentially(scaleX, scaleXshrink, scaleXRe);</div><div class=\"line\">        animationSet.playSequentially(scaleY, scaleYshrink, scaleYRe);</div><div class=\"line\">        animationSet.start();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4EE5;&#x4E0A;&#x662F;&#x5B9E;&#x73B0;&#x7684;&#x5BF9;&#x4E00;&#x4E2A;view&#x653E;&#x5927;&gt;&#x7F29;&#x5C0F;&gt;&#x653E;&#x5927; &#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x4E00;&#x7EC4;&#x52A8;&#x753B;<br>&#x8FD8;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5176;play&#x3001;before&#x3001;with&#x3001;after &#x7B49;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;&#x52A8;&#x753B;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x3002;</p>\n","excerpt":"","more":"<h4 id=\"&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\"><a href=\"#&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\" class=\"headerlink\" title=\"&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;\"></a>&#x9700;&#x6C42;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x53D1;&#x73B0;&#x7528;AnimationSet&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x53EA;&#x80FD;&#x4E00;&#x7EC4;&#x52A8;&#x753B;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x3002;&#x53D1;&#x73B0;&#x8FD8;&#x6709;&#x4E2A;AnimatorSet&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x3002;</h4><p>AnimationSet &#x4E0E; AnimatorSet &#x6700;&#x5927;&#x7684;&#x4E0D;&#x540C;&#x5728;&#x4E8E;&#xFF0C;AnimationSet &#x4F7F;&#x7528;&#x7684;&#x662F; Animation &#x5B50;&#x7C7B;&#x3001;AnimatorSet &#x4F7F;&#x7528;&#x7684;&#x662F; Animator &#x7684;&#x5B50;&#x7C7B;&#x3002;</p>\n<p>Animation &#x662F;&#x9488;&#x5BF9;&#x89C6;&#x56FE;&#x5916;&#x89C2;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x52A8;&#x753B;&#x88AB;&#x5E94;&#x7528;&#x65F6;&#x5916;&#x89C2;&#x6539;&#x53D8;&#x4F46;&#x89C6;&#x56FE;&#x7684;&#x89E6;&#x53D1;&#x70B9;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x539F;&#x6765;&#x5B9A;&#x4E49;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>Animator &#x662F;&#x9488;&#x5BF9;&#x89C6;&#x56FE;&#x5C5E;&#x6027;&#x7684;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x52A8;&#x753B;&#x88AB;&#x5E94;&#x7528;&#x65F6;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x4EA7;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x89C6;&#x56FE;&#x5916;&#x89C2;&#x53D8;&#x5316;&#x3002;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">startScale</span><span class=\"params\">(View view, <span class=\"keyword\">long</span> duration,<span class=\"keyword\">float</span> fromeScale,<span class=\"keyword\">float</span> toScale)</span> </span>{</div><div class=\"line\">        AnimatorSet animationSet = <span class=\"keyword\">new</span> AnimatorSet();</div><div class=\"line\">        ObjectAnimator scaleX = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleY = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleXshrink = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, toScale, fromeScale);</div><div class=\"line\">        ObjectAnimator scaleYshrink = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, toScale, fromeScale);</div><div class=\"line\">        ObjectAnimator scaleXRe = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleX&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        ObjectAnimator scaleYRe = ObjectAnimator.ofFloat(view, <span class=\"string\">&quot;scaleY&quot;</span>, fromeScale, toScale);</div><div class=\"line\">        animationSet.setDuration(duration);</div><div class=\"line\">        animationSet.playSequentially(scaleX, scaleXshrink, scaleXRe);</div><div class=\"line\">        animationSet.playSequentially(scaleY, scaleYshrink, scaleYRe);</div><div class=\"line\">        animationSet.start();</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x4EE5;&#x4E0A;&#x662F;&#x5B9E;&#x73B0;&#x7684;&#x5BF9;&#x4E00;&#x4E2A;view&#x653E;&#x5927;&gt;&#x7F29;&#x5C0F;&gt;&#x653E;&#x5927; &#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;&#x4E00;&#x7EC4;&#x52A8;&#x753B;<br>&#x8FD8;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5176;play&#x3001;before&#x3001;with&#x3001;after &#x7B49;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;&#x52A8;&#x753B;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x3002;</p>\n"},{"title":"Android6.0权限机制变更","date":"2016-08-09T01:56:28.000Z","_content":"\n### Android6.0以前\n所有权限都在安装应用时显示给用户，用户选择安装则表示接受这些权限，之后无法撤销授权。\n\n### Android6.0开始\n在安装应用时，部分危险权限会展示给用户，默认不勾选，用户可选择授权，并可以在安装之后进入设置撤销授权。\nDangerous permissions:\n-  CALENDAR\n\t*  READ_CALENDAR\n\t*  WRITE_CALENDAR\n-  CAMERA\n\t*  READ_CALENDAR\n\t*  WRITE_CALENDAR\n-  CONTACTS\n\t*  READ_CONTACTS\n\t*  WRITE_CONTACTS\n\t*  GET_ACCOUNTS\n-  LOCATION\n\t*  ACCESS_FINE_LOCATION\n\t*  ACCESS_COARSE_LOCATION\n-  MICROPHONE\n\t*  RECORD_AUDIO\n-  PHONE\n\t*  READ_PHONE_STATE\n\t*  CALL_PHONE\n\t*  READ_CALL_LOG\n\t*  WRITE_CALL_LOG\n\t*  ADD_VOICEMAIL\n\t*  USE_SIP\n\t*  PROCESS_OUTGOING_CALLS\n-  SENSORS\n\t*  BODY_SENSORS\n-  SMS\n\t*  SEND_SMS\n\t*  RECEIVE_SMS\n\t*  READ_SMS\n\t*  RECEIVE_WAP_PUSH\n\t*  RECEIVE_MMS\n-  STORAGE\n\t*  READ_EXTERNAL_STORAGE\n\t*  WRITE_EXTERNAL_STORAGE\n\n权限详细信息[查看](https://developer.android.com/reference/android/Manifest.permission.html)\n\n想要查看所有dangerous的权限, 也可以用命令:\n`adb shell pm list permissions -g -d`\n\nGuides里面的原文:\n- If the device is running Android 6.0 (API level 23) or higher, and the app's targetSdkVersion is 23 or higher, the app requests permissions from the user at run-time. The user can revoke the permissions at any time, so the app needs to check whether it has the permissions every time it runs. For more information about requesting permissions in your app, see the Working with System Permissions training guide.\n- If the device is running Android 5.1 (API level 22) or lower, or the app's targetSdkVersion is 22 or lower, the system asks the user to grant the permissions when the user installs the app. If you add a new permission to an updated version of the app, the system asks the user to grant that permission when the user updates the app. Once the user installs the app, the only way they can revoke the permission is by uninstalling the app.\n\n只有满足targetSdkVersion和实际使用设备的版本都在23及以上的时候,才会采用新的动态权限机制. 其他情况, 跟之前一样, 在安装和升级应用的时候就授权了所有的权限.\n如果targetSdkVersion小于23,即被认为是Android 6.0发布之前开发的应用, 还没有兼容6.0.\n这种应用即便是被装在Android 6.0的机器上,也是采用原来的安装即授予权限逻辑, 所有权限在应用安装时全部被授权.\n在Android 6.0的设备上安装targetSdkVersion小于23的应用之后, 可以在应用的设置中查看,发现所有的dangerous权限状态都是打开.\n但是用户仍然可以在系统设置中禁用权限\n\n因为权限动态检查相关的API是Android 6.0才加入的, 所以minSdkVersion不是23时,推荐使用SupportLibrary来实现,好处是: 程序里不必加if来判断当前设备的版本.support的包必须是23以上才可以.\n\n下面来讲讲代码中如何适配这种新的权限机制：\n### 1.检查权限状态\n如果在执行操作需要一个dangerous permission，那么每次执行操作都必须检查是否有这个权限，因为用户可以随意更改授权，所以必须每次都进行检查，比如我这里需要选择照片就需要加如下代码：\n```Java\nif(PackageManager.PERMISSION_GRANTED == ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.READ_EXTERNAL_STORAGE)){\ngoImageSelect();\n}else{\n//do not have permission\n}\n```\n### 2.动态请求权限\n如果上面的判断没有权限，那么就需要显式的请求这个权限，Android提供了方法来动态请求权限，调用这些方法会弹出标准的dialog，目前这个dialog不能被定制。\n#### 2.1有时候可能需要解释为什么需要这个权限\n一种方式是,当用户拒绝过这个权限,但是又用到了这个功能, 那么很可能用户不是很明白为什么app需要这个权限, 这时候就可以先向用户解释一下.\n为了发现这种用户可能需要解释的情形, Android提供了一个工具类方法: shouldShowRequestPermissionRationale()\n如果app之前请求过该权限,被用户拒绝, 这个方法就会返回true.\n如果用户之前拒绝权限的时候勾选了对话框中”Don’t ask again”的选项,那么这个方法会返回false.\n如果设备策略禁止应用拥有这条权限, 这个方法也返回false.\n具体解释原因的这个dialog需要自己实现, 系统没有提供.\n\n```Java\n//do not have permission\n// Should we show an explanation?\nif (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this,\n            Manifest.permission.READ_CONTACTS)) {\n\n        // Show an explanation to the user *asynchronously* -- don't block\n        // this thread waiting for the user's response! After the user\n        // sees the explanation, try again to request the permission.\n        Log.i(DEBUG_TAG, \"we should explain why we need this permission!\");\n    } else {\n\n        // No explanation needed, we can request the permission.\n   }\n```\n#### 2.2请求权限\n请求权限的方法分两种\n一种是在Activity里面请求使用如下方法\nrequestPermissions(final @NonNull Activity activity,\n            final @NonNull String[] permissions, final int requestCode)\n传入一个Activity, 一个permission名字的数组, 和一个整型的request code.\n这个方法是异步的,它会立即返回, 当用户和dialog交互完成之后,系统会调用回调方法,传回用户的选择结果和对应的request code.\n示例代码：\n```java\nActivityCompat.requestPermissions(CreateMeetActivity.this,new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE);\n```\n一种是在Fragment里面请求\nrequestPermissions(@NonNull String[] permissions, int requestCode)\n少一个Activity参数，其他一样，但是回调需要特别说明，还有fragment嵌套fragment的回调处理情况，下面会单独说明。\n\n#### 2.3处理请求权限的响应\n当用户对请求权限的dialog做出响应之后,系统会调用onRequestPermissionsResult() 方法,传回用户的选择结果和request code.\n这个回调中request code即为调用requestPermissions()时传入的参数,是app自定义的一个整型值.\n如果请求取消,返回的数组将会为空.\n代码如下：\n```java\n@Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        switch (requestCode) {\n            case PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE: {\n                // If request is cancelled, the result arrays are empty.\n                if (grantResults.length > 0&& grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n\n                    // permission was granted, yay! Do the\n                    // contacts-related task you need to do.\n                    goFileSelect();\n                    Log.i(TAG, \"user granted the permission!\");\n\n                } else {\n\n                    // permission denied, boo! Disable the\n                    // functionality that depends on this permission.\n                    Log.i(TAG, \"user denied the permission!\");\n                }\n                return;\n            }\n\n            // other 'case' lines to check for other\n            // permissions this app might request\n        }\n```\n\n在Fragment中申请权限，不要使用ActivityCompat.requestPermissions, 直接使用Fragment的requestPermissions方法，否则会回调到Activity的 onRequestPermissionsResult\n如果在Fragment中嵌套Fragment，在子Fragment中使用requestPermissions方 法，onRequestPermissionsResult不会回调回来，建议使用 getParentFragment().requestPermissions方法，这个方法会回调到父Fragment中的onRequestPermissionsResult，加入以下代码可以把回调透传到子Fragment\n\n```java\n@Override\n  public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n      super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n      List<Fragment> fragments = getChildFragmentManager().getFragments();\n      if (fragments != null) {\n          for (Fragment fragment : fragments) {\n              if (fragment != null) {\n                  fragment.onRequestPermissionsResult(requestCode,permissions,grantResults);\n              }\n          }\n      }\n  }\n```\n","source":"_posts/2016-8-9.md","raw":"---\ntitle: Android6.0权限机制变更\ndate: 2016-08-09 09:56:28\ntags: Android\n---\n\n### Android6.0以前\n所有权限都在安装应用时显示给用户，用户选择安装则表示接受这些权限，之后无法撤销授权。\n\n### Android6.0开始\n在安装应用时，部分危险权限会展示给用户，默认不勾选，用户可选择授权，并可以在安装之后进入设置撤销授权。\nDangerous permissions:\n-  CALENDAR\n\t*  READ_CALENDAR\n\t*  WRITE_CALENDAR\n-  CAMERA\n\t*  READ_CALENDAR\n\t*  WRITE_CALENDAR\n-  CONTACTS\n\t*  READ_CONTACTS\n\t*  WRITE_CONTACTS\n\t*  GET_ACCOUNTS\n-  LOCATION\n\t*  ACCESS_FINE_LOCATION\n\t*  ACCESS_COARSE_LOCATION\n-  MICROPHONE\n\t*  RECORD_AUDIO\n-  PHONE\n\t*  READ_PHONE_STATE\n\t*  CALL_PHONE\n\t*  READ_CALL_LOG\n\t*  WRITE_CALL_LOG\n\t*  ADD_VOICEMAIL\n\t*  USE_SIP\n\t*  PROCESS_OUTGOING_CALLS\n-  SENSORS\n\t*  BODY_SENSORS\n-  SMS\n\t*  SEND_SMS\n\t*  RECEIVE_SMS\n\t*  READ_SMS\n\t*  RECEIVE_WAP_PUSH\n\t*  RECEIVE_MMS\n-  STORAGE\n\t*  READ_EXTERNAL_STORAGE\n\t*  WRITE_EXTERNAL_STORAGE\n\n权限详细信息[查看](https://developer.android.com/reference/android/Manifest.permission.html)\n\n想要查看所有dangerous的权限, 也可以用命令:\n`adb shell pm list permissions -g -d`\n\nGuides里面的原文:\n- If the device is running Android 6.0 (API level 23) or higher, and the app's targetSdkVersion is 23 or higher, the app requests permissions from the user at run-time. The user can revoke the permissions at any time, so the app needs to check whether it has the permissions every time it runs. For more information about requesting permissions in your app, see the Working with System Permissions training guide.\n- If the device is running Android 5.1 (API level 22) or lower, or the app's targetSdkVersion is 22 or lower, the system asks the user to grant the permissions when the user installs the app. If you add a new permission to an updated version of the app, the system asks the user to grant that permission when the user updates the app. Once the user installs the app, the only way they can revoke the permission is by uninstalling the app.\n\n只有满足targetSdkVersion和实际使用设备的版本都在23及以上的时候,才会采用新的动态权限机制. 其他情况, 跟之前一样, 在安装和升级应用的时候就授权了所有的权限.\n如果targetSdkVersion小于23,即被认为是Android 6.0发布之前开发的应用, 还没有兼容6.0.\n这种应用即便是被装在Android 6.0的机器上,也是采用原来的安装即授予权限逻辑, 所有权限在应用安装时全部被授权.\n在Android 6.0的设备上安装targetSdkVersion小于23的应用之后, 可以在应用的设置中查看,发现所有的dangerous权限状态都是打开.\n但是用户仍然可以在系统设置中禁用权限\n\n因为权限动态检查相关的API是Android 6.0才加入的, 所以minSdkVersion不是23时,推荐使用SupportLibrary来实现,好处是: 程序里不必加if来判断当前设备的版本.support的包必须是23以上才可以.\n\n下面来讲讲代码中如何适配这种新的权限机制：\n### 1.检查权限状态\n如果在执行操作需要一个dangerous permission，那么每次执行操作都必须检查是否有这个权限，因为用户可以随意更改授权，所以必须每次都进行检查，比如我这里需要选择照片就需要加如下代码：\n```Java\nif(PackageManager.PERMISSION_GRANTED == ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.READ_EXTERNAL_STORAGE)){\ngoImageSelect();\n}else{\n//do not have permission\n}\n```\n### 2.动态请求权限\n如果上面的判断没有权限，那么就需要显式的请求这个权限，Android提供了方法来动态请求权限，调用这些方法会弹出标准的dialog，目前这个dialog不能被定制。\n#### 2.1有时候可能需要解释为什么需要这个权限\n一种方式是,当用户拒绝过这个权限,但是又用到了这个功能, 那么很可能用户不是很明白为什么app需要这个权限, 这时候就可以先向用户解释一下.\n为了发现这种用户可能需要解释的情形, Android提供了一个工具类方法: shouldShowRequestPermissionRationale()\n如果app之前请求过该权限,被用户拒绝, 这个方法就会返回true.\n如果用户之前拒绝权限的时候勾选了对话框中”Don’t ask again”的选项,那么这个方法会返回false.\n如果设备策略禁止应用拥有这条权限, 这个方法也返回false.\n具体解释原因的这个dialog需要自己实现, 系统没有提供.\n\n```Java\n//do not have permission\n// Should we show an explanation?\nif (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this,\n            Manifest.permission.READ_CONTACTS)) {\n\n        // Show an explanation to the user *asynchronously* -- don't block\n        // this thread waiting for the user's response! After the user\n        // sees the explanation, try again to request the permission.\n        Log.i(DEBUG_TAG, \"we should explain why we need this permission!\");\n    } else {\n\n        // No explanation needed, we can request the permission.\n   }\n```\n#### 2.2请求权限\n请求权限的方法分两种\n一种是在Activity里面请求使用如下方法\nrequestPermissions(final @NonNull Activity activity,\n            final @NonNull String[] permissions, final int requestCode)\n传入一个Activity, 一个permission名字的数组, 和一个整型的request code.\n这个方法是异步的,它会立即返回, 当用户和dialog交互完成之后,系统会调用回调方法,传回用户的选择结果和对应的request code.\n示例代码：\n```java\nActivityCompat.requestPermissions(CreateMeetActivity.this,new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE);\n```\n一种是在Fragment里面请求\nrequestPermissions(@NonNull String[] permissions, int requestCode)\n少一个Activity参数，其他一样，但是回调需要特别说明，还有fragment嵌套fragment的回调处理情况，下面会单独说明。\n\n#### 2.3处理请求权限的响应\n当用户对请求权限的dialog做出响应之后,系统会调用onRequestPermissionsResult() 方法,传回用户的选择结果和request code.\n这个回调中request code即为调用requestPermissions()时传入的参数,是app自定义的一个整型值.\n如果请求取消,返回的数组将会为空.\n代码如下：\n```java\n@Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        switch (requestCode) {\n            case PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE: {\n                // If request is cancelled, the result arrays are empty.\n                if (grantResults.length > 0&& grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n\n                    // permission was granted, yay! Do the\n                    // contacts-related task you need to do.\n                    goFileSelect();\n                    Log.i(TAG, \"user granted the permission!\");\n\n                } else {\n\n                    // permission denied, boo! Disable the\n                    // functionality that depends on this permission.\n                    Log.i(TAG, \"user denied the permission!\");\n                }\n                return;\n            }\n\n            // other 'case' lines to check for other\n            // permissions this app might request\n        }\n```\n\n在Fragment中申请权限，不要使用ActivityCompat.requestPermissions, 直接使用Fragment的requestPermissions方法，否则会回调到Activity的 onRequestPermissionsResult\n如果在Fragment中嵌套Fragment，在子Fragment中使用requestPermissions方 法，onRequestPermissionsResult不会回调回来，建议使用 getParentFragment().requestPermissions方法，这个方法会回调到父Fragment中的onRequestPermissionsResult，加入以下代码可以把回调透传到子Fragment\n\n```java\n@Override\n  public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n      super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n      List<Fragment> fragments = getChildFragmentManager().getFragments();\n      if (fragments != null) {\n          for (Fragment fragment : fragments) {\n              if (fragment != null) {\n                  fragment.onRequestPermissionsResult(requestCode,permissions,grantResults);\n              }\n          }\n      }\n  }\n```\n","slug":"2016-8-9","published":1,"updated":"2016-08-09T03:30:27.165Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwh6000epkm8zkchbmxt","content":"<h3 id=\"Android6-0&#x4EE5;&#x524D;\"><a href=\"#Android6-0&#x4EE5;&#x524D;\" class=\"headerlink\" title=\"Android6.0&#x4EE5;&#x524D;\"></a>Android6.0&#x4EE5;&#x524D;</h3><p>&#x6240;&#x6709;&#x6743;&#x9650;&#x90FD;&#x5728;&#x5B89;&#x88C5;&#x5E94;&#x7528;&#x65F6;&#x663E;&#x793A;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x7528;&#x6237;&#x9009;&#x62E9;&#x5B89;&#x88C5;&#x5219;&#x8868;&#x793A;&#x63A5;&#x53D7;&#x8FD9;&#x4E9B;&#x6743;&#x9650;&#xFF0C;&#x4E4B;&#x540E;&#x65E0;&#x6CD5;&#x64A4;&#x9500;&#x6388;&#x6743;&#x3002;</p>\n<h3 id=\"Android6-0&#x5F00;&#x59CB;\"><a href=\"#Android6-0&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"Android6.0&#x5F00;&#x59CB;\"></a>Android6.0&#x5F00;&#x59CB;</h3><p>&#x5728;&#x5B89;&#x88C5;&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x90E8;&#x5206;&#x5371;&#x9669;&#x6743;&#x9650;&#x4F1A;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x52FE;&#x9009;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x9009;&#x62E9;&#x6388;&#x6743;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5728;&#x5B89;&#x88C5;&#x4E4B;&#x540E;&#x8FDB;&#x5165;&#x8BBE;&#x7F6E;&#x64A4;&#x9500;&#x6388;&#x6743;&#x3002;<br>Dangerous permissions:</p>\n<ul>\n<li>CALENDAR<ul>\n<li>READ_CALENDAR</li>\n<li>WRITE_CALENDAR</li>\n</ul>\n</li>\n<li>CAMERA<ul>\n<li>READ_CALENDAR</li>\n<li>WRITE_CALENDAR</li>\n</ul>\n</li>\n<li>CONTACTS<ul>\n<li>READ_CONTACTS</li>\n<li>WRITE_CONTACTS</li>\n<li>GET_ACCOUNTS</li>\n</ul>\n</li>\n<li>LOCATION<ul>\n<li>ACCESS_FINE_LOCATION</li>\n<li>ACCESS_COARSE_LOCATION</li>\n</ul>\n</li>\n<li>MICROPHONE<ul>\n<li>RECORD_AUDIO</li>\n</ul>\n</li>\n<li>PHONE<ul>\n<li>READ_PHONE_STATE</li>\n<li>CALL_PHONE</li>\n<li>READ_CALL_LOG</li>\n<li>WRITE_CALL_LOG</li>\n<li>ADD_VOICEMAIL</li>\n<li>USE_SIP</li>\n<li>PROCESS_OUTGOING_CALLS</li>\n</ul>\n</li>\n<li>SENSORS<ul>\n<li>BODY_SENSORS</li>\n</ul>\n</li>\n<li>SMS<ul>\n<li>SEND_SMS</li>\n<li>RECEIVE_SMS</li>\n<li>READ_SMS</li>\n<li>RECEIVE_WAP_PUSH</li>\n<li>RECEIVE_MMS</li>\n</ul>\n</li>\n<li>STORAGE<ul>\n<li>READ_EXTERNAL_STORAGE</li>\n<li>WRITE_EXTERNAL_STORAGE</li>\n</ul>\n</li>\n</ul>\n<p>&#x6743;&#x9650;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;<a href=\"https://developer.android.com/reference/android/Manifest.permission.html\" target=\"_blank\" rel=\"external\">&#x67E5;&#x770B;</a></p>\n<p>&#x60F3;&#x8981;&#x67E5;&#x770B;&#x6240;&#x6709;dangerous&#x7684;&#x6743;&#x9650;, &#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x547D;&#x4EE4;:<br><code>adb shell pm list permissions -g -d</code></p>\n<p>Guides&#x91CC;&#x9762;&#x7684;&#x539F;&#x6587;:</p>\n<ul>\n<li>If the device is running Android 6.0 (API level 23) or higher, and the app&#x2019;s targetSdkVersion is 23 or higher, the app requests permissions from the user at run-time. The user can revoke the permissions at any time, so the app needs to check whether it has the permissions every time it runs. For more information about requesting permissions in your app, see the Working with System Permissions training guide.</li>\n<li>If the device is running Android 5.1 (API level 22) or lower, or the app&#x2019;s targetSdkVersion is 22 or lower, the system asks the user to grant the permissions when the user installs the app. If you add a new permission to an updated version of the app, the system asks the user to grant that permission when the user updates the app. Once the user installs the app, the only way they can revoke the permission is by uninstalling the app.</li>\n</ul>\n<p>&#x53EA;&#x6709;&#x6EE1;&#x8DB3;targetSdkVersion&#x548C;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x8BBE;&#x5907;&#x7684;&#x7248;&#x672C;&#x90FD;&#x5728;23&#x53CA;&#x4EE5;&#x4E0A;&#x7684;&#x65F6;&#x5019;,&#x624D;&#x4F1A;&#x91C7;&#x7528;&#x65B0;&#x7684;&#x52A8;&#x6001;&#x6743;&#x9650;&#x673A;&#x5236;. &#x5176;&#x4ED6;&#x60C5;&#x51B5;, &#x8DDF;&#x4E4B;&#x524D;&#x4E00;&#x6837;, &#x5728;&#x5B89;&#x88C5;&#x548C;&#x5347;&#x7EA7;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x6388;&#x6743;&#x4E86;&#x6240;&#x6709;&#x7684;&#x6743;&#x9650;.<br>&#x5982;&#x679C;targetSdkVersion&#x5C0F;&#x4E8E;23,&#x5373;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;Android 6.0&#x53D1;&#x5E03;&#x4E4B;&#x524D;&#x5F00;&#x53D1;&#x7684;&#x5E94;&#x7528;, &#x8FD8;&#x6CA1;&#x6709;&#x517C;&#x5BB9;6.0.<br>&#x8FD9;&#x79CD;&#x5E94;&#x7528;&#x5373;&#x4FBF;&#x662F;&#x88AB;&#x88C5;&#x5728;Android 6.0&#x7684;&#x673A;&#x5668;&#x4E0A;,&#x4E5F;&#x662F;&#x91C7;&#x7528;&#x539F;&#x6765;&#x7684;&#x5B89;&#x88C5;&#x5373;&#x6388;&#x4E88;&#x6743;&#x9650;&#x903B;&#x8F91;, &#x6240;&#x6709;&#x6743;&#x9650;&#x5728;&#x5E94;&#x7528;&#x5B89;&#x88C5;&#x65F6;&#x5168;&#x90E8;&#x88AB;&#x6388;&#x6743;.<br>&#x5728;Android 6.0&#x7684;&#x8BBE;&#x5907;&#x4E0A;&#x5B89;&#x88C5;targetSdkVersion&#x5C0F;&#x4E8E;23&#x7684;&#x5E94;&#x7528;&#x4E4B;&#x540E;, &#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x4E2D;&#x67E5;&#x770B;,&#x53D1;&#x73B0;&#x6240;&#x6709;&#x7684;dangerous&#x6743;&#x9650;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x6253;&#x5F00;.<br>&#x4F46;&#x662F;&#x7528;&#x6237;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E;&#x4E2D;&#x7981;&#x7528;&#x6743;&#x9650;</p>\n<p>&#x56E0;&#x4E3A;&#x6743;&#x9650;&#x52A8;&#x6001;&#x68C0;&#x67E5;&#x76F8;&#x5173;&#x7684;API&#x662F;Android 6.0&#x624D;&#x52A0;&#x5165;&#x7684;, &#x6240;&#x4EE5;minSdkVersion&#x4E0D;&#x662F;23&#x65F6;,&#x63A8;&#x8350;&#x4F7F;&#x7528;SupportLibrary&#x6765;&#x5B9E;&#x73B0;,&#x597D;&#x5904;&#x662F;: &#x7A0B;&#x5E8F;&#x91CC;&#x4E0D;&#x5FC5;&#x52A0;if&#x6765;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8BBE;&#x5907;&#x7684;&#x7248;&#x672C;.support&#x7684;&#x5305;&#x5FC5;&#x987B;&#x662F;23&#x4EE5;&#x4E0A;&#x624D;&#x53EF;&#x4EE5;.</p>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BB2;&#x8BB2;&#x4EE3;&#x7801;&#x4E2D;&#x5982;&#x4F55;&#x9002;&#x914D;&#x8FD9;&#x79CD;&#x65B0;&#x7684;&#x6743;&#x9650;&#x673A;&#x5236;&#xFF1A;</p>\n<h3 id=\"1-&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\"><a href=\"#1-&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"1.&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\"></a>1.&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;</h3><p>&#x5982;&#x679C;&#x5728;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x4E00;&#x4E2A;dangerous permission&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x90FD;&#x5FC5;&#x987B;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#xFF0C;&#x56E0;&#x4E3A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x66F4;&#x6539;&#x6388;&#x6743;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;&#x68C0;&#x67E5;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x9009;&#x62E9;&#x7167;&#x7247;&#x5C31;&#x9700;&#x8981;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span>(PackageManager.PERMISSION_GRANTED == ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.READ_EXTERNAL_STORAGE)){</div><div class=\"line\">goImageSelect();</div><div class=\"line\">}<span class=\"keyword\">else</span>{</div><div class=\"line\"><span class=\"comment\">//do not have permission</span></div><div class=\"line\">}</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\"><a href=\"#2-&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\"></a>2.&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;</h3><p>&#x5982;&#x679C;&#x4E0A;&#x9762;&#x7684;&#x5224;&#x65AD;&#x6CA1;&#x6709;&#x6743;&#x9650;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x7684;&#x8BF7;&#x6C42;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#xFF0C;Android&#x63D0;&#x4F9B;&#x4E86;&#x65B9;&#x6CD5;&#x6765;&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#xFF0C;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x4F1A;&#x5F39;&#x51FA;&#x6807;&#x51C6;&#x7684;dialog&#xFF0C;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;dialog&#x4E0D;&#x80FD;&#x88AB;&#x5B9A;&#x5236;&#x3002;</p>\n<h4 id=\"2-1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\"><a href=\"#2-1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\"></a>2.1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;</h4><p>&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;,&#x5F53;&#x7528;&#x6237;&#x62D2;&#x7EDD;&#x8FC7;&#x8FD9;&#x4E2A;&#x6743;&#x9650;,&#x4F46;&#x662F;&#x53C8;&#x7528;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;, &#x90A3;&#x4E48;&#x5F88;&#x53EF;&#x80FD;&#x7528;&#x6237;&#x4E0D;&#x662F;&#x5F88;&#x660E;&#x767D;&#x4E3A;&#x4EC0;&#x4E48;app&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;, &#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5148;&#x5411;&#x7528;&#x6237;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;.<br>&#x4E3A;&#x4E86;&#x53D1;&#x73B0;&#x8FD9;&#x79CD;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x7684;&#x60C5;&#x5F62;, Android&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x7C7B;&#x65B9;&#x6CD5;: shouldShowRequestPermissionRationale()<br>&#x5982;&#x679C;app&#x4E4B;&#x524D;&#x8BF7;&#x6C42;&#x8FC7;&#x8BE5;&#x6743;&#x9650;,&#x88AB;&#x7528;&#x6237;&#x62D2;&#x7EDD;, &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;true.<br>&#x5982;&#x679C;&#x7528;&#x6237;&#x4E4B;&#x524D;&#x62D2;&#x7EDD;&#x6743;&#x9650;&#x7684;&#x65F6;&#x5019;&#x52FE;&#x9009;&#x4E86;&#x5BF9;&#x8BDD;&#x6846;&#x4E2D;&#x201D;Don&#x2019;t ask again&#x201D;&#x7684;&#x9009;&#x9879;,&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x8FD4;&#x56DE;false.<br>&#x5982;&#x679C;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x7981;&#x6B62;&#x5E94;&#x7528;&#x62E5;&#x6709;&#x8FD9;&#x6761;&#x6743;&#x9650;, &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x8FD4;&#x56DE;false.<br>&#x5177;&#x4F53;&#x89E3;&#x91CA;&#x539F;&#x56E0;&#x7684;&#x8FD9;&#x4E2A;dialog&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;, &#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//do not have permission</span></div><div class=\"line\"><span class=\"comment\">// Should we show an explanation?</span></div><div class=\"line\"><span class=\"keyword\">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.<span class=\"keyword\">this</span>,</div><div class=\"line\">            Manifest.permission.READ_CONTACTS)) {</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// Show an explanation to the user *asynchronously* -- don&apos;t block</span></div><div class=\"line\">        <span class=\"comment\">// this thread waiting for the user&apos;s response! After the user</span></div><div class=\"line\">        <span class=\"comment\">// sees the explanation, try again to request the permission.</span></div><div class=\"line\">        Log.i(DEBUG_TAG, <span class=\"string\">&quot;we should explain why we need this permission!&quot;</span>);</div><div class=\"line\">    } <span class=\"keyword\">else</span> {</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// No explanation needed, we can request the permission.</span></div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h4 id=\"2-2&#x8BF7;&#x6C42;&#x6743;&#x9650;\"><a href=\"#2-2&#x8BF7;&#x6C42;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.2&#x8BF7;&#x6C42;&#x6743;&#x9650;\"></a>2.2&#x8BF7;&#x6C42;&#x6743;&#x9650;</h4><p>&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x65B9;&#x6CD5;&#x5206;&#x4E24;&#x79CD;<br>&#x4E00;&#x79CD;&#x662F;&#x5728;Activity&#x91CC;&#x9762;&#x8BF7;&#x6C42;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;<br>requestPermissions(final @NonNull Activity activity,<br>            final @NonNull String[] permissions, final int requestCode)<br>&#x4F20;&#x5165;&#x4E00;&#x4E2A;Activity, &#x4E00;&#x4E2A;permission&#x540D;&#x5B57;&#x7684;&#x6570;&#x7EC4;, &#x548C;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x7684;request code.<br>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x5F02;&#x6B65;&#x7684;,&#x5B83;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;, &#x5F53;&#x7528;&#x6237;&#x548C;dialog&#x4EA4;&#x4E92;&#x5B8C;&#x6210;&#x4E4B;&#x540E;,&#x7CFB;&#x7EDF;&#x4F1A;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;,&#x4F20;&#x56DE;&#x7528;&#x6237;&#x7684;&#x9009;&#x62E9;&#x7ED3;&#x679C;&#x548C;&#x5BF9;&#x5E94;&#x7684;request code.<br>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ActivityCompat.requestPermissions(CreateMeetActivity.<span class=\"keyword\">this</span>,<span class=\"keyword\">new</span> String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE);</div></pre></td></tr></table></figure></p>\n<p>&#x4E00;&#x79CD;&#x662F;&#x5728;Fragment&#x91CC;&#x9762;&#x8BF7;&#x6C42;<br>requestPermissions(@NonNull String[] permissions, int requestCode)<br>&#x5C11;&#x4E00;&#x4E2A;Activity&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4ED6;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x56DE;&#x8C03;&#x9700;&#x8981;&#x7279;&#x522B;&#x8BF4;&#x660E;&#xFF0C;&#x8FD8;&#x6709;fragment&#x5D4C;&#x5957;fragment&#x7684;&#x56DE;&#x8C03;&#x5904;&#x7406;&#x60C5;&#x51B5;&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x5355;&#x72EC;&#x8BF4;&#x660E;&#x3002;</p>\n<h4 id=\"2-3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\"><a href=\"#2-3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\" class=\"headerlink\" title=\"2.3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\"></a>2.3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;</h4><p>&#x5F53;&#x7528;&#x6237;&#x5BF9;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;dialog&#x505A;&#x51FA;&#x54CD;&#x5E94;&#x4E4B;&#x540E;,&#x7CFB;&#x7EDF;&#x4F1A;&#x8C03;&#x7528;onRequestPermissionsResult() &#x65B9;&#x6CD5;,&#x4F20;&#x56DE;&#x7528;&#x6237;&#x7684;&#x9009;&#x62E9;&#x7ED3;&#x679C;&#x548C;request code.<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x4E2D;request code&#x5373;&#x4E3A;&#x8C03;&#x7528;requestPermissions()&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;,&#x662F;app&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x503C;.<br>&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x53D6;&#x6D88;,&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x7EC4;&#x5C06;&#x4F1A;&#x4E3A;&#x7A7A;.<br>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRequestPermissionsResult</span><span class=\"params\">(<span class=\"keyword\">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class=\"keyword\">int</span>[] grantResults)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</div><div class=\"line\">        <span class=\"keyword\">switch</span> (requestCode) {</div><div class=\"line\">            <span class=\"keyword\">case</span> PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE: {</div><div class=\"line\">                <span class=\"comment\">// If request is cancelled, the result arrays are empty.</span></div><div class=\"line\">                <span class=\"keyword\">if</span> (grantResults.length &gt; <span class=\"number\">0</span>&amp;&amp; grantResults[<span class=\"number\">0</span>] == PackageManager.PERMISSION_GRANTED) {</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// permission was granted, yay! Do the</span></div><div class=\"line\">                    <span class=\"comment\">// contacts-related task you need to do.</span></div><div class=\"line\">                    goFileSelect();</div><div class=\"line\">                    Log.i(TAG, <span class=\"string\">&quot;user granted the permission!&quot;</span>);</div><div class=\"line\"></div><div class=\"line\">                } <span class=\"keyword\">else</span> {</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// permission denied, boo! Disable the</span></div><div class=\"line\">                    <span class=\"comment\">// functionality that depends on this permission.</span></div><div class=\"line\">                    Log.i(TAG, <span class=\"string\">&quot;user denied the permission!&quot;</span>);</div><div class=\"line\">                }</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// other &apos;case&apos; lines to check for other</span></div><div class=\"line\">            <span class=\"comment\">// permissions this app might request</span></div><div class=\"line\">        }</div></pre></td></tr></table></figure></p>\n<p>&#x5728;Fragment&#x4E2D;&#x7533;&#x8BF7;&#x6743;&#x9650;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;ActivityCompat.requestPermissions, &#x76F4;&#x63A5;&#x4F7F;&#x7528;Fragment&#x7684;requestPermissions&#x65B9;&#x6CD5;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x56DE;&#x8C03;&#x5230;Activity&#x7684; onRequestPermissionsResult<br>&#x5982;&#x679C;&#x5728;Fragment&#x4E2D;&#x5D4C;&#x5957;Fragment&#xFF0C;&#x5728;&#x5B50;Fragment&#x4E2D;&#x4F7F;&#x7528;requestPermissions&#x65B9; &#x6CD5;&#xFF0C;onRequestPermissionsResult&#x4E0D;&#x4F1A;&#x56DE;&#x8C03;&#x56DE;&#x6765;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; getParentFragment().requestPermissions&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x56DE;&#x8C03;&#x5230;&#x7236;Fragment&#x4E2D;&#x7684;onRequestPermissionsResult&#xFF0C;&#x52A0;&#x5165;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x628A;&#x56DE;&#x8C03;&#x900F;&#x4F20;&#x5230;&#x5B50;Fragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRequestPermissionsResult</span><span class=\"params\">(<span class=\"keyword\">int</span> requestCode, String[] permissions, <span class=\"keyword\">int</span>[] grantResults)</span> </span>{</div><div class=\"line\">      <span class=\"keyword\">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</div><div class=\"line\">      List&lt;Fragment&gt; fragments = getChildFragmentManager().getFragments();</div><div class=\"line\">      <span class=\"keyword\">if</span> (fragments != <span class=\"keyword\">null</span>) {</div><div class=\"line\">          <span class=\"keyword\">for</span> (Fragment fragment : fragments) {</div><div class=\"line\">              <span class=\"keyword\">if</span> (fragment != <span class=\"keyword\">null</span>) {</div><div class=\"line\">                  fragment.onRequestPermissionsResult(requestCode,permissions,grantResults);</div><div class=\"line\">              }</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h3 id=\"Android6-0&#x4EE5;&#x524D;\"><a href=\"#Android6-0&#x4EE5;&#x524D;\" class=\"headerlink\" title=\"Android6.0&#x4EE5;&#x524D;\"></a>Android6.0&#x4EE5;&#x524D;</h3><p>&#x6240;&#x6709;&#x6743;&#x9650;&#x90FD;&#x5728;&#x5B89;&#x88C5;&#x5E94;&#x7528;&#x65F6;&#x663E;&#x793A;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x7528;&#x6237;&#x9009;&#x62E9;&#x5B89;&#x88C5;&#x5219;&#x8868;&#x793A;&#x63A5;&#x53D7;&#x8FD9;&#x4E9B;&#x6743;&#x9650;&#xFF0C;&#x4E4B;&#x540E;&#x65E0;&#x6CD5;&#x64A4;&#x9500;&#x6388;&#x6743;&#x3002;</p>\n<h3 id=\"Android6-0&#x5F00;&#x59CB;\"><a href=\"#Android6-0&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"Android6.0&#x5F00;&#x59CB;\"></a>Android6.0&#x5F00;&#x59CB;</h3><p>&#x5728;&#x5B89;&#x88C5;&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x90E8;&#x5206;&#x5371;&#x9669;&#x6743;&#x9650;&#x4F1A;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x52FE;&#x9009;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x9009;&#x62E9;&#x6388;&#x6743;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5728;&#x5B89;&#x88C5;&#x4E4B;&#x540E;&#x8FDB;&#x5165;&#x8BBE;&#x7F6E;&#x64A4;&#x9500;&#x6388;&#x6743;&#x3002;<br>Dangerous permissions:</p>\n<ul>\n<li>CALENDAR<ul>\n<li>READ_CALENDAR</li>\n<li>WRITE_CALENDAR</li>\n</ul>\n</li>\n<li>CAMERA<ul>\n<li>READ_CALENDAR</li>\n<li>WRITE_CALENDAR</li>\n</ul>\n</li>\n<li>CONTACTS<ul>\n<li>READ_CONTACTS</li>\n<li>WRITE_CONTACTS</li>\n<li>GET_ACCOUNTS</li>\n</ul>\n</li>\n<li>LOCATION<ul>\n<li>ACCESS_FINE_LOCATION</li>\n<li>ACCESS_COARSE_LOCATION</li>\n</ul>\n</li>\n<li>MICROPHONE<ul>\n<li>RECORD_AUDIO</li>\n</ul>\n</li>\n<li>PHONE<ul>\n<li>READ_PHONE_STATE</li>\n<li>CALL_PHONE</li>\n<li>READ_CALL_LOG</li>\n<li>WRITE_CALL_LOG</li>\n<li>ADD_VOICEMAIL</li>\n<li>USE_SIP</li>\n<li>PROCESS_OUTGOING_CALLS</li>\n</ul>\n</li>\n<li>SENSORS<ul>\n<li>BODY_SENSORS</li>\n</ul>\n</li>\n<li>SMS<ul>\n<li>SEND_SMS</li>\n<li>RECEIVE_SMS</li>\n<li>READ_SMS</li>\n<li>RECEIVE_WAP_PUSH</li>\n<li>RECEIVE_MMS</li>\n</ul>\n</li>\n<li>STORAGE<ul>\n<li>READ_EXTERNAL_STORAGE</li>\n<li>WRITE_EXTERNAL_STORAGE</li>\n</ul>\n</li>\n</ul>\n<p>&#x6743;&#x9650;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;<a href=\"https://developer.android.com/reference/android/Manifest.permission.html\">&#x67E5;&#x770B;</a></p>\n<p>&#x60F3;&#x8981;&#x67E5;&#x770B;&#x6240;&#x6709;dangerous&#x7684;&#x6743;&#x9650;, &#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x547D;&#x4EE4;:<br><code>adb shell pm list permissions -g -d</code></p>\n<p>Guides&#x91CC;&#x9762;&#x7684;&#x539F;&#x6587;:</p>\n<ul>\n<li>If the device is running Android 6.0 (API level 23) or higher, and the app&#x2019;s targetSdkVersion is 23 or higher, the app requests permissions from the user at run-time. The user can revoke the permissions at any time, so the app needs to check whether it has the permissions every time it runs. For more information about requesting permissions in your app, see the Working with System Permissions training guide.</li>\n<li>If the device is running Android 5.1 (API level 22) or lower, or the app&#x2019;s targetSdkVersion is 22 or lower, the system asks the user to grant the permissions when the user installs the app. If you add a new permission to an updated version of the app, the system asks the user to grant that permission when the user updates the app. Once the user installs the app, the only way they can revoke the permission is by uninstalling the app.</li>\n</ul>\n<p>&#x53EA;&#x6709;&#x6EE1;&#x8DB3;targetSdkVersion&#x548C;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x8BBE;&#x5907;&#x7684;&#x7248;&#x672C;&#x90FD;&#x5728;23&#x53CA;&#x4EE5;&#x4E0A;&#x7684;&#x65F6;&#x5019;,&#x624D;&#x4F1A;&#x91C7;&#x7528;&#x65B0;&#x7684;&#x52A8;&#x6001;&#x6743;&#x9650;&#x673A;&#x5236;. &#x5176;&#x4ED6;&#x60C5;&#x51B5;, &#x8DDF;&#x4E4B;&#x524D;&#x4E00;&#x6837;, &#x5728;&#x5B89;&#x88C5;&#x548C;&#x5347;&#x7EA7;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x6388;&#x6743;&#x4E86;&#x6240;&#x6709;&#x7684;&#x6743;&#x9650;.<br>&#x5982;&#x679C;targetSdkVersion&#x5C0F;&#x4E8E;23,&#x5373;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;Android 6.0&#x53D1;&#x5E03;&#x4E4B;&#x524D;&#x5F00;&#x53D1;&#x7684;&#x5E94;&#x7528;, &#x8FD8;&#x6CA1;&#x6709;&#x517C;&#x5BB9;6.0.<br>&#x8FD9;&#x79CD;&#x5E94;&#x7528;&#x5373;&#x4FBF;&#x662F;&#x88AB;&#x88C5;&#x5728;Android 6.0&#x7684;&#x673A;&#x5668;&#x4E0A;,&#x4E5F;&#x662F;&#x91C7;&#x7528;&#x539F;&#x6765;&#x7684;&#x5B89;&#x88C5;&#x5373;&#x6388;&#x4E88;&#x6743;&#x9650;&#x903B;&#x8F91;, &#x6240;&#x6709;&#x6743;&#x9650;&#x5728;&#x5E94;&#x7528;&#x5B89;&#x88C5;&#x65F6;&#x5168;&#x90E8;&#x88AB;&#x6388;&#x6743;.<br>&#x5728;Android 6.0&#x7684;&#x8BBE;&#x5907;&#x4E0A;&#x5B89;&#x88C5;targetSdkVersion&#x5C0F;&#x4E8E;23&#x7684;&#x5E94;&#x7528;&#x4E4B;&#x540E;, &#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x4E2D;&#x67E5;&#x770B;,&#x53D1;&#x73B0;&#x6240;&#x6709;&#x7684;dangerous&#x6743;&#x9650;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x6253;&#x5F00;.<br>&#x4F46;&#x662F;&#x7528;&#x6237;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E;&#x4E2D;&#x7981;&#x7528;&#x6743;&#x9650;</p>\n<p>&#x56E0;&#x4E3A;&#x6743;&#x9650;&#x52A8;&#x6001;&#x68C0;&#x67E5;&#x76F8;&#x5173;&#x7684;API&#x662F;Android 6.0&#x624D;&#x52A0;&#x5165;&#x7684;, &#x6240;&#x4EE5;minSdkVersion&#x4E0D;&#x662F;23&#x65F6;,&#x63A8;&#x8350;&#x4F7F;&#x7528;SupportLibrary&#x6765;&#x5B9E;&#x73B0;,&#x597D;&#x5904;&#x662F;: &#x7A0B;&#x5E8F;&#x91CC;&#x4E0D;&#x5FC5;&#x52A0;if&#x6765;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8BBE;&#x5907;&#x7684;&#x7248;&#x672C;.support&#x7684;&#x5305;&#x5FC5;&#x987B;&#x662F;23&#x4EE5;&#x4E0A;&#x624D;&#x53EF;&#x4EE5;.</p>\n<p>&#x4E0B;&#x9762;&#x6765;&#x8BB2;&#x8BB2;&#x4EE3;&#x7801;&#x4E2D;&#x5982;&#x4F55;&#x9002;&#x914D;&#x8FD9;&#x79CD;&#x65B0;&#x7684;&#x6743;&#x9650;&#x673A;&#x5236;&#xFF1A;</p>\n<h3 id=\"1-&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\"><a href=\"#1-&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\" class=\"headerlink\" title=\"1.&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;\"></a>1.&#x68C0;&#x67E5;&#x6743;&#x9650;&#x72B6;&#x6001;</h3><p>&#x5982;&#x679C;&#x5728;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x4E00;&#x4E2A;dangerous permission&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x90FD;&#x5FC5;&#x987B;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#xFF0C;&#x56E0;&#x4E3A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x66F4;&#x6539;&#x6388;&#x6743;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;&#x68C0;&#x67E5;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x9009;&#x62E9;&#x7167;&#x7247;&#x5C31;&#x9700;&#x8981;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span>(PackageManager.PERMISSION_GRANTED == ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.READ_EXTERNAL_STORAGE)){</div><div class=\"line\">goImageSelect();</div><div class=\"line\">}<span class=\"keyword\">else</span>{</div><div class=\"line\"><span class=\"comment\">//do not have permission</span></div><div class=\"line\">}</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\"><a href=\"#2-&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;\"></a>2.&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;</h3><p>&#x5982;&#x679C;&#x4E0A;&#x9762;&#x7684;&#x5224;&#x65AD;&#x6CA1;&#x6709;&#x6743;&#x9650;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x7684;&#x8BF7;&#x6C42;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#xFF0C;Android&#x63D0;&#x4F9B;&#x4E86;&#x65B9;&#x6CD5;&#x6765;&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#xFF0C;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x4F1A;&#x5F39;&#x51FA;&#x6807;&#x51C6;&#x7684;dialog&#xFF0C;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;dialog&#x4E0D;&#x80FD;&#x88AB;&#x5B9A;&#x5236;&#x3002;</p>\n<h4 id=\"2-1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\"><a href=\"#2-1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;\"></a>2.1&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;</h4><p>&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;,&#x5F53;&#x7528;&#x6237;&#x62D2;&#x7EDD;&#x8FC7;&#x8FD9;&#x4E2A;&#x6743;&#x9650;,&#x4F46;&#x662F;&#x53C8;&#x7528;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;, &#x90A3;&#x4E48;&#x5F88;&#x53EF;&#x80FD;&#x7528;&#x6237;&#x4E0D;&#x662F;&#x5F88;&#x660E;&#x767D;&#x4E3A;&#x4EC0;&#x4E48;app&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x6743;&#x9650;, &#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5148;&#x5411;&#x7528;&#x6237;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;.<br>&#x4E3A;&#x4E86;&#x53D1;&#x73B0;&#x8FD9;&#x79CD;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x89E3;&#x91CA;&#x7684;&#x60C5;&#x5F62;, Android&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x7C7B;&#x65B9;&#x6CD5;: shouldShowRequestPermissionRationale()<br>&#x5982;&#x679C;app&#x4E4B;&#x524D;&#x8BF7;&#x6C42;&#x8FC7;&#x8BE5;&#x6743;&#x9650;,&#x88AB;&#x7528;&#x6237;&#x62D2;&#x7EDD;, &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;true.<br>&#x5982;&#x679C;&#x7528;&#x6237;&#x4E4B;&#x524D;&#x62D2;&#x7EDD;&#x6743;&#x9650;&#x7684;&#x65F6;&#x5019;&#x52FE;&#x9009;&#x4E86;&#x5BF9;&#x8BDD;&#x6846;&#x4E2D;&#x201D;Don&#x2019;t ask again&#x201D;&#x7684;&#x9009;&#x9879;,&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x8FD4;&#x56DE;false.<br>&#x5982;&#x679C;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x7981;&#x6B62;&#x5E94;&#x7528;&#x62E5;&#x6709;&#x8FD9;&#x6761;&#x6743;&#x9650;, &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x8FD4;&#x56DE;false.<br>&#x5177;&#x4F53;&#x89E3;&#x91CA;&#x539F;&#x56E0;&#x7684;&#x8FD9;&#x4E2A;dialog&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;, &#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//do not have permission</span></div><div class=\"line\"><span class=\"comment\">// Should we show an explanation?</span></div><div class=\"line\"><span class=\"keyword\">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.<span class=\"keyword\">this</span>,</div><div class=\"line\">            Manifest.permission.READ_CONTACTS)) {</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// Show an explanation to the user *asynchronously* -- don&apos;t block</span></div><div class=\"line\">        <span class=\"comment\">// this thread waiting for the user&apos;s response! After the user</span></div><div class=\"line\">        <span class=\"comment\">// sees the explanation, try again to request the permission.</span></div><div class=\"line\">        Log.i(DEBUG_TAG, <span class=\"string\">&quot;we should explain why we need this permission!&quot;</span>);</div><div class=\"line\">    } <span class=\"keyword\">else</span> {</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// No explanation needed, we can request the permission.</span></div><div class=\"line\">   }</div></pre></td></tr></table></figure>\n<h4 id=\"2-2&#x8BF7;&#x6C42;&#x6743;&#x9650;\"><a href=\"#2-2&#x8BF7;&#x6C42;&#x6743;&#x9650;\" class=\"headerlink\" title=\"2.2&#x8BF7;&#x6C42;&#x6743;&#x9650;\"></a>2.2&#x8BF7;&#x6C42;&#x6743;&#x9650;</h4><p>&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x65B9;&#x6CD5;&#x5206;&#x4E24;&#x79CD;<br>&#x4E00;&#x79CD;&#x662F;&#x5728;Activity&#x91CC;&#x9762;&#x8BF7;&#x6C42;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;<br>requestPermissions(final @NonNull Activity activity,<br>            final @NonNull String[] permissions, final int requestCode)<br>&#x4F20;&#x5165;&#x4E00;&#x4E2A;Activity, &#x4E00;&#x4E2A;permission&#x540D;&#x5B57;&#x7684;&#x6570;&#x7EC4;, &#x548C;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x7684;request code.<br>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x5F02;&#x6B65;&#x7684;,&#x5B83;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;, &#x5F53;&#x7528;&#x6237;&#x548C;dialog&#x4EA4;&#x4E92;&#x5B8C;&#x6210;&#x4E4B;&#x540E;,&#x7CFB;&#x7EDF;&#x4F1A;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;,&#x4F20;&#x56DE;&#x7528;&#x6237;&#x7684;&#x9009;&#x62E9;&#x7ED3;&#x679C;&#x548C;&#x5BF9;&#x5E94;&#x7684;request code.<br>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ActivityCompat.requestPermissions(CreateMeetActivity.<span class=\"keyword\">this</span>,<span class=\"keyword\">new</span> String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE);</div></pre></td></tr></table></figure></p>\n<p>&#x4E00;&#x79CD;&#x662F;&#x5728;Fragment&#x91CC;&#x9762;&#x8BF7;&#x6C42;<br>requestPermissions(@NonNull String[] permissions, int requestCode)<br>&#x5C11;&#x4E00;&#x4E2A;Activity&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x4ED6;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x56DE;&#x8C03;&#x9700;&#x8981;&#x7279;&#x522B;&#x8BF4;&#x660E;&#xFF0C;&#x8FD8;&#x6709;fragment&#x5D4C;&#x5957;fragment&#x7684;&#x56DE;&#x8C03;&#x5904;&#x7406;&#x60C5;&#x51B5;&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x5355;&#x72EC;&#x8BF4;&#x660E;&#x3002;</p>\n<h4 id=\"2-3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\"><a href=\"#2-3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\" class=\"headerlink\" title=\"2.3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;\"></a>2.3&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;&#x54CD;&#x5E94;</h4><p>&#x5F53;&#x7528;&#x6237;&#x5BF9;&#x8BF7;&#x6C42;&#x6743;&#x9650;&#x7684;dialog&#x505A;&#x51FA;&#x54CD;&#x5E94;&#x4E4B;&#x540E;,&#x7CFB;&#x7EDF;&#x4F1A;&#x8C03;&#x7528;onRequestPermissionsResult() &#x65B9;&#x6CD5;,&#x4F20;&#x56DE;&#x7528;&#x6237;&#x7684;&#x9009;&#x62E9;&#x7ED3;&#x679C;&#x548C;request code.<br>&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x4E2D;request code&#x5373;&#x4E3A;&#x8C03;&#x7528;requestPermissions()&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;,&#x662F;app&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x4E2A;&#x6574;&#x578B;&#x503C;.<br>&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x53D6;&#x6D88;,&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x7EC4;&#x5C06;&#x4F1A;&#x4E3A;&#x7A7A;.<br>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRequestPermissionsResult</span><span class=\"params\">(<span class=\"keyword\">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class=\"keyword\">int</span>[] grantResults)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</div><div class=\"line\">        <span class=\"keyword\">switch</span> (requestCode) {</div><div class=\"line\">            <span class=\"keyword\">case</span> PermissionCode.MY_PERMISSIONS_REQUEST_READ_EXTERNAL_STORAGE: {</div><div class=\"line\">                <span class=\"comment\">// If request is cancelled, the result arrays are empty.</span></div><div class=\"line\">                <span class=\"keyword\">if</span> (grantResults.length &gt; <span class=\"number\">0</span>&amp;&amp; grantResults[<span class=\"number\">0</span>] == PackageManager.PERMISSION_GRANTED) {</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// permission was granted, yay! Do the</span></div><div class=\"line\">                    <span class=\"comment\">// contacts-related task you need to do.</span></div><div class=\"line\">                    goFileSelect();</div><div class=\"line\">                    Log.i(TAG, <span class=\"string\">&quot;user granted the permission!&quot;</span>);</div><div class=\"line\"></div><div class=\"line\">                } <span class=\"keyword\">else</span> {</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// permission denied, boo! Disable the</span></div><div class=\"line\">                    <span class=\"comment\">// functionality that depends on this permission.</span></div><div class=\"line\">                    Log.i(TAG, <span class=\"string\">&quot;user denied the permission!&quot;</span>);</div><div class=\"line\">                }</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// other &apos;case&apos; lines to check for other</span></div><div class=\"line\">            <span class=\"comment\">// permissions this app might request</span></div><div class=\"line\">        }</div></pre></td></tr></table></figure></p>\n<p>&#x5728;Fragment&#x4E2D;&#x7533;&#x8BF7;&#x6743;&#x9650;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;ActivityCompat.requestPermissions, &#x76F4;&#x63A5;&#x4F7F;&#x7528;Fragment&#x7684;requestPermissions&#x65B9;&#x6CD5;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x56DE;&#x8C03;&#x5230;Activity&#x7684; onRequestPermissionsResult<br>&#x5982;&#x679C;&#x5728;Fragment&#x4E2D;&#x5D4C;&#x5957;Fragment&#xFF0C;&#x5728;&#x5B50;Fragment&#x4E2D;&#x4F7F;&#x7528;requestPermissions&#x65B9; &#x6CD5;&#xFF0C;onRequestPermissionsResult&#x4E0D;&#x4F1A;&#x56DE;&#x8C03;&#x56DE;&#x6765;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; getParentFragment().requestPermissions&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x56DE;&#x8C03;&#x5230;&#x7236;Fragment&#x4E2D;&#x7684;onRequestPermissionsResult&#xFF0C;&#x52A0;&#x5165;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x628A;&#x56DE;&#x8C03;&#x900F;&#x4F20;&#x5230;&#x5B50;Fragment</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onRequestPermissionsResult</span><span class=\"params\">(<span class=\"keyword\">int</span> requestCode, String[] permissions, <span class=\"keyword\">int</span>[] grantResults)</span> </span>{</div><div class=\"line\">      <span class=\"keyword\">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</div><div class=\"line\">      List&lt;Fragment&gt; fragments = getChildFragmentManager().getFragments();</div><div class=\"line\">      <span class=\"keyword\">if</span> (fragments != <span class=\"keyword\">null</span>) {</div><div class=\"line\">          <span class=\"keyword\">for</span> (Fragment fragment : fragments) {</div><div class=\"line\">              <span class=\"keyword\">if</span> (fragment != <span class=\"keyword\">null</span>) {</div><div class=\"line\">                  fragment.onRequestPermissionsResult(requestCode,permissions,grantResults);</div><div class=\"line\">              }</div><div class=\"line\">          }</div><div class=\"line\">      }</div><div class=\"line\">  }</div></pre></td></tr></table></figure>\n"},{"title":"仿ios下载控件","date":"2016-08-24T09:29:03.000Z","_content":"\n仿着做了个类似ios appstore下载按钮\n效果图如下：\n<img src=\"/2.gif\" width = \"300\" height = \"200\" alt=\"2\" align=center />\n### 1.创建自定义view\n代码中注释写的很全\n\n```java\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Rect;\nimport android.graphics.RectF;\nimport android.util.AttributeSet;\nimport android.view.View;\n\nimport com.tyky.edu.teacher.R;\n\n\n/**\n * Created by Dino on 8/18 0018.\n */\npublic class DownloadProgress extends View{\n    private int statue;\n    public static final int downloadStatue = 0;\n    public static final int progressStatue = 1;\n    public static final int finishStatue = 2;\n\n    private int width;// 控件的宽度\n    private int height;// 控件的高度\n    private int radius;// 圆形的半径\n    private int socktwidth = dp2px(2);// 圆环进度条的宽度\n    private Paint paint = new Paint();\n    private int progress = 70;// 百分比0~100;\n    private int textSize = dp2px(10);// 文字大小\n    private Bitmap bitmap;\n    @Deprecated\n    float scale = 0.35f;// 中间背景图片相对圆环的大小的比例\n    private int preColor = Color.parseColor(\"#ffffff\");// 进度条未完成的颜色\n    private int progressColor = Color.parseColor(\"#2DB6E6\");// 进度条颜色\n    private float paddingscale = 0.8f;// 控件内偏距占空间本身的比例\n    private int CircleColor = Color.parseColor(\"#ffffff\");// 圆中间的背景颜色\n    private int textColor = progressColor;// 文字颜色\n    private onProgressListener monProgress;// 进度时间监听\n    private int startAngle = 270;\n    RectF rectf = new RectF();\n\n    private Bitmap bitmpre;\n    private int whiteColor = Color.parseColor(\"#ffffff\");// 矩形中间的背景颜色\n\n    public DownloadProgress(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.DownloadProgress);\n        statue = a.getInteger(R.styleable.DownloadProgress_statue, 0);// 默认0\n\n        bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.square);\n        bitmpre = BitmapFactory.decodeResource(getResources(),R.drawable.download_pre);\n        width = bitmpre.getWidth();\n        height = bitmpre.getHeight();\n    }\n\n    public DownloadProgress(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)\n    {\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n        int reWidth;\n        int reHeight;\n        if (widthMode == MeasureSpec.EXACTLY)\n        {\n            reWidth = widthSize;\n        } else\n        {\n            int desired = (int) (getPaddingLeft() + width + getPaddingRight());\n            reWidth = desired;\n        }\n\n        if (heightMode == MeasureSpec.EXACTLY)\n        {\n            reHeight = heightSize;\n        } else\n        {\n            int desired = (int) (getPaddingTop() + height + getPaddingBottom());\n            reHeight = desired;\n        }\n\n        setMeasuredDimension(reWidth, reHeight);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        switch (statue){\n            case downloadStatue:\n                drawDownload(canvas);\n                break;\n            case progressStatue:\n                drawProgress(canvas);\n                break;\n            case finishStatue:\n                drawOpen(canvas);\n                break;\n        }\n\n        super.onDraw(canvas);\n    }\n\n    private void drawDownload(Canvas canvas){\n        //图片缩小显示\n        int scalse = 5;\n        Rect srcRect = new Rect(0,0,width,height);\n        Rect dstRect = new Rect(width/scalse,height/scalse,width/scalse,height/scalse);\n        canvas.drawBitmap(bitmpre,0,0,paint);\n        canvas.drawBitmap(bitmpre,srcRect,dstRect,paint);\n    }\n\n    private void drawOpen(Canvas canvas){\n        int border = 1;\n        int h = bitmpre.getHeight()/2;\n        RectF outRect = new RectF(0, h/2,width, h/2+h);\n        RectF inRect = new RectF(border,h/2+border,width-border,h/2+h-border);\n        paint.setAntiAlias(true);\n        paint.setColor(progressColor);\n        // 绘制外矩形\n        canvas.drawRoundRect(outRect,5,5, paint);\n        paint.setColor(whiteColor);\n        // 绘制内矩形\n        canvas.drawRoundRect(inRect,5,5, paint);\n        String v =\"打开\";\n        paint.setColor(textColor);\n        paint.setTextSize(textSize);\n        // 绘制中间文字\n        Paint.FontMetricsInt fontMetrics = paint.getFontMetricsInt();\n        int baseline = ((int)(inRect.bottom + inRect.top) - fontMetrics.bottom - fontMetrics.top) / 2;\n        // 下面这行是实现水平居中，drawText对应改为传入targetRect.centerX()\n        paint.setTextAlign(Paint.Align.CENTER);\n        canvas.drawText(v, inRect.centerX(), baseline, paint);\n    }\n\n    private void drawProgress(Canvas canvas){\n        int size = height;\n        if (height > width)\n            size = width;\n        radius = (int) (size * paddingscale / 2f);\n        paint.setAntiAlias(true);\n        paint.setColor(progressColor);\n        canvas.drawCircle(width / 2, height / 2, radius+2, paint);//画最外面的边线\n        paint.setColor(preColor);\n        // 绘制最大的圆 进度条圆环的背景颜色（未走到的进度）就是这个哦\n        canvas.drawCircle(width / 2, height / 2, radius, paint);\n        rectf.set((width - radius * 2) / 2f, (height - radius * 2) / 2f,\n                ((width - radius * 2) / 2f) + (2 * radius),\n                ((height - radius * 2) / 2f) + (2 * radius));\n        paint.setColor(progressColor);\n        canvas.drawArc(rectf, startAngle, progress * 3.6f, true, paint);\n        paint.setColor(CircleColor);\n        // 绘制用于遮住伞形两个边的小圆\n        canvas.drawCircle(width / 2, height / 2, radius - socktwidth, paint);\n        if (bitmap != null) {// 绘制中间的图片\n            int width2 = (int) (rectf.width() * scale);\n            int height2 = (int) (rectf.height() * scale);\n            rectf.set(rectf.left + width2, rectf.top + height2, rectf.right\n                    - width2, rectf.bottom - height2);\n            canvas.drawBitmap(bitmap, null, rectf, null);\n        }\n    }\n\n    public int dp2px(int dp) {\n        return (int) ((getResources().getDisplayMetrics().density * dp) + 0.5);\n    }\n\n    /**\n     * 设置进度\n     *\n     * @param progress\n     *            <p>\n     *            ps: 百分比 0~100;\n     */\n    public void setProgress(int progress) {\n        if (progress > 100)\n            return;\n        this.progress = progress;\n        invalidate();\n        if (monProgress != null)\n            monProgress.onProgress(progress);\n    }\n    /**\n     * 设置状态\n     *\n     */\n    public void setStatue(int statue) {\n        this.statue = statue;\n        invalidate();\n    }\n\n    /**\n     * 设置圆环进度条的宽度 px\n     */\n    public DownloadProgress setProdressWidth(int width) {\n        this.socktwidth = width;\n        return this;\n    }\n\n    /**\n     * 设置文字大小\n     *\n     * @param value\n     */\n    public DownloadProgress setTextSize(int value) {\n        textSize = value;\n        return this;\n    }\n\n    /**\n     * 设置文字大小\n     *\n     */\n    public DownloadProgress setTextColor(int color) {\n        this.textColor = color;\n        return this;\n    }\n\n    /**\n     * 设置进度条之前的颜色\n     *\n     */\n    public DownloadProgress setPreProgress(int precolor) {\n        this.preColor = precolor;\n        return this;\n    }\n\n    /**\n     * 设置进度颜色\n     *\n     * @param color\n     */\n    public DownloadProgress setProgressColor(int color) {\n        this.progressColor = color;\n        return this;\n    }\n\n    /**\n     * 设置圆心中间的背景颜色\n     *\n     * @param color\n     * @return\n     */\n    public DownloadProgress setCircleBackgroud(int color) {\n        this.CircleColor = color;\n        return this;\n    }\n\n    /**\n     * 设置圆相对整个控件的宽度或者高度的占用比例\n     *\n     * @param scale\n     */\n    public DownloadProgress setPaddingscale(float scale) {\n        this.paddingscale = scale;\n        return this;\n    }\n\n    /**\n     * 设置开始的位置\n     *\n     * @param startAngle\n     *            0~360\n     *            <p>\n     *            ps 0代表在最右边 90 最下方 按照然后顺时针旋转\n     */\n    public DownloadProgress setStartAngle(int startAngle) {\n        this.startAngle = startAngle;\n        return this;\n    }\n\n    public interface onProgressListener {\n        void onProgress(int value);\n    }\n}\n\n```\n\n\n### 2.在attrs文件添加如下代码\n\n```java\n<declare-styleable name=\"DownloadProgress\">\n        <!-- 状态0未下载 1下载中 2下载完成 -->\n        <attr name=\"statue\" format=\"integer\" />\n    </declare-styleable>\n```\n\n\n### 3.使用方法\n\n在xml布局中：\n```java\n<com.tyky.edu.teacher.ui.DownloadProgress\n            android:id=\"@+id/download_btn\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:gravity=\"center\"\n            app:statue=\"1\"\n            android:layout_marginRight=\"10dp\" />\n```\n\n记得在父布局加上`xmlns:android=\"http://schemas.android.com/apk/res/android\"`\n\n下载回调的时候setStatue()来更改状态，setProgress更改进度值\n\n\n还有可以优化的地方，加上状态切换的动画，后面有时间再做。","source":"_posts/仿ios下载控件.md","raw":"---\ntitle: 仿ios下载控件\ndate: 2016-08-24 17:29:03\ntags: Android\n---\n\n仿着做了个类似ios appstore下载按钮\n效果图如下：\n<img src=\"/2.gif\" width = \"300\" height = \"200\" alt=\"2\" align=center />\n### 1.创建自定义view\n代码中注释写的很全\n\n```java\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Rect;\nimport android.graphics.RectF;\nimport android.util.AttributeSet;\nimport android.view.View;\n\nimport com.tyky.edu.teacher.R;\n\n\n/**\n * Created by Dino on 8/18 0018.\n */\npublic class DownloadProgress extends View{\n    private int statue;\n    public static final int downloadStatue = 0;\n    public static final int progressStatue = 1;\n    public static final int finishStatue = 2;\n\n    private int width;// 控件的宽度\n    private int height;// 控件的高度\n    private int radius;// 圆形的半径\n    private int socktwidth = dp2px(2);// 圆环进度条的宽度\n    private Paint paint = new Paint();\n    private int progress = 70;// 百分比0~100;\n    private int textSize = dp2px(10);// 文字大小\n    private Bitmap bitmap;\n    @Deprecated\n    float scale = 0.35f;// 中间背景图片相对圆环的大小的比例\n    private int preColor = Color.parseColor(\"#ffffff\");// 进度条未完成的颜色\n    private int progressColor = Color.parseColor(\"#2DB6E6\");// 进度条颜色\n    private float paddingscale = 0.8f;// 控件内偏距占空间本身的比例\n    private int CircleColor = Color.parseColor(\"#ffffff\");// 圆中间的背景颜色\n    private int textColor = progressColor;// 文字颜色\n    private onProgressListener monProgress;// 进度时间监听\n    private int startAngle = 270;\n    RectF rectf = new RectF();\n\n    private Bitmap bitmpre;\n    private int whiteColor = Color.parseColor(\"#ffffff\");// 矩形中间的背景颜色\n\n    public DownloadProgress(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.DownloadProgress);\n        statue = a.getInteger(R.styleable.DownloadProgress_statue, 0);// 默认0\n\n        bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.square);\n        bitmpre = BitmapFactory.decodeResource(getResources(),R.drawable.download_pre);\n        width = bitmpre.getWidth();\n        height = bitmpre.getHeight();\n    }\n\n    public DownloadProgress(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)\n    {\n        int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        int heightMode = MeasureSpec.getMode(heightMeasureSpec);\n        int heightSize = MeasureSpec.getSize(heightMeasureSpec);\n        int reWidth;\n        int reHeight;\n        if (widthMode == MeasureSpec.EXACTLY)\n        {\n            reWidth = widthSize;\n        } else\n        {\n            int desired = (int) (getPaddingLeft() + width + getPaddingRight());\n            reWidth = desired;\n        }\n\n        if (heightMode == MeasureSpec.EXACTLY)\n        {\n            reHeight = heightSize;\n        } else\n        {\n            int desired = (int) (getPaddingTop() + height + getPaddingBottom());\n            reHeight = desired;\n        }\n\n        setMeasuredDimension(reWidth, reHeight);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        switch (statue){\n            case downloadStatue:\n                drawDownload(canvas);\n                break;\n            case progressStatue:\n                drawProgress(canvas);\n                break;\n            case finishStatue:\n                drawOpen(canvas);\n                break;\n        }\n\n        super.onDraw(canvas);\n    }\n\n    private void drawDownload(Canvas canvas){\n        //图片缩小显示\n        int scalse = 5;\n        Rect srcRect = new Rect(0,0,width,height);\n        Rect dstRect = new Rect(width/scalse,height/scalse,width/scalse,height/scalse);\n        canvas.drawBitmap(bitmpre,0,0,paint);\n        canvas.drawBitmap(bitmpre,srcRect,dstRect,paint);\n    }\n\n    private void drawOpen(Canvas canvas){\n        int border = 1;\n        int h = bitmpre.getHeight()/2;\n        RectF outRect = new RectF(0, h/2,width, h/2+h);\n        RectF inRect = new RectF(border,h/2+border,width-border,h/2+h-border);\n        paint.setAntiAlias(true);\n        paint.setColor(progressColor);\n        // 绘制外矩形\n        canvas.drawRoundRect(outRect,5,5, paint);\n        paint.setColor(whiteColor);\n        // 绘制内矩形\n        canvas.drawRoundRect(inRect,5,5, paint);\n        String v =\"打开\";\n        paint.setColor(textColor);\n        paint.setTextSize(textSize);\n        // 绘制中间文字\n        Paint.FontMetricsInt fontMetrics = paint.getFontMetricsInt();\n        int baseline = ((int)(inRect.bottom + inRect.top) - fontMetrics.bottom - fontMetrics.top) / 2;\n        // 下面这行是实现水平居中，drawText对应改为传入targetRect.centerX()\n        paint.setTextAlign(Paint.Align.CENTER);\n        canvas.drawText(v, inRect.centerX(), baseline, paint);\n    }\n\n    private void drawProgress(Canvas canvas){\n        int size = height;\n        if (height > width)\n            size = width;\n        radius = (int) (size * paddingscale / 2f);\n        paint.setAntiAlias(true);\n        paint.setColor(progressColor);\n        canvas.drawCircle(width / 2, height / 2, radius+2, paint);//画最外面的边线\n        paint.setColor(preColor);\n        // 绘制最大的圆 进度条圆环的背景颜色（未走到的进度）就是这个哦\n        canvas.drawCircle(width / 2, height / 2, radius, paint);\n        rectf.set((width - radius * 2) / 2f, (height - radius * 2) / 2f,\n                ((width - radius * 2) / 2f) + (2 * radius),\n                ((height - radius * 2) / 2f) + (2 * radius));\n        paint.setColor(progressColor);\n        canvas.drawArc(rectf, startAngle, progress * 3.6f, true, paint);\n        paint.setColor(CircleColor);\n        // 绘制用于遮住伞形两个边的小圆\n        canvas.drawCircle(width / 2, height / 2, radius - socktwidth, paint);\n        if (bitmap != null) {// 绘制中间的图片\n            int width2 = (int) (rectf.width() * scale);\n            int height2 = (int) (rectf.height() * scale);\n            rectf.set(rectf.left + width2, rectf.top + height2, rectf.right\n                    - width2, rectf.bottom - height2);\n            canvas.drawBitmap(bitmap, null, rectf, null);\n        }\n    }\n\n    public int dp2px(int dp) {\n        return (int) ((getResources().getDisplayMetrics().density * dp) + 0.5);\n    }\n\n    /**\n     * 设置进度\n     *\n     * @param progress\n     *            <p>\n     *            ps: 百分比 0~100;\n     */\n    public void setProgress(int progress) {\n        if (progress > 100)\n            return;\n        this.progress = progress;\n        invalidate();\n        if (monProgress != null)\n            monProgress.onProgress(progress);\n    }\n    /**\n     * 设置状态\n     *\n     */\n    public void setStatue(int statue) {\n        this.statue = statue;\n        invalidate();\n    }\n\n    /**\n     * 设置圆环进度条的宽度 px\n     */\n    public DownloadProgress setProdressWidth(int width) {\n        this.socktwidth = width;\n        return this;\n    }\n\n    /**\n     * 设置文字大小\n     *\n     * @param value\n     */\n    public DownloadProgress setTextSize(int value) {\n        textSize = value;\n        return this;\n    }\n\n    /**\n     * 设置文字大小\n     *\n     */\n    public DownloadProgress setTextColor(int color) {\n        this.textColor = color;\n        return this;\n    }\n\n    /**\n     * 设置进度条之前的颜色\n     *\n     */\n    public DownloadProgress setPreProgress(int precolor) {\n        this.preColor = precolor;\n        return this;\n    }\n\n    /**\n     * 设置进度颜色\n     *\n     * @param color\n     */\n    public DownloadProgress setProgressColor(int color) {\n        this.progressColor = color;\n        return this;\n    }\n\n    /**\n     * 设置圆心中间的背景颜色\n     *\n     * @param color\n     * @return\n     */\n    public DownloadProgress setCircleBackgroud(int color) {\n        this.CircleColor = color;\n        return this;\n    }\n\n    /**\n     * 设置圆相对整个控件的宽度或者高度的占用比例\n     *\n     * @param scale\n     */\n    public DownloadProgress setPaddingscale(float scale) {\n        this.paddingscale = scale;\n        return this;\n    }\n\n    /**\n     * 设置开始的位置\n     *\n     * @param startAngle\n     *            0~360\n     *            <p>\n     *            ps 0代表在最右边 90 最下方 按照然后顺时针旋转\n     */\n    public DownloadProgress setStartAngle(int startAngle) {\n        this.startAngle = startAngle;\n        return this;\n    }\n\n    public interface onProgressListener {\n        void onProgress(int value);\n    }\n}\n\n```\n\n\n### 2.在attrs文件添加如下代码\n\n```java\n<declare-styleable name=\"DownloadProgress\">\n        <!-- 状态0未下载 1下载中 2下载完成 -->\n        <attr name=\"statue\" format=\"integer\" />\n    </declare-styleable>\n```\n\n\n### 3.使用方法\n\n在xml布局中：\n```java\n<com.tyky.edu.teacher.ui.DownloadProgress\n            android:id=\"@+id/download_btn\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:gravity=\"center\"\n            app:statue=\"1\"\n            android:layout_marginRight=\"10dp\" />\n```\n\n记得在父布局加上`xmlns:android=\"http://schemas.android.com/apk/res/android\"`\n\n下载回调的时候setStatue()来更改状态，setProgress更改进度值\n\n\n还有可以优化的地方，加上状态切换的动画，后面有时间再做。","slug":"仿ios下载控件","published":1,"updated":"2016-08-25T01:23:06.524Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwh8000fpkm8btnqonru","content":"<p>&#x4EFF;&#x7740;&#x505A;&#x4E86;&#x4E2A;&#x7C7B;&#x4F3C;ios appstore&#x4E0B;&#x8F7D;&#x6309;&#x94AE;<br>&#x6548;&#x679C;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"/2016/08/24/&#x4EFF;ios&#x4E0B;&#x8F7D;&#x63A7;&#x4EF6;/2.gif\" width=\"300\" height=\"200\" alt=\"2\" align=\"center\"></p>\n<h3 id=\"1-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\"><a href=\"#1-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\" class=\"headerlink\" title=\"1.&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\"></a>1.&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view</h3><p>&#x4EE3;&#x7801;&#x4E2D;&#x6CE8;&#x91CA;&#x5199;&#x7684;&#x5F88;&#x5168;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.BitmapFactory;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Color;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Paint;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Rect;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.RectF;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.tyky.edu.teacher.R;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/18 0018.</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DownloadProgress</span> <span class=\"keyword\">extends</span> <span class=\"title\">View</span></span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statue;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> downloadStatue = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> progressStatue = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> finishStatue = <span class=\"number\">2</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> width;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> height;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x7684;&#x9AD8;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> radius;<span class=\"comment\">// &#x5706;&#x5F62;&#x7684;&#x534A;&#x5F84;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> socktwidth = dp2px(<span class=\"number\">2</span>);<span class=\"comment\">// &#x5706;&#x73AF;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x5BBD;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Paint paint = <span class=\"keyword\">new</span> Paint();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> progress = <span class=\"number\">70</span>;<span class=\"comment\">// &#x767E;&#x5206;&#x6BD4;0~100;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> textSize = dp2px(<span class=\"number\">10</span>);<span class=\"comment\">// &#x6587;&#x5B57;&#x5927;&#x5C0F;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Bitmap bitmap;</div><div class=\"line\">    <span class=\"meta\">@Deprecated</span></div><div class=\"line\">    <span class=\"keyword\">float</span> scale = <span class=\"number\">0.35f</span>;<span class=\"comment\">// &#x4E2D;&#x95F4;&#x80CC;&#x666F;&#x56FE;&#x7247;&#x76F8;&#x5BF9;&#x5706;&#x73AF;&#x7684;&#x5927;&#x5C0F;&#x7684;&#x6BD4;&#x4F8B;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> preColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x6761;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> progressColor = Color.parseColor(<span class=\"string\">&quot;#2DB6E6&quot;</span>);<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x6761;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> paddingscale = <span class=\"number\">0.8f</span>;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x5185;&#x504F;&#x8DDD;&#x5360;&#x7A7A;&#x95F4;&#x672C;&#x8EAB;&#x7684;&#x6BD4;&#x4F8B;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> CircleColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x5706;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> textColor = progressColor;<span class=\"comment\">// &#x6587;&#x5B57;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> onProgressListener monProgress;<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x65F6;&#x95F4;&#x76D1;&#x542C;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> startAngle = <span class=\"number\">270</span>;</div><div class=\"line\">    RectF rectf = <span class=\"keyword\">new</span> RectF();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Bitmap bitmpre;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> whiteColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x77E9;&#x5F62;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DownloadProgress</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.DownloadProgress);</div><div class=\"line\">        statue = a.getInteger(R.styleable.DownloadProgress_statue, <span class=\"number\">0</span>);<span class=\"comment\">// &#x9ED8;&#x8BA4;0</span></div><div class=\"line\"></div><div class=\"line\">        bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.square);</div><div class=\"line\">        bitmpre = BitmapFactory.decodeResource(getResources(),R.drawable.download_pre);</div><div class=\"line\">        width = bitmpre.getWidth();</div><div class=\"line\">        height = bitmpre.getHeight();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DownloadProgress</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span></span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> reWidth;</div><div class=\"line\">        <span class=\"keyword\">int</span> reHeight;</div><div class=\"line\">        <span class=\"keyword\">if</span> (widthMode == MeasureSpec.EXACTLY)</div><div class=\"line\">        {</div><div class=\"line\">            reWidth = widthSize;</div><div class=\"line\">        } <span class=\"keyword\">else</span></div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"keyword\">int</span> desired = (<span class=\"keyword\">int</span>) (getPaddingLeft() + width + getPaddingRight());</div><div class=\"line\">            reWidth = desired;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (heightMode == MeasureSpec.EXACTLY)</div><div class=\"line\">        {</div><div class=\"line\">            reHeight = heightSize;</div><div class=\"line\">        } <span class=\"keyword\">else</span></div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"keyword\">int</span> desired = (<span class=\"keyword\">int</span>) (getPaddingTop() + height + getPaddingBottom());</div><div class=\"line\">            reHeight = desired;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        setMeasuredDimension(reWidth, reHeight);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDraw</span><span class=\"params\">(Canvas canvas)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">switch</span> (statue){</div><div class=\"line\">            <span class=\"keyword\">case</span> downloadStatue:</div><div class=\"line\">                drawDownload(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> progressStatue:</div><div class=\"line\">                drawProgress(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> finishStatue:</div><div class=\"line\">                drawOpen(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">super</span>.onDraw(canvas);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawDownload</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"comment\">//&#x56FE;&#x7247;&#x7F29;&#x5C0F;&#x663E;&#x793A;</span></div><div class=\"line\">        <span class=\"keyword\">int</span> scalse = <span class=\"number\">5</span>;</div><div class=\"line\">        Rect srcRect = <span class=\"keyword\">new</span> Rect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,width,height);</div><div class=\"line\">        Rect dstRect = <span class=\"keyword\">new</span> Rect(width/scalse,height/scalse,width/scalse,height/scalse);</div><div class=\"line\">        canvas.drawBitmap(bitmpre,<span class=\"number\">0</span>,<span class=\"number\">0</span>,paint);</div><div class=\"line\">        canvas.drawBitmap(bitmpre,srcRect,dstRect,paint);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawOpen</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> border = <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> h = bitmpre.getHeight()/<span class=\"number\">2</span>;</div><div class=\"line\">        RectF outRect = <span class=\"keyword\">new</span> RectF(<span class=\"number\">0</span>, h/<span class=\"number\">2</span>,width, h/<span class=\"number\">2</span>+h);</div><div class=\"line\">        RectF inRect = <span class=\"keyword\">new</span> RectF(border,h/<span class=\"number\">2</span>+border,width-border,h/<span class=\"number\">2</span>+h-border);</div><div class=\"line\">        paint.setAntiAlias(<span class=\"keyword\">true</span>);</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x5916;&#x77E9;&#x5F62;</span></div><div class=\"line\">        canvas.drawRoundRect(outRect,<span class=\"number\">5</span>,<span class=\"number\">5</span>, paint);</div><div class=\"line\">        paint.setColor(whiteColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x5185;&#x77E9;&#x5F62;</span></div><div class=\"line\">        canvas.drawRoundRect(inRect,<span class=\"number\">5</span>,<span class=\"number\">5</span>, paint);</div><div class=\"line\">        String v =<span class=\"string\">&quot;&#x6253;&#x5F00;&quot;</span>;</div><div class=\"line\">        paint.setColor(textColor);</div><div class=\"line\">        paint.setTextSize(textSize);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x4E2D;&#x95F4;&#x6587;&#x5B57;</span></div><div class=\"line\">        Paint.FontMetricsInt fontMetrics = paint.getFontMetricsInt();</div><div class=\"line\">        <span class=\"keyword\">int</span> baseline = ((<span class=\"keyword\">int</span>)(inRect.bottom + inRect.top) - fontMetrics.bottom - fontMetrics.top) / <span class=\"number\">2</span>;</div><div class=\"line\">        <span class=\"comment\">// &#x4E0B;&#x9762;&#x8FD9;&#x884C;&#x662F;&#x5B9E;&#x73B0;&#x6C34;&#x5E73;&#x5C45;&#x4E2D;&#xFF0C;drawText&#x5BF9;&#x5E94;&#x6539;&#x4E3A;&#x4F20;&#x5165;targetRect.centerX()</span></div><div class=\"line\">        paint.setTextAlign(Paint.Align.CENTER);</div><div class=\"line\">        canvas.drawText(v, inRect.centerX(), baseline, paint);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawProgress</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> size = height;</div><div class=\"line\">        <span class=\"keyword\">if</span> (height &gt; width)</div><div class=\"line\">            size = width;</div><div class=\"line\">        radius = (<span class=\"keyword\">int</span>) (size * paddingscale / <span class=\"number\">2f</span>);</div><div class=\"line\">        paint.setAntiAlias(<span class=\"keyword\">true</span>);</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius+<span class=\"number\">2</span>, paint);<span class=\"comment\">//&#x753B;&#x6700;&#x5916;&#x9762;&#x7684;&#x8FB9;&#x7EBF;</span></div><div class=\"line\">        paint.setColor(preColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x6700;&#x5927;&#x7684;&#x5706; &#x8FDB;&#x5EA6;&#x6761;&#x5706;&#x73AF;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;&#xFF08;&#x672A;&#x8D70;&#x5230;&#x7684;&#x8FDB;&#x5EA6;&#xFF09;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x54E6;</span></div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius, paint);</div><div class=\"line\">        rectf.set((width - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>, (height - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>,</div><div class=\"line\">                ((width - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>) + (<span class=\"number\">2</span> * radius),</div><div class=\"line\">                ((height - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>) + (<span class=\"number\">2</span> * radius));</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        canvas.drawArc(rectf, startAngle, progress * <span class=\"number\">3.6f</span>, <span class=\"keyword\">true</span>, paint);</div><div class=\"line\">        paint.setColor(CircleColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x7528;&#x4E8E;&#x906E;&#x4F4F;&#x4F1E;&#x5F62;&#x4E24;&#x4E2A;&#x8FB9;&#x7684;&#x5C0F;&#x5706;</span></div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius - socktwidth, paint);</div><div class=\"line\">        <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) {<span class=\"comment\">// &#x7ED8;&#x5236;&#x4E2D;&#x95F4;&#x7684;&#x56FE;&#x7247;</span></div><div class=\"line\">            <span class=\"keyword\">int</span> width2 = (<span class=\"keyword\">int</span>) (rectf.width() * scale);</div><div class=\"line\">            <span class=\"keyword\">int</span> height2 = (<span class=\"keyword\">int</span>) (rectf.height() * scale);</div><div class=\"line\">            rectf.set(rectf.left + width2, rectf.top + height2, rectf.right</div><div class=\"line\">                    - width2, rectf.bottom - height2);</div><div class=\"line\">            canvas.drawBitmap(bitmap, <span class=\"keyword\">null</span>, rectf, <span class=\"keyword\">null</span>);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">dp2px</span><span class=\"params\">(<span class=\"keyword\">int</span> dp)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">int</span>) ((getResources().getDisplayMetrics().density * dp) + <span class=\"number\">0.5</span>);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> progress</div><div class=\"line\">     *            &lt;p&gt;</div><div class=\"line\">     *            ps: &#x767E;&#x5206;&#x6BD4; 0~100;</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> progress)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">if</span> (progress &gt; <span class=\"number\">100</span>)</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        <span class=\"keyword\">this</span>.progress = progress;</div><div class=\"line\">        invalidate();</div><div class=\"line\">        <span class=\"keyword\">if</span> (monProgress != <span class=\"keyword\">null</span>)</div><div class=\"line\">            monProgress.onProgress(progress);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x72B6;&#x6001;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStatue</span><span class=\"params\">(<span class=\"keyword\">int</span> statue)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.statue = statue;</div><div class=\"line\">        invalidate();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x73AF;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x5BBD;&#x5EA6; px</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setProdressWidth</span><span class=\"params\">(<span class=\"keyword\">int</span> width)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.socktwidth = width;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x5927;&#x5C0F;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> value</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setTextSize</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>{</div><div class=\"line\">        textSize = value;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x5927;&#x5C0F;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.textColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;&#x6761;&#x4E4B;&#x524D;&#x7684;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setPreProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> precolor)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.preColor = precolor;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> color</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setProgressColor</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.progressColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x5FC3;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> color</div><div class=\"line\">     * <span class=\"doctag\">@return</span></div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setCircleBackgroud</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.CircleColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x76F8;&#x5BF9;&#x6574;&#x4E2A;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x5EA6;&#x6216;&#x8005;&#x9AD8;&#x5EA6;&#x7684;&#x5360;&#x7528;&#x6BD4;&#x4F8B;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> scale</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setPaddingscale</span><span class=\"params\">(<span class=\"keyword\">float</span> scale)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.paddingscale = scale;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> startAngle</div><div class=\"line\">     *            0~360</div><div class=\"line\">     *            &lt;p&gt;</div><div class=\"line\">     *            ps 0&#x4EE3;&#x8868;&#x5728;&#x6700;&#x53F3;&#x8FB9; 90 &#x6700;&#x4E0B;&#x65B9; &#x6309;&#x7167;&#x7136;&#x540E;&#x987A;&#x65F6;&#x9488;&#x65CB;&#x8F6C;</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setStartAngle</span><span class=\"params\">(<span class=\"keyword\">int</span> startAngle)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.startAngle = startAngle;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">onProgressListener</span> </span>{</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span></span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"2-&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\"><a href=\"#2-&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"2.&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\"></a>2.&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;declare-styleable name=&quot;DownloadProgress&quot;&gt;</div><div class=\"line\">        &lt;!-- &#x72B6;&#x6001;0&#x672A;&#x4E0B;&#x8F7D; 1&#x4E0B;&#x8F7D;&#x4E2D; 2&#x4E0B;&#x8F7D;&#x5B8C;&#x6210; --&gt;</div><div class=\"line\">        &lt;attr name=&quot;statue&quot; format=&quot;integer&quot; /&gt;</div><div class=\"line\">    &lt;/declare-styleable&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\"><a href=\"#3-&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"3.&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\"></a>3.&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h3><p>&#x5728;xml&#x5E03;&#x5C40;&#x4E2D;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.tyky.edu.teacher.ui.DownloadProgress</div><div class=\"line\">            android:id=<span class=\"string\">&quot;@+id/download_btn&quot;</span></div><div class=\"line\">            android:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">            android:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">            android:layout_centerVertical=<span class=\"string\">&quot;true&quot;</span></div><div class=\"line\">            android:gravity=<span class=\"string\">&quot;center&quot;</span></div><div class=\"line\">            app:statue=<span class=\"string\">&quot;1&quot;</span></div><div class=\"line\">            android:layout_marginRight=<span class=\"string\">&quot;10dp&quot;</span> /&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x8BB0;&#x5F97;&#x5728;&#x7236;&#x5E03;&#x5C40;&#x52A0;&#x4E0A;<code>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</code></p>\n<p>&#x4E0B;&#x8F7D;&#x56DE;&#x8C03;&#x7684;&#x65F6;&#x5019;setStatue()&#x6765;&#x66F4;&#x6539;&#x72B6;&#x6001;&#xFF0C;setProgress&#x66F4;&#x6539;&#x8FDB;&#x5EA6;&#x503C;</p>\n<p>&#x8FD8;&#x6709;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x52A0;&#x4E0A;&#x72B6;&#x6001;&#x5207;&#x6362;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x540E;&#x9762;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x505A;&#x3002;</p>\n","excerpt":"","more":"<p>&#x4EFF;&#x7740;&#x505A;&#x4E86;&#x4E2A;&#x7C7B;&#x4F3C;ios appstore&#x4E0B;&#x8F7D;&#x6309;&#x94AE;<br>&#x6548;&#x679C;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"/2016/08/24/&#x4EFF;ios&#x4E0B;&#x8F7D;&#x63A7;&#x4EF6;/2.gif\" width=\"300\" height=\"200\" alt=\"2\" align=\"center\"></p>\n<h3 id=\"1-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\"><a href=\"#1-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\" class=\"headerlink\" title=\"1.&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view\"></a>1.&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;view</h3><p>&#x4EE3;&#x7801;&#x4E2D;&#x6CE8;&#x91CA;&#x5199;&#x7684;&#x5F88;&#x5168;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.BitmapFactory;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Color;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Paint;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Rect;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.RectF;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.tyky.edu.teacher.R;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/18 0018.</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DownloadProgress</span> <span class=\"keyword\">extends</span> <span class=\"title\">View</span></span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statue;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> downloadStatue = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> progressStatue = <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> finishStatue = <span class=\"number\">2</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> width;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> height;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x7684;&#x9AD8;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> radius;<span class=\"comment\">// &#x5706;&#x5F62;&#x7684;&#x534A;&#x5F84;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> socktwidth = dp2px(<span class=\"number\">2</span>);<span class=\"comment\">// &#x5706;&#x73AF;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x5BBD;&#x5EA6;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Paint paint = <span class=\"keyword\">new</span> Paint();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> progress = <span class=\"number\">70</span>;<span class=\"comment\">// &#x767E;&#x5206;&#x6BD4;0~100;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> textSize = dp2px(<span class=\"number\">10</span>);<span class=\"comment\">// &#x6587;&#x5B57;&#x5927;&#x5C0F;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Bitmap bitmap;</div><div class=\"line\">    <span class=\"meta\">@Deprecated</span></div><div class=\"line\">    <span class=\"keyword\">float</span> scale = <span class=\"number\">0.35f</span>;<span class=\"comment\">// &#x4E2D;&#x95F4;&#x80CC;&#x666F;&#x56FE;&#x7247;&#x76F8;&#x5BF9;&#x5706;&#x73AF;&#x7684;&#x5927;&#x5C0F;&#x7684;&#x6BD4;&#x4F8B;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> preColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x6761;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> progressColor = Color.parseColor(<span class=\"string\">&quot;#2DB6E6&quot;</span>);<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x6761;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> paddingscale = <span class=\"number\">0.8f</span>;<span class=\"comment\">// &#x63A7;&#x4EF6;&#x5185;&#x504F;&#x8DDD;&#x5360;&#x7A7A;&#x95F4;&#x672C;&#x8EAB;&#x7684;&#x6BD4;&#x4F8B;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> CircleColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x5706;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> textColor = progressColor;<span class=\"comment\">// &#x6587;&#x5B57;&#x989C;&#x8272;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> onProgressListener monProgress;<span class=\"comment\">// &#x8FDB;&#x5EA6;&#x65F6;&#x95F4;&#x76D1;&#x542C;</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> startAngle = <span class=\"number\">270</span>;</div><div class=\"line\">    RectF rectf = <span class=\"keyword\">new</span> RectF();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> Bitmap bitmpre;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> whiteColor = Color.parseColor(<span class=\"string\">&quot;#ffffff&quot;</span>);<span class=\"comment\">// &#x77E9;&#x5F62;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DownloadProgress</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.DownloadProgress);</div><div class=\"line\">        statue = a.getInteger(R.styleable.DownloadProgress_statue, <span class=\"number\">0</span>);<span class=\"comment\">// &#x9ED8;&#x8BA4;0</span></div><div class=\"line\"></div><div class=\"line\">        bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.square);</div><div class=\"line\">        bitmpre = BitmapFactory.decodeResource(getResources(),R.drawable.download_pre);</div><div class=\"line\">        width = bitmpre.getWidth();</div><div class=\"line\">        height = bitmpre.getHeight();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DownloadProgress</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span></span></div><div class=\"line\">    {</div><div class=\"line\">        <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec);</div><div class=\"line\">        <span class=\"keyword\">int</span> reWidth;</div><div class=\"line\">        <span class=\"keyword\">int</span> reHeight;</div><div class=\"line\">        <span class=\"keyword\">if</span> (widthMode == MeasureSpec.EXACTLY)</div><div class=\"line\">        {</div><div class=\"line\">            reWidth = widthSize;</div><div class=\"line\">        } <span class=\"keyword\">else</span></div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"keyword\">int</span> desired = (<span class=\"keyword\">int</span>) (getPaddingLeft() + width + getPaddingRight());</div><div class=\"line\">            reWidth = desired;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (heightMode == MeasureSpec.EXACTLY)</div><div class=\"line\">        {</div><div class=\"line\">            reHeight = heightSize;</div><div class=\"line\">        } <span class=\"keyword\">else</span></div><div class=\"line\">        {</div><div class=\"line\">            <span class=\"keyword\">int</span> desired = (<span class=\"keyword\">int</span>) (getPaddingTop() + height + getPaddingBottom());</div><div class=\"line\">            reHeight = desired;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        setMeasuredDimension(reWidth, reHeight);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDraw</span><span class=\"params\">(Canvas canvas)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">switch</span> (statue){</div><div class=\"line\">            <span class=\"keyword\">case</span> downloadStatue:</div><div class=\"line\">                drawDownload(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> progressStatue:</div><div class=\"line\">                drawProgress(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> finishStatue:</div><div class=\"line\">                drawOpen(canvas);</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        }</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">super</span>.onDraw(canvas);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawDownload</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"comment\">//&#x56FE;&#x7247;&#x7F29;&#x5C0F;&#x663E;&#x793A;</span></div><div class=\"line\">        <span class=\"keyword\">int</span> scalse = <span class=\"number\">5</span>;</div><div class=\"line\">        Rect srcRect = <span class=\"keyword\">new</span> Rect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,width,height);</div><div class=\"line\">        Rect dstRect = <span class=\"keyword\">new</span> Rect(width/scalse,height/scalse,width/scalse,height/scalse);</div><div class=\"line\">        canvas.drawBitmap(bitmpre,<span class=\"number\">0</span>,<span class=\"number\">0</span>,paint);</div><div class=\"line\">        canvas.drawBitmap(bitmpre,srcRect,dstRect,paint);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawOpen</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> border = <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> h = bitmpre.getHeight()/<span class=\"number\">2</span>;</div><div class=\"line\">        RectF outRect = <span class=\"keyword\">new</span> RectF(<span class=\"number\">0</span>, h/<span class=\"number\">2</span>,width, h/<span class=\"number\">2</span>+h);</div><div class=\"line\">        RectF inRect = <span class=\"keyword\">new</span> RectF(border,h/<span class=\"number\">2</span>+border,width-border,h/<span class=\"number\">2</span>+h-border);</div><div class=\"line\">        paint.setAntiAlias(<span class=\"keyword\">true</span>);</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x5916;&#x77E9;&#x5F62;</span></div><div class=\"line\">        canvas.drawRoundRect(outRect,<span class=\"number\">5</span>,<span class=\"number\">5</span>, paint);</div><div class=\"line\">        paint.setColor(whiteColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x5185;&#x77E9;&#x5F62;</span></div><div class=\"line\">        canvas.drawRoundRect(inRect,<span class=\"number\">5</span>,<span class=\"number\">5</span>, paint);</div><div class=\"line\">        String v =<span class=\"string\">&quot;&#x6253;&#x5F00;&quot;</span>;</div><div class=\"line\">        paint.setColor(textColor);</div><div class=\"line\">        paint.setTextSize(textSize);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x4E2D;&#x95F4;&#x6587;&#x5B57;</span></div><div class=\"line\">        Paint.FontMetricsInt fontMetrics = paint.getFontMetricsInt();</div><div class=\"line\">        <span class=\"keyword\">int</span> baseline = ((<span class=\"keyword\">int</span>)(inRect.bottom + inRect.top) - fontMetrics.bottom - fontMetrics.top) / <span class=\"number\">2</span>;</div><div class=\"line\">        <span class=\"comment\">// &#x4E0B;&#x9762;&#x8FD9;&#x884C;&#x662F;&#x5B9E;&#x73B0;&#x6C34;&#x5E73;&#x5C45;&#x4E2D;&#xFF0C;drawText&#x5BF9;&#x5E94;&#x6539;&#x4E3A;&#x4F20;&#x5165;targetRect.centerX()</span></div><div class=\"line\">        paint.setTextAlign(Paint.Align.CENTER);</div><div class=\"line\">        canvas.drawText(v, inRect.centerX(), baseline, paint);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">drawProgress</span><span class=\"params\">(Canvas canvas)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">int</span> size = height;</div><div class=\"line\">        <span class=\"keyword\">if</span> (height &gt; width)</div><div class=\"line\">            size = width;</div><div class=\"line\">        radius = (<span class=\"keyword\">int</span>) (size * paddingscale / <span class=\"number\">2f</span>);</div><div class=\"line\">        paint.setAntiAlias(<span class=\"keyword\">true</span>);</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius+<span class=\"number\">2</span>, paint);<span class=\"comment\">//&#x753B;&#x6700;&#x5916;&#x9762;&#x7684;&#x8FB9;&#x7EBF;</span></div><div class=\"line\">        paint.setColor(preColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x6700;&#x5927;&#x7684;&#x5706; &#x8FDB;&#x5EA6;&#x6761;&#x5706;&#x73AF;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;&#xFF08;&#x672A;&#x8D70;&#x5230;&#x7684;&#x8FDB;&#x5EA6;&#xFF09;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x54E6;</span></div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius, paint);</div><div class=\"line\">        rectf.set((width - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>, (height - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>,</div><div class=\"line\">                ((width - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>) + (<span class=\"number\">2</span> * radius),</div><div class=\"line\">                ((height - radius * <span class=\"number\">2</span>) / <span class=\"number\">2f</span>) + (<span class=\"number\">2</span> * radius));</div><div class=\"line\">        paint.setColor(progressColor);</div><div class=\"line\">        canvas.drawArc(rectf, startAngle, progress * <span class=\"number\">3.6f</span>, <span class=\"keyword\">true</span>, paint);</div><div class=\"line\">        paint.setColor(CircleColor);</div><div class=\"line\">        <span class=\"comment\">// &#x7ED8;&#x5236;&#x7528;&#x4E8E;&#x906E;&#x4F4F;&#x4F1E;&#x5F62;&#x4E24;&#x4E2A;&#x8FB9;&#x7684;&#x5C0F;&#x5706;</span></div><div class=\"line\">        canvas.drawCircle(width / <span class=\"number\">2</span>, height / <span class=\"number\">2</span>, radius - socktwidth, paint);</div><div class=\"line\">        <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) {<span class=\"comment\">// &#x7ED8;&#x5236;&#x4E2D;&#x95F4;&#x7684;&#x56FE;&#x7247;</span></div><div class=\"line\">            <span class=\"keyword\">int</span> width2 = (<span class=\"keyword\">int</span>) (rectf.width() * scale);</div><div class=\"line\">            <span class=\"keyword\">int</span> height2 = (<span class=\"keyword\">int</span>) (rectf.height() * scale);</div><div class=\"line\">            rectf.set(rectf.left + width2, rectf.top + height2, rectf.right</div><div class=\"line\">                    - width2, rectf.bottom - height2);</div><div class=\"line\">            canvas.drawBitmap(bitmap, <span class=\"keyword\">null</span>, rectf, <span class=\"keyword\">null</span>);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">dp2px</span><span class=\"params\">(<span class=\"keyword\">int</span> dp)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">int</span>) ((getResources().getDisplayMetrics().density * dp) + <span class=\"number\">0.5</span>);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> progress</div><div class=\"line\">     *            &lt;p&gt;</div><div class=\"line\">     *            ps: &#x767E;&#x5206;&#x6BD4; 0~100;</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> progress)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">if</span> (progress &gt; <span class=\"number\">100</span>)</div><div class=\"line\">            <span class=\"keyword\">return</span>;</div><div class=\"line\">        <span class=\"keyword\">this</span>.progress = progress;</div><div class=\"line\">        invalidate();</div><div class=\"line\">        <span class=\"keyword\">if</span> (monProgress != <span class=\"keyword\">null</span>)</div><div class=\"line\">            monProgress.onProgress(progress);</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x72B6;&#x6001;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStatue</span><span class=\"params\">(<span class=\"keyword\">int</span> statue)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.statue = statue;</div><div class=\"line\">        invalidate();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x73AF;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x5BBD;&#x5EA6; px</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setProdressWidth</span><span class=\"params\">(<span class=\"keyword\">int</span> width)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.socktwidth = width;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x5927;&#x5C0F;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> value</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setTextSize</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>{</div><div class=\"line\">        textSize = value;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x6587;&#x5B57;&#x5927;&#x5C0F;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.textColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;&#x6761;&#x4E4B;&#x524D;&#x7684;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setPreProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> precolor)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.preColor = precolor;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x8FDB;&#x5EA6;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> color</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setProgressColor</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.progressColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x5FC3;&#x4E2D;&#x95F4;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> color</div><div class=\"line\">     * <span class=\"doctag\">@return</span></div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setCircleBackgroud</span><span class=\"params\">(<span class=\"keyword\">int</span> color)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.CircleColor = color;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5706;&#x76F8;&#x5BF9;&#x6574;&#x4E2A;&#x63A7;&#x4EF6;&#x7684;&#x5BBD;&#x5EA6;&#x6216;&#x8005;&#x9AD8;&#x5EA6;&#x7684;&#x5360;&#x7528;&#x6BD4;&#x4F8B;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> scale</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setPaddingscale</span><span class=\"params\">(<span class=\"keyword\">float</span> scale)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.paddingscale = scale;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * &#x8BBE;&#x7F6E;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> startAngle</div><div class=\"line\">     *            0~360</div><div class=\"line\">     *            &lt;p&gt;</div><div class=\"line\">     *            ps 0&#x4EE3;&#x8868;&#x5728;&#x6700;&#x53F3;&#x8FB9; 90 &#x6700;&#x4E0B;&#x65B9; &#x6309;&#x7167;&#x7136;&#x540E;&#x987A;&#x65F6;&#x9488;&#x65CB;&#x8F6C;</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DownloadProgress <span class=\"title\">setStartAngle</span><span class=\"params\">(<span class=\"keyword\">int</span> startAngle)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.startAngle = startAngle;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">onProgressListener</span> </span>{</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span></span>;</div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"2-&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\"><a href=\"#2-&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"2.&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;\"></a>2.&#x5728;attrs&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4EE3;&#x7801;</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;declare-styleable name=&quot;DownloadProgress&quot;&gt;</div><div class=\"line\">        &lt;!-- &#x72B6;&#x6001;0&#x672A;&#x4E0B;&#x8F7D; 1&#x4E0B;&#x8F7D;&#x4E2D; 2&#x4E0B;&#x8F7D;&#x5B8C;&#x6210; --&gt;</div><div class=\"line\">        &lt;attr name=&quot;statue&quot; format=&quot;integer&quot; /&gt;</div><div class=\"line\">    &lt;/declare-styleable&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\"><a href=\"#3-&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"3.&#x4F7F;&#x7528;&#x65B9;&#x6CD5;\"></a>3.&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h3><p>&#x5728;xml&#x5E03;&#x5C40;&#x4E2D;&#xFF1A;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;com.tyky.edu.teacher.ui.DownloadProgress</div><div class=\"line\">            android:id=<span class=\"string\">&quot;@+id/download_btn&quot;</span></div><div class=\"line\">            android:layout_width=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">            android:layout_height=<span class=\"string\">&quot;wrap_content&quot;</span></div><div class=\"line\">            android:layout_centerVertical=<span class=\"string\">&quot;true&quot;</span></div><div class=\"line\">            android:gravity=<span class=\"string\">&quot;center&quot;</span></div><div class=\"line\">            app:statue=<span class=\"string\">&quot;1&quot;</span></div><div class=\"line\">            android:layout_marginRight=<span class=\"string\">&quot;10dp&quot;</span> /&gt;</div></pre></td></tr></table></figure></p>\n<p>&#x8BB0;&#x5F97;&#x5728;&#x7236;&#x5E03;&#x5C40;&#x52A0;&#x4E0A;<code>xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</code></p>\n<p>&#x4E0B;&#x8F7D;&#x56DE;&#x8C03;&#x7684;&#x65F6;&#x5019;setStatue()&#x6765;&#x66F4;&#x6539;&#x72B6;&#x6001;&#xFF0C;setProgress&#x66F4;&#x6539;&#x8FDB;&#x5EA6;&#x503C;</p>\n<p>&#x8FD8;&#x6709;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x52A0;&#x4E0A;&#x72B6;&#x6001;&#x5207;&#x6362;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x540E;&#x9762;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x505A;&#x3002;</p>\n"},{"title":"制作gif","date":"2016-08-26T02:13:03.000Z","_content":"\n看到github上演示效果都用的gif，我也去网上找了很多方法，格式工厂之类的都是视频转gif，使用起来感觉效果很差，还有转换失败的情况，转出来的比原视频还大。\n最后找到一款炒鸡好用的软件，点击[LICEcap](http://www.cockos.com/licecap/ \"LICEcap\")，直接去官网下吧，\n可以直接录制屏幕保存为gif\n\n","source":"_posts/制作gif.md","raw":"---\ntitle: 制作gif\ndate: 2016-08-26 10:13:03\ntags: 其他\n---\n\n看到github上演示效果都用的gif，我也去网上找了很多方法，格式工厂之类的都是视频转gif，使用起来感觉效果很差，还有转换失败的情况，转出来的比原视频还大。\n最后找到一款炒鸡好用的软件，点击[LICEcap](http://www.cockos.com/licecap/ \"LICEcap\")，直接去官网下吧，\n可以直接录制屏幕保存为gif\n\n","slug":"制作gif","published":1,"updated":"2016-08-26T02:45:48.947Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwh9000ipkm8m6tr69rm","content":"<p>&#x770B;&#x5230;github&#x4E0A;&#x6F14;&#x793A;&#x6548;&#x679C;&#x90FD;&#x7528;&#x7684;gif&#xFF0C;&#x6211;&#x4E5F;&#x53BB;&#x7F51;&#x4E0A;&#x627E;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#xFF0C;&#x683C;&#x5F0F;&#x5DE5;&#x5382;&#x4E4B;&#x7C7B;&#x7684;&#x90FD;&#x662F;&#x89C6;&#x9891;&#x8F6C;gif&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x611F;&#x89C9;&#x6548;&#x679C;&#x5F88;&#x5DEE;&#xFF0C;&#x8FD8;&#x6709;&#x8F6C;&#x6362;&#x5931;&#x8D25;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8F6C;&#x51FA;&#x6765;&#x7684;&#x6BD4;&#x539F;&#x89C6;&#x9891;&#x8FD8;&#x5927;&#x3002;<br>&#x6700;&#x540E;&#x627E;&#x5230;&#x4E00;&#x6B3E;&#x7092;&#x9E21;&#x597D;&#x7528;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x70B9;&#x51FB;<a href=\"http://www.cockos.com/licecap/\" title=\"LICEcap\" target=\"_blank\" rel=\"external\">LICEcap</a>&#xFF0C;&#x76F4;&#x63A5;&#x53BB;&#x5B98;&#x7F51;&#x4E0B;&#x5427;&#xFF0C;<br>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5F55;&#x5236;&#x5C4F;&#x5E55;&#x4FDD;&#x5B58;&#x4E3A;gif</p>\n","excerpt":"","more":"<p>&#x770B;&#x5230;github&#x4E0A;&#x6F14;&#x793A;&#x6548;&#x679C;&#x90FD;&#x7528;&#x7684;gif&#xFF0C;&#x6211;&#x4E5F;&#x53BB;&#x7F51;&#x4E0A;&#x627E;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#xFF0C;&#x683C;&#x5F0F;&#x5DE5;&#x5382;&#x4E4B;&#x7C7B;&#x7684;&#x90FD;&#x662F;&#x89C6;&#x9891;&#x8F6C;gif&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x611F;&#x89C9;&#x6548;&#x679C;&#x5F88;&#x5DEE;&#xFF0C;&#x8FD8;&#x6709;&#x8F6C;&#x6362;&#x5931;&#x8D25;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8F6C;&#x51FA;&#x6765;&#x7684;&#x6BD4;&#x539F;&#x89C6;&#x9891;&#x8FD8;&#x5927;&#x3002;<br>&#x6700;&#x540E;&#x627E;&#x5230;&#x4E00;&#x6B3E;&#x7092;&#x9E21;&#x597D;&#x7528;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x70B9;&#x51FB;<a href=\"http://www.cockos.com/licecap/\" title=\"LICEcap\">LICEcap</a>&#xFF0C;&#x76F4;&#x63A5;&#x53BB;&#x5B98;&#x7F51;&#x4E0B;&#x5427;&#xFF0C;<br>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5F55;&#x5236;&#x5C4F;&#x5E55;&#x4FDD;&#x5B58;&#x4E3A;gif</p>\n"},{"title":"Android读取json配置","date":"2016-08-09T08:02:00.000Z","_content":"\n\n工作的新需求，需要加过滤，但是过滤的字段没有服务，只能像服务端一样写本地配置化。。。orz\n把配置写成json格式放在assets下面。\n\n### 1.构造json放在assets下面，如图\n![filter](Android读取json配置/filter.jpg)\n\n### 2.写一个util 代码如下\n```java\nimport android.content.Context;\nimport android.content.res.AssetManager;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Created by Dino on 8/9 0009.\n */\npublic class AppJsonFileReader {\n    public static String getJson(Context context, String fileName) {\n\n        StringBuilder stringBuilder = new StringBuilder();\n        try {\n            AssetManager assetManager = context.getAssets();\n            BufferedReader bf = new BufferedReader(new InputStreamReader(\n                    assetManager.open(fileName)));\n            String line;\n            while ((line = bf.readLine()) != null) {\n                stringBuilder.append(line);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return stringBuilder.toString();\n    }\n\n\n    public static List<Map<String, String>> setListData(String str) {\n        List<Map<String, String>> data = new ArrayList<Map<String, String>>();\n        try {\n\n            JSONArray array = new JSONArray(str);\n            int len = array.length();\n            Map<String, String> map;\n            for (int i = 0; i < len; i++) {\n                JSONObject object = array.getJSONObject(i);\n                map = new HashMap<String, String>();\n                map.put(\"Code\", object.getString(\"Code\"));\n                map.put(\"Name\", object.getString(\"Name\"));\n                data.add(map);\n            }\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return data;\n\n    }\n}\n```\n\n\n### 3.在activity里面调用代码：\n```java\nprivate final static String primary = \"www/js/primary_class_phase.json\";\nprivate final static String junior = \"www/js/junior_class_phase.json\";\nprivate final static String senior = \"www/js/senior_class_phase.json\";\n\n\nnew Thread(new Runnable() {\n            @Override\n            public void run() {\n                String jsonStr=\"\";\n                if(\"2\".equals(phase)){//小学\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),primary);\n                }else if(\"3\".equals(phase)){//初中\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),junior);\n                }else if(\"4\".equals(phase)){//高中\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),senior);\n                }\n\n\n                List<Map<String, String>> data = AppJsonFileReader.setListData(jsonStr);\n                for(int i = 0;i<data.size();i++){\n                    mCources.add(data.get(i).get(\"Name\"));\n                    mCourcesId.add(data.get(i).get(\"Code\"));\n                }\n                list.clear();\n                list.addAll(mCources);\n                getActivity().runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        mAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, list);\n                        mListView.setAdapter(mAdapter);\n                    }\n                });\n            }\n        }).start();\n```","source":"_posts/Android读取json配置.md","raw":"---\ntitle: Android读取json配置\ndate: 2016-08-09 16:02:00\ntags: Android\n---\n\n\n工作的新需求，需要加过滤，但是过滤的字段没有服务，只能像服务端一样写本地配置化。。。orz\n把配置写成json格式放在assets下面。\n\n### 1.构造json放在assets下面，如图\n![filter](Android读取json配置/filter.jpg)\n\n### 2.写一个util 代码如下\n```java\nimport android.content.Context;\nimport android.content.res.AssetManager;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Created by Dino on 8/9 0009.\n */\npublic class AppJsonFileReader {\n    public static String getJson(Context context, String fileName) {\n\n        StringBuilder stringBuilder = new StringBuilder();\n        try {\n            AssetManager assetManager = context.getAssets();\n            BufferedReader bf = new BufferedReader(new InputStreamReader(\n                    assetManager.open(fileName)));\n            String line;\n            while ((line = bf.readLine()) != null) {\n                stringBuilder.append(line);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return stringBuilder.toString();\n    }\n\n\n    public static List<Map<String, String>> setListData(String str) {\n        List<Map<String, String>> data = new ArrayList<Map<String, String>>();\n        try {\n\n            JSONArray array = new JSONArray(str);\n            int len = array.length();\n            Map<String, String> map;\n            for (int i = 0; i < len; i++) {\n                JSONObject object = array.getJSONObject(i);\n                map = new HashMap<String, String>();\n                map.put(\"Code\", object.getString(\"Code\"));\n                map.put(\"Name\", object.getString(\"Name\"));\n                data.add(map);\n            }\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return data;\n\n    }\n}\n```\n\n\n### 3.在activity里面调用代码：\n```java\nprivate final static String primary = \"www/js/primary_class_phase.json\";\nprivate final static String junior = \"www/js/junior_class_phase.json\";\nprivate final static String senior = \"www/js/senior_class_phase.json\";\n\n\nnew Thread(new Runnable() {\n            @Override\n            public void run() {\n                String jsonStr=\"\";\n                if(\"2\".equals(phase)){//小学\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),primary);\n                }else if(\"3\".equals(phase)){//初中\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),junior);\n                }else if(\"4\".equals(phase)){//高中\n                    jsonStr = AppJsonFileReader.getJson(getActivity(),senior);\n                }\n\n\n                List<Map<String, String>> data = AppJsonFileReader.setListData(jsonStr);\n                for(int i = 0;i<data.size();i++){\n                    mCources.add(data.get(i).get(\"Name\"));\n                    mCourcesId.add(data.get(i).get(\"Code\"));\n                }\n                list.clear();\n                list.addAll(mCources);\n                getActivity().runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        mAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, list);\n                        mListView.setAdapter(mAdapter);\n                    }\n                });\n            }\n        }).start();\n```","slug":"Android读取json配置","published":1,"updated":"2016-08-09T08:17:58.908Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwhg000kpkm8qh6wu9oy","content":"<p>&#x5DE5;&#x4F5C;&#x7684;&#x65B0;&#x9700;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x8FC7;&#x6EE4;&#xFF0C;&#x4F46;&#x662F;&#x8FC7;&#x6EE4;&#x7684;&#x5B57;&#x6BB5;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x80FD;&#x50CF;&#x670D;&#x52A1;&#x7AEF;&#x4E00;&#x6837;&#x5199;&#x672C;&#x5730;&#x914D;&#x7F6E;&#x5316;&#x3002;&#x3002;&#x3002;orz<br>&#x628A;&#x914D;&#x7F6E;&#x5199;&#x6210;json&#x683C;&#x5F0F;&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#x3002;</p>\n<h3 id=\"1-&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\"><a href=\"#1-&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"1.&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\"></a>1.&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/09/Android&#x8BFB;&#x53D6;json&#x914D;&#x7F6E;/filter.jpg\" alt=\"filter\"></p>\n<h3 id=\"2-&#x5199;&#x4E00;&#x4E2A;util-&#x4EE3;&#x7801;&#x5982;&#x4E0B;\"><a href=\"#2-&#x5199;&#x4E00;&#x4E2A;util-&#x4EE3;&#x7801;&#x5982;&#x4E0B;\" class=\"headerlink\" title=\"2.&#x5199;&#x4E00;&#x4E2A;util &#x4EE3;&#x7801;&#x5982;&#x4E0B;\"></a>2.&#x5199;&#x4E00;&#x4E2A;util &#x4EE3;&#x7801;&#x5982;&#x4E0B;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.AssetManager;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONArray;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONException;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONObject;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.List;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/9 0009.</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppJsonFileReader</span> </span>{</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getJson</span><span class=\"params\">(Context context, String fileName)</span> </span>{</div><div class=\"line\"></div><div class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">        <span class=\"keyword\">try</span> {</div><div class=\"line\">            AssetManager assetManager = context.getAssets();</div><div class=\"line\">            BufferedReader bf = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(</div><div class=\"line\">                    assetManager.open(fileName)));</div><div class=\"line\">            String line;</div><div class=\"line\">            <span class=\"keyword\">while</span> ((line = bf.readLine()) != <span class=\"keyword\">null</span>) {</div><div class=\"line\">                stringBuilder.append(line);</div><div class=\"line\">            }</div><div class=\"line\">        } <span class=\"keyword\">catch</span> (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> stringBuilder.toString();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Map&lt;String, String&gt;&gt; setListData(String str) {</div><div class=\"line\">        List&lt;Map&lt;String, String&gt;&gt; data = <span class=\"keyword\">new</span> ArrayList&lt;Map&lt;String, String&gt;&gt;();</div><div class=\"line\">        <span class=\"keyword\">try</span> {</div><div class=\"line\"></div><div class=\"line\">            JSONArray array = <span class=\"keyword\">new</span> JSONArray(str);</div><div class=\"line\">            <span class=\"keyword\">int</span> len = array.length();</div><div class=\"line\">            Map&lt;String, String&gt; map;</div><div class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) {</div><div class=\"line\">                JSONObject object = array.getJSONObject(i);</div><div class=\"line\">                map = <span class=\"keyword\">new</span> HashMap&lt;String, String&gt;();</div><div class=\"line\">                map.put(<span class=\"string\">&quot;Code&quot;</span>, object.getString(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                map.put(<span class=\"string\">&quot;Name&quot;</span>, object.getString(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                data.add(map);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">        } <span class=\"keyword\">catch</span> (JSONException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> data;</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\"><a href=\"#3-&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\" class=\"headerlink\" title=\"3.&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\"></a>3.&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String primary = <span class=\"string\">&quot;www/js/primary_class_phase.json&quot;</span>;</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String junior = <span class=\"string\">&quot;www/js/junior_class_phase.json&quot;</span>;</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String senior = <span class=\"string\">&quot;www/js/senior_class_phase.json&quot;</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                String jsonStr=<span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">&quot;2&quot;</span>.equals(phase)){<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),primary);</div><div class=\"line\">                }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">&quot;3&quot;</span>.equals(phase)){<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),junior);</div><div class=\"line\">                }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">&quot;4&quot;</span>.equals(phase)){<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),senior);</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">                List&lt;Map&lt;String, String&gt;&gt; data = AppJsonFileReader.setListData(jsonStr);</div><div class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i&lt;data.size();i++){</div><div class=\"line\">                    mCources.add(data.get(i).get(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                    mCourcesId.add(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                }</div><div class=\"line\">                list.clear();</div><div class=\"line\">                list.addAll(mCources);</div><div class=\"line\">                getActivity().runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        mAdapter = <span class=\"keyword\">new</span> ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_list_item_1, list);</div><div class=\"line\">                        mListView.setAdapter(mAdapter);</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div></pre></td></tr></table></figure>","excerpt":"","more":"<p>&#x5DE5;&#x4F5C;&#x7684;&#x65B0;&#x9700;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x8FC7;&#x6EE4;&#xFF0C;&#x4F46;&#x662F;&#x8FC7;&#x6EE4;&#x7684;&#x5B57;&#x6BB5;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x80FD;&#x50CF;&#x670D;&#x52A1;&#x7AEF;&#x4E00;&#x6837;&#x5199;&#x672C;&#x5730;&#x914D;&#x7F6E;&#x5316;&#x3002;&#x3002;&#x3002;orz<br>&#x628A;&#x914D;&#x7F6E;&#x5199;&#x6210;json&#x683C;&#x5F0F;&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#x3002;</p>\n<h3 id=\"1-&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\"><a href=\"#1-&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"1.&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;\"></a>1.&#x6784;&#x9020;json&#x653E;&#x5728;assets&#x4E0B;&#x9762;&#xFF0C;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/09/Android&#x8BFB;&#x53D6;json&#x914D;&#x7F6E;/filter.jpg\" alt=\"filter\"></p>\n<h3 id=\"2-&#x5199;&#x4E00;&#x4E2A;util-&#x4EE3;&#x7801;&#x5982;&#x4E0B;\"><a href=\"#2-&#x5199;&#x4E00;&#x4E2A;util-&#x4EE3;&#x7801;&#x5982;&#x4E0B;\" class=\"headerlink\" title=\"2.&#x5199;&#x4E00;&#x4E2A;util &#x4EE3;&#x7801;&#x5982;&#x4E0B;\"></a>2.&#x5199;&#x4E00;&#x4E2A;util &#x4EE3;&#x7801;&#x5982;&#x4E0B;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.AssetManager;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONArray;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONException;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONObject;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.List;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/9 0009.</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppJsonFileReader</span> </span>{</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getJson</span><span class=\"params\">(Context context, String fileName)</span> </span>{</div><div class=\"line\"></div><div class=\"line\">        StringBuilder stringBuilder = <span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">        <span class=\"keyword\">try</span> {</div><div class=\"line\">            AssetManager assetManager = context.getAssets();</div><div class=\"line\">            BufferedReader bf = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(</div><div class=\"line\">                    assetManager.open(fileName)));</div><div class=\"line\">            String line;</div><div class=\"line\">            <span class=\"keyword\">while</span> ((line = bf.readLine()) != <span class=\"keyword\">null</span>) {</div><div class=\"line\">                stringBuilder.append(line);</div><div class=\"line\">            }</div><div class=\"line\">        } <span class=\"keyword\">catch</span> (IOException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> stringBuilder.toString();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Map&lt;String, String&gt;&gt; setListData(String str) {</div><div class=\"line\">        List&lt;Map&lt;String, String&gt;&gt; data = <span class=\"keyword\">new</span> ArrayList&lt;Map&lt;String, String&gt;&gt;();</div><div class=\"line\">        <span class=\"keyword\">try</span> {</div><div class=\"line\"></div><div class=\"line\">            JSONArray array = <span class=\"keyword\">new</span> JSONArray(str);</div><div class=\"line\">            <span class=\"keyword\">int</span> len = array.length();</div><div class=\"line\">            Map&lt;String, String&gt; map;</div><div class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; len; i++) {</div><div class=\"line\">                JSONObject object = array.getJSONObject(i);</div><div class=\"line\">                map = <span class=\"keyword\">new</span> HashMap&lt;String, String&gt;();</div><div class=\"line\">                map.put(<span class=\"string\">&quot;Code&quot;</span>, object.getString(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                map.put(<span class=\"string\">&quot;Name&quot;</span>, object.getString(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                data.add(map);</div><div class=\"line\">            }</div><div class=\"line\"></div><div class=\"line\">        } <span class=\"keyword\">catch</span> (JSONException e) {</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span> data;</div><div class=\"line\"></div><div class=\"line\">    }</div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h3 id=\"3-&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\"><a href=\"#3-&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\" class=\"headerlink\" title=\"3.&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;\"></a>3.&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF1A;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String primary = <span class=\"string\">&quot;www/js/primary_class_phase.json&quot;</span>;</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String junior = <span class=\"string\">&quot;www/js/junior_class_phase.json&quot;</span>;</div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> String senior = <span class=\"string\">&quot;www/js/senior_class_phase.json&quot;</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                String jsonStr=<span class=\"string\">&quot;&quot;</span>;</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">&quot;2&quot;</span>.equals(phase)){<span class=\"comment\">//&#x5C0F;&#x5B66;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),primary);</div><div class=\"line\">                }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">&quot;3&quot;</span>.equals(phase)){<span class=\"comment\">//&#x521D;&#x4E2D;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),junior);</div><div class=\"line\">                }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">&quot;4&quot;</span>.equals(phase)){<span class=\"comment\">//&#x9AD8;&#x4E2D;</span></div><div class=\"line\">                    jsonStr = AppJsonFileReader.getJson(getActivity(),senior);</div><div class=\"line\">                }</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">                List&lt;Map&lt;String, String&gt;&gt; data = AppJsonFileReader.setListData(jsonStr);</div><div class=\"line\">                <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i&lt;data.size();i++){</div><div class=\"line\">                    mCources.add(data.get(i).get(<span class=\"string\">&quot;Name&quot;</span>));</div><div class=\"line\">                    mCourcesId.add(data.get(i).get(<span class=\"string\">&quot;Code&quot;</span>));</div><div class=\"line\">                }</div><div class=\"line\">                list.clear();</div><div class=\"line\">                list.addAll(mCources);</div><div class=\"line\">                getActivity().runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        mAdapter = <span class=\"keyword\">new</span> ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_list_item_1, list);</div><div class=\"line\">                        mListView.setAdapter(mAdapter);</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div></pre></td></tr></table></figure>"},{"title":"使用drawable来实现圆形按钮以及点击效果","date":"2016-08-15T12:20:13.000Z","_content":"\n今天要做一个视频录制的功能，录制的按钮要和ios的一致，觉得用drawable实现更简单，下面先看看效果\n![btn_normal](使用drawable来实现圆形按钮以及点击效果/btn_normal.jpg)\n![btn_click](使用drawable来实现圆形按钮以及点击效果/btn_click.jpg)\n\n### 1.新建一个record_normal_shape.xml \n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n            android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"2dp\"\n        android:top=\"2dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/black\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"4dp\"\n        android:top=\"4dp\"\n        android:left=\"4dp\"\n        android:right=\"4dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n</layer-list>\n```\n\n### 2.新建record_click_shape.xml \n代码基本和上面一样，只是颜色由白色变为红色\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n            android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"2dp\"\n        android:top=\"2dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/black\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"4dp\"\n        android:top=\"4dp\"\n        android:left=\"4dp\"\n        android:right=\"4dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/red\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n</layer-list>\n```\n\n\n### 3.新建record_statue_selector.xml\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_focused=\"true\"/>\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_pressed=\"true\"/>\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_selected=\"true\"/>\n    <item android:drawable=\"@drawable/record_normal_shape\"/>\n\n</selector>\n```\n\n### 4.直接在布局文件中添加background既可\n\n```java\n<ImageButton\n                android:id=\"@id/btn_recorder_record\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"70dp\"\n                android:layout_centerInParent=\"true\"\n                android:background=\"@drawable/record_statue_selecter\" />\n```\n\n\n实现起来很简单，这种方式不但可以画出圆形，还可以画矩形，直线，环形，椭圆。以及设置圆角，边线等等。","source":"_posts/使用drawable来实现圆形按钮以及点击效果.md","raw":"---\ntitle: 使用drawable来实现圆形按钮以及点击效果\ndate: 2016-08-15 20:20:13\ntags: Android\n---\n\n今天要做一个视频录制的功能，录制的按钮要和ios的一致，觉得用drawable实现更简单，下面先看看效果\n![btn_normal](使用drawable来实现圆形按钮以及点击效果/btn_normal.jpg)\n![btn_click](使用drawable来实现圆形按钮以及点击效果/btn_click.jpg)\n\n### 1.新建一个record_normal_shape.xml \n\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n            android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"2dp\"\n        android:top=\"2dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/black\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"4dp\"\n        android:top=\"4dp\"\n        android:left=\"4dp\"\n        android:right=\"4dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n</layer-list>\n```\n\n### 2.新建record_click_shape.xml \n代码基本和上面一样，只是颜色由白色变为红色\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" >\n    <item>\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/white\"/>\n            <size android:width=\"20dp\"\n            android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"2dp\"\n        android:top=\"2dp\"\n        android:left=\"2dp\"\n        android:right=\"2dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/black\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n\n    <item android:bottom=\"4dp\"\n        android:top=\"4dp\"\n        android:left=\"4dp\"\n        android:right=\"4dp\">\n        <shape android:shape=\"oval\" >\n            <solid\n                android:color=\"@color/red\"/>\n            <size android:width=\"20dp\"\n                android:height=\"20dp\"/>\n        </shape>\n    </item>\n</layer-list>\n```\n\n\n### 3.新建record_statue_selector.xml\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_focused=\"true\"/>\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_pressed=\"true\"/>\n    <item android:drawable=\"@drawable/record_click_shape\" android:state_selected=\"true\"/>\n    <item android:drawable=\"@drawable/record_normal_shape\"/>\n\n</selector>\n```\n\n### 4.直接在布局文件中添加background既可\n\n```java\n<ImageButton\n                android:id=\"@id/btn_recorder_record\"\n                android:layout_width=\"70dp\"\n                android:layout_height=\"70dp\"\n                android:layout_centerInParent=\"true\"\n                android:background=\"@drawable/record_statue_selecter\" />\n```\n\n\n实现起来很简单，这种方式不但可以画出圆形，还可以画矩形，直线，环形，椭圆。以及设置圆角，边线等等。","slug":"使用drawable来实现圆形按钮以及点击效果","published":1,"updated":"2016-08-17T01:24:04.818Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwhi000npkm83sucpmqh","content":"<p>&#x4ECA;&#x5929;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x5F55;&#x5236;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5F55;&#x5236;&#x7684;&#x6309;&#x94AE;&#x8981;&#x548C;ios&#x7684;&#x4E00;&#x81F4;&#xFF0C;&#x89C9;&#x5F97;&#x7528;drawable&#x5B9E;&#x73B0;&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762;&#x5148;&#x770B;&#x770B;&#x6548;&#x679C;<br><img src=\"/2016/08/15/&#x4F7F;&#x7528;drawable&#x6765;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x6309;&#x94AE;&#x4EE5;&#x53CA;&#x70B9;&#x51FB;&#x6548;&#x679C;/btn_normal.jpg\" alt=\"btn_normal\"><br><img src=\"/2016/08/15/&#x4F7F;&#x7528;drawable&#x6765;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x6309;&#x94AE;&#x4EE5;&#x53CA;&#x70B9;&#x51FB;&#x6548;&#x679C;/btn_click.jpg\" alt=\"btn_click\"></p>\n<h3 id=\"1-&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record-normal-shape-xml\"><a href=\"#1-&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record-normal-shape-xml\" class=\"headerlink\" title=\"1.&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record_normal_shape.xml\"></a>1.&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record_normal_shape.xml</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</div><div class=\"line\">    &lt;item&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">            android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;2dp&quot;</div><div class=\"line\">        android:top=&quot;2dp&quot;</div><div class=\"line\">        android:left=&quot;2dp&quot;</div><div class=\"line\">        android:right=&quot;2dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/black&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;4dp&quot;</div><div class=\"line\">        android:top=&quot;4dp&quot;</div><div class=\"line\">        android:left=&quot;4dp&quot;</div><div class=\"line\">        android:right=&quot;4dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/layer-list&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"2-&#x65B0;&#x5EFA;record-click-shape-xml\"><a href=\"#2-&#x65B0;&#x5EFA;record-click-shape-xml\" class=\"headerlink\" title=\"2.&#x65B0;&#x5EFA;record_click_shape.xml\"></a>2.&#x65B0;&#x5EFA;record_click_shape.xml</h3><p>&#x4EE3;&#x7801;&#x57FA;&#x672C;&#x548C;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x989C;&#x8272;&#x7531;&#x767D;&#x8272;&#x53D8;&#x4E3A;&#x7EA2;&#x8272;<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</div><div class=\"line\">    &lt;item&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">            android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;2dp&quot;</div><div class=\"line\">        android:top=&quot;2dp&quot;</div><div class=\"line\">        android:left=&quot;2dp&quot;</div><div class=\"line\">        android:right=&quot;2dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/black&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;4dp&quot;</div><div class=\"line\">        android:top=&quot;4dp&quot;</div><div class=\"line\">        android:left=&quot;4dp&quot;</div><div class=\"line\">        android:right=&quot;4dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/red&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/layer-list&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-&#x65B0;&#x5EFA;record-statue-selector-xml\"><a href=\"#3-&#x65B0;&#x5EFA;record-statue-selector-xml\" class=\"headerlink\" title=\"3.&#x65B0;&#x5EFA;record_statue_selector.xml\"></a>3.&#x65B0;&#x5EFA;record_statue_selector.xml</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_focused=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_pressed=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_selected=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_normal_shape&quot;/&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/selector&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"4-&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\"><a href=\"#4-&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\" class=\"headerlink\" title=\"4.&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\"></a>4.&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ImageButton</div><div class=\"line\">                android:id=<span class=\"string\">&quot;@id/btn_recorder_record&quot;</span></div><div class=\"line\">                android:layout_width=<span class=\"string\">&quot;70dp&quot;</span></div><div class=\"line\">                android:layout_height=<span class=\"string\">&quot;70dp&quot;</span></div><div class=\"line\">                android:layout_centerInParent=<span class=\"string\">&quot;true&quot;</span></div><div class=\"line\">                android:background=<span class=\"string\">&quot;@drawable/record_statue_selecter&quot;</span> /&gt;</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E0D;&#x4F46;&#x53EF;&#x4EE5;&#x753B;&#x51FA;&#x5706;&#x5F62;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x753B;&#x77E9;&#x5F62;&#xFF0C;&#x76F4;&#x7EBF;&#xFF0C;&#x73AF;&#x5F62;&#xFF0C;&#x692D;&#x5706;&#x3002;&#x4EE5;&#x53CA;&#x8BBE;&#x7F6E;&#x5706;&#x89D2;&#xFF0C;&#x8FB9;&#x7EBF;&#x7B49;&#x7B49;&#x3002;</p>\n","excerpt":"","more":"<p>&#x4ECA;&#x5929;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x5F55;&#x5236;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5F55;&#x5236;&#x7684;&#x6309;&#x94AE;&#x8981;&#x548C;ios&#x7684;&#x4E00;&#x81F4;&#xFF0C;&#x89C9;&#x5F97;&#x7528;drawable&#x5B9E;&#x73B0;&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762;&#x5148;&#x770B;&#x770B;&#x6548;&#x679C;<br><img src=\"/2016/08/15/&#x4F7F;&#x7528;drawable&#x6765;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x6309;&#x94AE;&#x4EE5;&#x53CA;&#x70B9;&#x51FB;&#x6548;&#x679C;/btn_normal.jpg\" alt=\"btn_normal\"><br><img src=\"/2016/08/15/&#x4F7F;&#x7528;drawable&#x6765;&#x5B9E;&#x73B0;&#x5706;&#x5F62;&#x6309;&#x94AE;&#x4EE5;&#x53CA;&#x70B9;&#x51FB;&#x6548;&#x679C;/btn_click.jpg\" alt=\"btn_click\"></p>\n<h3 id=\"1-&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record-normal-shape-xml\"><a href=\"#1-&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record-normal-shape-xml\" class=\"headerlink\" title=\"1.&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record_normal_shape.xml\"></a>1.&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;record_normal_shape.xml</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</div><div class=\"line\">    &lt;item&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">            android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;2dp&quot;</div><div class=\"line\">        android:top=&quot;2dp&quot;</div><div class=\"line\">        android:left=&quot;2dp&quot;</div><div class=\"line\">        android:right=&quot;2dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/black&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;4dp&quot;</div><div class=\"line\">        android:top=&quot;4dp&quot;</div><div class=\"line\">        android:left=&quot;4dp&quot;</div><div class=\"line\">        android:right=&quot;4dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/layer-list&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"2-&#x65B0;&#x5EFA;record-click-shape-xml\"><a href=\"#2-&#x65B0;&#x5EFA;record-click-shape-xml\" class=\"headerlink\" title=\"2.&#x65B0;&#x5EFA;record_click_shape.xml\"></a>2.&#x65B0;&#x5EFA;record_click_shape.xml</h3><p>&#x4EE3;&#x7801;&#x57FA;&#x672C;&#x548C;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x989C;&#x8272;&#x7531;&#x767D;&#x8272;&#x53D8;&#x4E3A;&#x7EA2;&#x8272;<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</div><div class=\"line\">    &lt;item&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/white&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">            android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;2dp&quot;</div><div class=\"line\">        android:top=&quot;2dp&quot;</div><div class=\"line\">        android:left=&quot;2dp&quot;</div><div class=\"line\">        android:right=&quot;2dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/black&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:bottom=&quot;4dp&quot;</div><div class=\"line\">        android:top=&quot;4dp&quot;</div><div class=\"line\">        android:left=&quot;4dp&quot;</div><div class=\"line\">        android:right=&quot;4dp&quot;&gt;</div><div class=\"line\">        &lt;shape android:shape=&quot;oval&quot; &gt;</div><div class=\"line\">            &lt;solid</div><div class=\"line\">                android:color=&quot;@color/red&quot;/&gt;</div><div class=\"line\">            &lt;size android:width=&quot;20dp&quot;</div><div class=\"line\">                android:height=&quot;20dp&quot;/&gt;</div><div class=\"line\">        &lt;/shape&gt;</div><div class=\"line\">    &lt;/item&gt;</div><div class=\"line\">&lt;/layer-list&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-&#x65B0;&#x5EFA;record-statue-selector-xml\"><a href=\"#3-&#x65B0;&#x5EFA;record-statue-selector-xml\" class=\"headerlink\" title=\"3.&#x65B0;&#x5EFA;record_statue_selector.xml\"></a>3.&#x65B0;&#x5EFA;record_statue_selector.xml</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class=\"line\">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_focused=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_pressed=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_click_shape&quot; android:state_selected=&quot;true&quot;/&gt;</div><div class=\"line\">    &lt;item android:drawable=&quot;@drawable/record_normal_shape&quot;/&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/selector&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"4-&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\"><a href=\"#4-&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\" class=\"headerlink\" title=\"4.&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;\"></a>4.&#x76F4;&#x63A5;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;background&#x65E2;&#x53EF;</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ImageButton</div><div class=\"line\">                android:id=<span class=\"string\">&quot;@id/btn_recorder_record&quot;</span></div><div class=\"line\">                android:layout_width=<span class=\"string\">&quot;70dp&quot;</span></div><div class=\"line\">                android:layout_height=<span class=\"string\">&quot;70dp&quot;</span></div><div class=\"line\">                android:layout_centerInParent=<span class=\"string\">&quot;true&quot;</span></div><div class=\"line\">                android:background=<span class=\"string\">&quot;@drawable/record_statue_selecter&quot;</span> /&gt;</div></pre></td></tr></table></figure>\n<p>&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E0D;&#x4F46;&#x53EF;&#x4EE5;&#x753B;&#x51FA;&#x5706;&#x5F62;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x753B;&#x77E9;&#x5F62;&#xFF0C;&#x76F4;&#x7EBF;&#xFF0C;&#x73AF;&#x5F62;&#xFF0C;&#x692D;&#x5706;&#x3002;&#x4EE5;&#x53CA;&#x8BBE;&#x7F6E;&#x5706;&#x89D2;&#xFF0C;&#x8FB9;&#x7EBF;&#x7B49;&#x7B49;&#x3002;</p>\n"},{"title":"实现自定义banner","date":"2016-08-25T06:54:23.000Z","_content":"\n要做一个不停滚动的通知，类似banner，由于比较简单的功能，这里就没有用banner的框架，自己简单实现封装了下，最开始用的TimerTask，一开始用的挺正常的，可是放置时间久了后后界面就乱了。。。于是看了下开源banner框架的源码，别人用Handler postDelayed实现的。。。于是改改改，测试了下正常了，应该是线程的问题，暂时还不明白具体原因。\n\n### 1.用TimerTask实现的乱掉的界面如图\n![1](实现自定义banner/1.jpg)\n\n### 2.用Handler实现的，如图\n![2](实现自定义banner/2.gif)\n\n##### 2.1代码很简单，这里只做了简单的封装\n\n```java\nimport android.content.Context;\nimport android.os.Handler;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.animation.Animation;\nimport android.view.animation.TranslateAnimation;\nimport android.widget.RelativeLayout;\n\nimport com.tyky.edu.teacher.R;\nimport java.util.List;\n\n/**\n * Created by Dino on 8/25 0025.\n */\n\npublic class NewNoticeBanner {\n    private TranslateAnimation mShowAction;\n    private TranslateAnimation mHiddenAction;\n    private Context context;\n    private int count =0;\n    private ViewGroup parentView;\n    private List<View> views;\n    private boolean turning = false;\n    private long autoTurningTime;\n    private RelativeLayout rlNodata;\n    private Handler timeHandler = new Handler();\n    private Runnable adSwitchTask = new Runnable() {\n        @Override\n        public void run() {\n            if (parentView != null && turning) {\n                View view = parentView.getChildAt(0);\n                if(view!=null){\n                    view.setVisibility(View.GONE);\n                    view.startAnimation(mHiddenAction);\n                }\n                parentView.removeAllViews();\n                if(count<=views.size()-1){\n                    parentView.addView(views.get(count));\n                }else{\n                    count=0;\n                    parentView.addView(views.get(count));\n                }\n                views.get(count).setVisibility(View.VISIBLE);\n                views.get(count).startAnimation(mShowAction);\n                count++;\n                timeHandler.postDelayed(adSwitchTask, autoTurningTime);\n            }\n        }\n    };\n\n    private static class Holder{\n        static NewNoticeBanner INSTANCE = new NewNoticeBanner();\n    }\n    public static synchronized NewNoticeBanner getInstance() {\n        return NewNoticeBanner.Holder.INSTANCE;\n    }\n\n    public NewNoticeBanner init(Context context,ViewGroup parentView){\n        this.parentView = parentView;\n        this.context = context;\n        //初始化动画\n        mShowAction = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,\n                Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF,\n                2.0f,Animation.RELATIVE_TO_SELF, 0.0f);\n        mShowAction.setDuration(500);\n        mHiddenAction = new TranslateAnimation(Animation.RELATIVE_TO_SELF,\n                0.0f, Animation.RELATIVE_TO_SELF, 0.0f,\n                Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,-1.0f);\n        mHiddenAction.setDuration(500);\n\n        //初始化无数据布局\n        rlNodata = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.new_notice_nodata,null);\n        return this;\n    }\n\n    public NewNoticeBanner initViews(List<View> views){\n        this.views = views;\n        if(views==null||views.size()==0){\n            parentView.removeAllViews();\n            parentView.addView(rlNodata);\n        }else if(views.size()==1){\n            parentView.removeAllViews();\n            parentView.addView(views.get(0));\n        }\n        return  this;\n    }\n\n    public void startTurning(long autoTurningTime) {\n        if(views!=null&&views.size()>1) {\n            //如果是正在翻页的话先停掉\n            if (turning) {\n                stopTurning();\n            }\n            turning = true;\n            this.autoTurningTime = autoTurningTime;\n            timeHandler.postDelayed(adSwitchTask, autoTurningTime);\n        }\n    }\n\n    public void stopTurning() {\n        turning = false;\n        timeHandler.removeCallbacks(adSwitchTask);\n    }\n\n}\n\n```\n\n##### 2.2在activity里面调用\n\n```java\nprivate void initNoticeBanner(){\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                getNewNotice();//查询数据库，然后新建子view\n                getActivity().runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        newNoticeBanner = NewNoticeBanner.getInstance().init(getActivity(),noticeRl).initViews(noticeViews);\n                        onResume();\n                    }\n                });\n            }\n        }).start();\n    }\n@Override\n    public void onStop() {\n        super.onStop();\n        stopBanner();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        stopBanner();\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        startBanner();\n    }\n\n    private void startBanner(){\n        if(newNoticeBanner!=null){\n            newNoticeBanner.startTurning(3000);\n        }\n    }\n    private void stopBanner(){\n        if(newNoticeBanner!=null){\n            newNoticeBanner.stopTurning();\n        }\n    }\n```\n\n由于数据库操作比较重，查询数据的地方最好写在子线程里，在后台运行或者跳到其他页面也要记得stop","source":"_posts/实现自定义banner.md","raw":"---\ntitle: 实现自定义banner\ndate: 2016-08-25 14:54:23\ntags: Android\n---\n\n要做一个不停滚动的通知，类似banner，由于比较简单的功能，这里就没有用banner的框架，自己简单实现封装了下，最开始用的TimerTask，一开始用的挺正常的，可是放置时间久了后后界面就乱了。。。于是看了下开源banner框架的源码，别人用Handler postDelayed实现的。。。于是改改改，测试了下正常了，应该是线程的问题，暂时还不明白具体原因。\n\n### 1.用TimerTask实现的乱掉的界面如图\n![1](实现自定义banner/1.jpg)\n\n### 2.用Handler实现的，如图\n![2](实现自定义banner/2.gif)\n\n##### 2.1代码很简单，这里只做了简单的封装\n\n```java\nimport android.content.Context;\nimport android.os.Handler;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.animation.Animation;\nimport android.view.animation.TranslateAnimation;\nimport android.widget.RelativeLayout;\n\nimport com.tyky.edu.teacher.R;\nimport java.util.List;\n\n/**\n * Created by Dino on 8/25 0025.\n */\n\npublic class NewNoticeBanner {\n    private TranslateAnimation mShowAction;\n    private TranslateAnimation mHiddenAction;\n    private Context context;\n    private int count =0;\n    private ViewGroup parentView;\n    private List<View> views;\n    private boolean turning = false;\n    private long autoTurningTime;\n    private RelativeLayout rlNodata;\n    private Handler timeHandler = new Handler();\n    private Runnable adSwitchTask = new Runnable() {\n        @Override\n        public void run() {\n            if (parentView != null && turning) {\n                View view = parentView.getChildAt(0);\n                if(view!=null){\n                    view.setVisibility(View.GONE);\n                    view.startAnimation(mHiddenAction);\n                }\n                parentView.removeAllViews();\n                if(count<=views.size()-1){\n                    parentView.addView(views.get(count));\n                }else{\n                    count=0;\n                    parentView.addView(views.get(count));\n                }\n                views.get(count).setVisibility(View.VISIBLE);\n                views.get(count).startAnimation(mShowAction);\n                count++;\n                timeHandler.postDelayed(adSwitchTask, autoTurningTime);\n            }\n        }\n    };\n\n    private static class Holder{\n        static NewNoticeBanner INSTANCE = new NewNoticeBanner();\n    }\n    public static synchronized NewNoticeBanner getInstance() {\n        return NewNoticeBanner.Holder.INSTANCE;\n    }\n\n    public NewNoticeBanner init(Context context,ViewGroup parentView){\n        this.parentView = parentView;\n        this.context = context;\n        //初始化动画\n        mShowAction = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,\n                Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF,\n                2.0f,Animation.RELATIVE_TO_SELF, 0.0f);\n        mShowAction.setDuration(500);\n        mHiddenAction = new TranslateAnimation(Animation.RELATIVE_TO_SELF,\n                0.0f, Animation.RELATIVE_TO_SELF, 0.0f,\n                Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,-1.0f);\n        mHiddenAction.setDuration(500);\n\n        //初始化无数据布局\n        rlNodata = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.new_notice_nodata,null);\n        return this;\n    }\n\n    public NewNoticeBanner initViews(List<View> views){\n        this.views = views;\n        if(views==null||views.size()==0){\n            parentView.removeAllViews();\n            parentView.addView(rlNodata);\n        }else if(views.size()==1){\n            parentView.removeAllViews();\n            parentView.addView(views.get(0));\n        }\n        return  this;\n    }\n\n    public void startTurning(long autoTurningTime) {\n        if(views!=null&&views.size()>1) {\n            //如果是正在翻页的话先停掉\n            if (turning) {\n                stopTurning();\n            }\n            turning = true;\n            this.autoTurningTime = autoTurningTime;\n            timeHandler.postDelayed(adSwitchTask, autoTurningTime);\n        }\n    }\n\n    public void stopTurning() {\n        turning = false;\n        timeHandler.removeCallbacks(adSwitchTask);\n    }\n\n}\n\n```\n\n##### 2.2在activity里面调用\n\n```java\nprivate void initNoticeBanner(){\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                getNewNotice();//查询数据库，然后新建子view\n                getActivity().runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        newNoticeBanner = NewNoticeBanner.getInstance().init(getActivity(),noticeRl).initViews(noticeViews);\n                        onResume();\n                    }\n                });\n            }\n        }).start();\n    }\n@Override\n    public void onStop() {\n        super.onStop();\n        stopBanner();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        stopBanner();\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        startBanner();\n    }\n\n    private void startBanner(){\n        if(newNoticeBanner!=null){\n            newNoticeBanner.startTurning(3000);\n        }\n    }\n    private void stopBanner(){\n        if(newNoticeBanner!=null){\n            newNoticeBanner.stopTurning();\n        }\n    }\n```\n\n由于数据库操作比较重，查询数据的地方最好写在子线程里，在后台运行或者跳到其他页面也要记得stop","slug":"实现自定义banner","published":1,"updated":"2016-08-26T01:42:31.478Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciu3wcwhm000ppkm8bodj7o5p","content":"<p>&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x4E0D;&#x505C;&#x6EDA;&#x52A8;&#x7684;&#x901A;&#x77E5;&#xFF0C;&#x7C7B;&#x4F3C;banner&#xFF0C;&#x7531;&#x4E8E;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x6CA1;&#x6709;&#x7528;banner&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x5DF1;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x5C01;&#x88C5;&#x4E86;&#x4E0B;&#xFF0C;&#x6700;&#x5F00;&#x59CB;&#x7528;&#x7684;TimerTask&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x7528;&#x7684;&#x633A;&#x6B63;&#x5E38;&#x7684;&#xFF0C;&#x53EF;&#x662F;&#x653E;&#x7F6E;&#x65F6;&#x95F4;&#x4E45;&#x4E86;&#x540E;&#x540E;&#x754C;&#x9762;&#x5C31;&#x4E71;&#x4E86;&#x3002;&#x3002;&#x3002;&#x4E8E;&#x662F;&#x770B;&#x4E86;&#x4E0B;&#x5F00;&#x6E90;banner&#x6846;&#x67B6;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x522B;&#x4EBA;&#x7528;Handler postDelayed&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x3002;&#x3002;&#x4E8E;&#x662F;&#x6539;&#x6539;&#x6539;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E86;&#x4E0B;&#x6B63;&#x5E38;&#x4E86;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x7EBF;&#x7A0B;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6682;&#x65F6;&#x8FD8;&#x4E0D;&#x660E;&#x767D;&#x5177;&#x4F53;&#x539F;&#x56E0;&#x3002;</p>\n<h3 id=\"1-&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\"><a href=\"#1-&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"1.&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\"></a>1.&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/25/&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;banner/1.jpg\" alt=\"1\"></p>\n<h3 id=\"2-&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\"><a href=\"#2-&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"2.&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\"></a>2.&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/25/&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;banner/2.gif\" alt=\"2\"></p>\n<h5 id=\"2-1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\"><a href=\"#2-1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"2.1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\"></a>2.1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Handler;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.LayoutInflater;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.ViewGroup;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.Animation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.TranslateAnimation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.RelativeLayout;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.tyky.edu.teacher.R;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.List;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/25 0025.</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NewNoticeBanner</span> </span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> TranslateAnimation mShowAction;</div><div class=\"line\">    <span class=\"keyword\">private</span> TranslateAnimation mHiddenAction;</div><div class=\"line\">    <span class=\"keyword\">private</span> Context context;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> count =<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> ViewGroup parentView;</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;View&gt; views;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> turning = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> autoTurningTime;</div><div class=\"line\">    <span class=\"keyword\">private</span> RelativeLayout rlNodata;</div><div class=\"line\">    <span class=\"keyword\">private</span> Handler timeHandler = <span class=\"keyword\">new</span> Handler();</div><div class=\"line\">    <span class=\"keyword\">private</span> Runnable adSwitchTask = <span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">            <span class=\"keyword\">if</span> (parentView != <span class=\"keyword\">null</span> &amp;&amp; turning) {</div><div class=\"line\">                View view = parentView.getChildAt(<span class=\"number\">0</span>);</div><div class=\"line\">                <span class=\"keyword\">if</span>(view!=<span class=\"keyword\">null</span>){</div><div class=\"line\">                    view.setVisibility(View.GONE);</div><div class=\"line\">                    view.startAnimation(mHiddenAction);</div><div class=\"line\">                }</div><div class=\"line\">                parentView.removeAllViews();</div><div class=\"line\">                <span class=\"keyword\">if</span>(count&lt;=views.size()-<span class=\"number\">1</span>){</div><div class=\"line\">                    parentView.addView(views.get(count));</div><div class=\"line\">                }<span class=\"keyword\">else</span>{</div><div class=\"line\">                    count=<span class=\"number\">0</span>;</div><div class=\"line\">                    parentView.addView(views.get(count));</div><div class=\"line\">                }</div><div class=\"line\">                views.get(count).setVisibility(View.VISIBLE);</div><div class=\"line\">                views.get(count).startAnimation(mShowAction);</div><div class=\"line\">                count++;</div><div class=\"line\">                timeHandler.postDelayed(adSwitchTask, autoTurningTime);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Holder</span></span>{</div><div class=\"line\">        <span class=\"keyword\">static</span> NewNoticeBanner INSTANCE = <span class=\"keyword\">new</span> NewNoticeBanner();</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> NewNoticeBanner <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">return</span> NewNoticeBanner.Holder.INSTANCE;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> NewNoticeBanner <span class=\"title\">init</span><span class=\"params\">(Context context,ViewGroup parentView)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.parentView = parentView;</div><div class=\"line\">        <span class=\"keyword\">this</span>.context = context;</div><div class=\"line\">        <span class=\"comment\">//&#x521D;&#x59CB;&#x5316;&#x52A8;&#x753B;</span></div><div class=\"line\">        mShowAction = <span class=\"keyword\">new</span> TranslateAnimation(Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,</div><div class=\"line\">                Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,Animation.RELATIVE_TO_SELF,</div><div class=\"line\">                <span class=\"number\">2.0f</span>,Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>);</div><div class=\"line\">        mShowAction.setDuration(<span class=\"number\">500</span>);</div><div class=\"line\">        mHiddenAction = <span class=\"keyword\">new</span> TranslateAnimation(Animation.RELATIVE_TO_SELF,</div><div class=\"line\">                <span class=\"number\">0.0f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,</div><div class=\"line\">                Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>, Animation.RELATIVE_TO_SELF,-<span class=\"number\">1.0f</span>);</div><div class=\"line\">        mHiddenAction.setDuration(<span class=\"number\">500</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x521D;&#x59CB;&#x5316;&#x65E0;&#x6570;&#x636E;&#x5E03;&#x5C40;</span></div><div class=\"line\">        rlNodata = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.new_notice_nodata,<span class=\"keyword\">null</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> NewNoticeBanner <span class=\"title\">initViews</span><span class=\"params\">(List&lt;View&gt; views)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.views = views;</div><div class=\"line\">        <span class=\"keyword\">if</span>(views==<span class=\"keyword\">null</span>||views.size()==<span class=\"number\">0</span>){</div><div class=\"line\">            parentView.removeAllViews();</div><div class=\"line\">            parentView.addView(rlNodata);</div><div class=\"line\">        }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(views.size()==<span class=\"number\">1</span>){</div><div class=\"line\">            parentView.removeAllViews();</div><div class=\"line\">            parentView.addView(views.get(<span class=\"number\">0</span>));</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">startTurning</span><span class=\"params\">(<span class=\"keyword\">long</span> autoTurningTime)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(views!=<span class=\"keyword\">null</span>&amp;&amp;views.size()&gt;<span class=\"number\">1</span>) {</div><div class=\"line\">            <span class=\"comment\">//&#x5982;&#x679C;&#x662F;&#x6B63;&#x5728;&#x7FFB;&#x9875;&#x7684;&#x8BDD;&#x5148;&#x505C;&#x6389;</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (turning) {</div><div class=\"line\">                stopTurning();</div><div class=\"line\">            }</div><div class=\"line\">            turning = <span class=\"keyword\">true</span>;</div><div class=\"line\">            <span class=\"keyword\">this</span>.autoTurningTime = autoTurningTime;</div><div class=\"line\">            timeHandler.postDelayed(adSwitchTask, autoTurningTime);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stopTurning</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        turning = <span class=\"keyword\">false</span>;</div><div class=\"line\">        timeHandler.removeCallbacks(adSwitchTask);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h5 id=\"2-2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\"><a href=\"#2-2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\" class=\"headerlink\" title=\"2.2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\"></a>2.2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initNoticeBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                getNewNotice();<span class=\"comment\">//&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x5EFA;&#x5B50;view</span></div><div class=\"line\">                getActivity().runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        newNoticeBanner = NewNoticeBanner.getInstance().init(getActivity(),noticeRl).initViews(noticeViews);</div><div class=\"line\">                        onResume();</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div><div class=\"line\">    }</div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">        stopBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        stopBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onResume();</div><div class=\"line\">        startBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">startBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(newNoticeBanner!=<span class=\"keyword\">null</span>){</div><div class=\"line\">            newNoticeBanner.startTurning(<span class=\"number\">3000</span>);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">stopBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(newNoticeBanner!=<span class=\"keyword\">null</span>){</div><div class=\"line\">            newNoticeBanner.stopTurning();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x91CD;&#xFF0C;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x5730;&#x65B9;&#x6700;&#x597D;&#x5199;&#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#x91CC;&#xFF0C;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x6216;&#x8005;&#x8DF3;&#x5230;&#x5176;&#x4ED6;&#x9875;&#x9762;&#x4E5F;&#x8981;&#x8BB0;&#x5F97;stop</p>\n","excerpt":"","more":"<p>&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x4E0D;&#x505C;&#x6EDA;&#x52A8;&#x7684;&#x901A;&#x77E5;&#xFF0C;&#x7C7B;&#x4F3C;banner&#xFF0C;&#x7531;&#x4E8E;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x6CA1;&#x6709;&#x7528;banner&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x5DF1;&#x7B80;&#x5355;&#x5B9E;&#x73B0;&#x5C01;&#x88C5;&#x4E86;&#x4E0B;&#xFF0C;&#x6700;&#x5F00;&#x59CB;&#x7528;&#x7684;TimerTask&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x7528;&#x7684;&#x633A;&#x6B63;&#x5E38;&#x7684;&#xFF0C;&#x53EF;&#x662F;&#x653E;&#x7F6E;&#x65F6;&#x95F4;&#x4E45;&#x4E86;&#x540E;&#x540E;&#x754C;&#x9762;&#x5C31;&#x4E71;&#x4E86;&#x3002;&#x3002;&#x3002;&#x4E8E;&#x662F;&#x770B;&#x4E86;&#x4E0B;&#x5F00;&#x6E90;banner&#x6846;&#x67B6;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x522B;&#x4EBA;&#x7528;Handler postDelayed&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x3002;&#x3002;&#x4E8E;&#x662F;&#x6539;&#x6539;&#x6539;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E86;&#x4E0B;&#x6B63;&#x5E38;&#x4E86;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x7EBF;&#x7A0B;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6682;&#x65F6;&#x8FD8;&#x4E0D;&#x660E;&#x767D;&#x5177;&#x4F53;&#x539F;&#x56E0;&#x3002;</p>\n<h3 id=\"1-&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\"><a href=\"#1-&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"1.&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;\"></a>1.&#x7528;TimerTask&#x5B9E;&#x73B0;&#x7684;&#x4E71;&#x6389;&#x7684;&#x754C;&#x9762;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/25/&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;banner/1.jpg\" alt=\"1\"></p>\n<h3 id=\"2-&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\"><a href=\"#2-&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\" class=\"headerlink\" title=\"2.&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;\"></a>2.&#x7528;Handler&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x56FE;</h3><p><img src=\"/2016/08/25/&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;banner/2.gif\" alt=\"2\"></p>\n<h5 id=\"2-1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\"><a href=\"#2-1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\" class=\"headerlink\" title=\"2.1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;\"></a>2.1&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5C01;&#x88C5;</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Handler;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.LayoutInflater;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.ViewGroup;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.Animation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.TranslateAnimation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.RelativeLayout;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.tyky.edu.teacher.R;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.List;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Dino on 8/25 0025.</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NewNoticeBanner</span> </span>{</div><div class=\"line\">    <span class=\"keyword\">private</span> TranslateAnimation mShowAction;</div><div class=\"line\">    <span class=\"keyword\">private</span> TranslateAnimation mHiddenAction;</div><div class=\"line\">    <span class=\"keyword\">private</span> Context context;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> count =<span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> ViewGroup parentView;</div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;View&gt; views;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> turning = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> autoTurningTime;</div><div class=\"line\">    <span class=\"keyword\">private</span> RelativeLayout rlNodata;</div><div class=\"line\">    <span class=\"keyword\">private</span> Handler timeHandler = <span class=\"keyword\">new</span> Handler();</div><div class=\"line\">    <span class=\"keyword\">private</span> Runnable adSwitchTask = <span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">            <span class=\"keyword\">if</span> (parentView != <span class=\"keyword\">null</span> &amp;&amp; turning) {</div><div class=\"line\">                View view = parentView.getChildAt(<span class=\"number\">0</span>);</div><div class=\"line\">                <span class=\"keyword\">if</span>(view!=<span class=\"keyword\">null</span>){</div><div class=\"line\">                    view.setVisibility(View.GONE);</div><div class=\"line\">                    view.startAnimation(mHiddenAction);</div><div class=\"line\">                }</div><div class=\"line\">                parentView.removeAllViews();</div><div class=\"line\">                <span class=\"keyword\">if</span>(count&lt;=views.size()-<span class=\"number\">1</span>){</div><div class=\"line\">                    parentView.addView(views.get(count));</div><div class=\"line\">                }<span class=\"keyword\">else</span>{</div><div class=\"line\">                    count=<span class=\"number\">0</span>;</div><div class=\"line\">                    parentView.addView(views.get(count));</div><div class=\"line\">                }</div><div class=\"line\">                views.get(count).setVisibility(View.VISIBLE);</div><div class=\"line\">                views.get(count).startAnimation(mShowAction);</div><div class=\"line\">                count++;</div><div class=\"line\">                timeHandler.postDelayed(adSwitchTask, autoTurningTime);</div><div class=\"line\">            }</div><div class=\"line\">        }</div><div class=\"line\">    };</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Holder</span></span>{</div><div class=\"line\">        <span class=\"keyword\">static</span> NewNoticeBanner INSTANCE = <span class=\"keyword\">new</span> NewNoticeBanner();</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> NewNoticeBanner <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">return</span> NewNoticeBanner.Holder.INSTANCE;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> NewNoticeBanner <span class=\"title\">init</span><span class=\"params\">(Context context,ViewGroup parentView)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.parentView = parentView;</div><div class=\"line\">        <span class=\"keyword\">this</span>.context = context;</div><div class=\"line\">        <span class=\"comment\">//&#x521D;&#x59CB;&#x5316;&#x52A8;&#x753B;</span></div><div class=\"line\">        mShowAction = <span class=\"keyword\">new</span> TranslateAnimation(Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,</div><div class=\"line\">                Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,Animation.RELATIVE_TO_SELF,</div><div class=\"line\">                <span class=\"number\">2.0f</span>,Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>);</div><div class=\"line\">        mShowAction.setDuration(<span class=\"number\">500</span>);</div><div class=\"line\">        mHiddenAction = <span class=\"keyword\">new</span> TranslateAnimation(Animation.RELATIVE_TO_SELF,</div><div class=\"line\">                <span class=\"number\">0.0f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>,</div><div class=\"line\">                Animation.RELATIVE_TO_SELF, <span class=\"number\">0.0f</span>, Animation.RELATIVE_TO_SELF,-<span class=\"number\">1.0f</span>);</div><div class=\"line\">        mHiddenAction.setDuration(<span class=\"number\">500</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//&#x521D;&#x59CB;&#x5316;&#x65E0;&#x6570;&#x636E;&#x5E03;&#x5C40;</span></div><div class=\"line\">        rlNodata = (RelativeLayout) LayoutInflater.from(context).inflate(R.layout.new_notice_nodata,<span class=\"keyword\">null</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> NewNoticeBanner <span class=\"title\">initViews</span><span class=\"params\">(List&lt;View&gt; views)</span></span>{</div><div class=\"line\">        <span class=\"keyword\">this</span>.views = views;</div><div class=\"line\">        <span class=\"keyword\">if</span>(views==<span class=\"keyword\">null</span>||views.size()==<span class=\"number\">0</span>){</div><div class=\"line\">            parentView.removeAllViews();</div><div class=\"line\">            parentView.addView(rlNodata);</div><div class=\"line\">        }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(views.size()==<span class=\"number\">1</span>){</div><div class=\"line\">            parentView.removeAllViews();</div><div class=\"line\">            parentView.addView(views.get(<span class=\"number\">0</span>));</div><div class=\"line\">        }</div><div class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"keyword\">this</span>;</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">startTurning</span><span class=\"params\">(<span class=\"keyword\">long</span> autoTurningTime)</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(views!=<span class=\"keyword\">null</span>&amp;&amp;views.size()&gt;<span class=\"number\">1</span>) {</div><div class=\"line\">            <span class=\"comment\">//&#x5982;&#x679C;&#x662F;&#x6B63;&#x5728;&#x7FFB;&#x9875;&#x7684;&#x8BDD;&#x5148;&#x505C;&#x6389;</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (turning) {</div><div class=\"line\">                stopTurning();</div><div class=\"line\">            }</div><div class=\"line\">            turning = <span class=\"keyword\">true</span>;</div><div class=\"line\">            <span class=\"keyword\">this</span>.autoTurningTime = autoTurningTime;</div><div class=\"line\">            timeHandler.postDelayed(adSwitchTask, autoTurningTime);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stopTurning</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        turning = <span class=\"keyword\">false</span>;</div><div class=\"line\">        timeHandler.removeCallbacks(adSwitchTask);</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">}</div></pre></td></tr></table></figure>\n<h5 id=\"2-2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\"><a href=\"#2-2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\" class=\"headerlink\" title=\"2.2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;\"></a>2.2&#x5728;activity&#x91CC;&#x9762;&#x8C03;&#x7528;</h5><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initNoticeBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                getNewNotice();<span class=\"comment\">//&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x5EFA;&#x5B50;view</span></div><div class=\"line\">                getActivity().runOnUiThread(<span class=\"keyword\">new</span> Runnable() {</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">                        newNoticeBanner = NewNoticeBanner.getInstance().init(getActivity(),noticeRl).initViews(noticeViews);</div><div class=\"line\">                        onResume();</div><div class=\"line\">                    }</div><div class=\"line\">                });</div><div class=\"line\">            }</div><div class=\"line\">        }).start();</div><div class=\"line\">    }</div><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onStop();</div><div class=\"line\">        stopBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        stopBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>{</div><div class=\"line\">        <span class=\"keyword\">super</span>.onResume();</div><div class=\"line\">        startBanner();</div><div class=\"line\">    }</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">startBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(newNoticeBanner!=<span class=\"keyword\">null</span>){</div><div class=\"line\">            newNoticeBanner.startTurning(<span class=\"number\">3000</span>);</div><div class=\"line\">        }</div><div class=\"line\">    }</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">stopBanner</span><span class=\"params\">()</span></span>{</div><div class=\"line\">        <span class=\"keyword\">if</span>(newNoticeBanner!=<span class=\"keyword\">null</span>){</div><div class=\"line\">            newNoticeBanner.stopTurning();</div><div class=\"line\">        }</div><div class=\"line\">    }</div></pre></td></tr></table></figure>\n<p>&#x7531;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x91CD;&#xFF0C;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x5730;&#x65B9;&#x6700;&#x597D;&#x5199;&#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#x91CC;&#xFF0C;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x6216;&#x8005;&#x8DF3;&#x5230;&#x5176;&#x4ED6;&#x9875;&#x9762;&#x4E5F;&#x8981;&#x8BB0;&#x5F97;stop</p>\n"}],"PostAsset":[{"_id":"source/_posts/2016-8-8/catalog.jpg","post":"ciu3wcwgc0000pkm8nt5dtrz9","slug":"catalog.jpg","modified":1,"renderable":1},{"_id":"source/_posts/为过滤动态加入单选按钮/1.gif","slug":"1.gif","post":"ciu3wcwgy0008pkm85gxmo3pt","modified":1,"renderable":0},{"_id":"source/_posts/仿ios下载控件/2.gif","slug":"2.gif","post":"ciu3wcwh8000fpkm8btnqonru","modified":1,"renderable":0},{"_id":"source/_posts/Android读取json配置/filter.jpg","post":"ciu3wcwhg000kpkm8qh6wu9oy","slug":"filter.jpg","modified":1,"renderable":1},{"_id":"source/_posts/2016-08-05/addsshkeytogithub.png","post":"ciu3wcwgm0002pkm827jlr5wq","slug":"addsshkeytogithub.png","modified":1,"renderable":1},{"_id":"source/_posts/2016-08-05/sshkeyresult.png","post":"ciu3wcwgm0002pkm827jlr5wq","slug":"sshkeyresult.png","modified":1,"renderable":1},{"_id":"source/_posts/使用drawable来实现圆形按钮以及点击效果/btn_click.jpg","post":"ciu3wcwhi000npkm83sucpmqh","slug":"btn_click.jpg","modified":1,"renderable":1},{"_id":"source/_posts/使用drawable来实现圆形按钮以及点击效果/btn_normal.jpg","post":"ciu3wcwhi000npkm83sucpmqh","slug":"btn_normal.jpg","modified":1,"renderable":1},{"_id":"source/_posts/实现自定义banner/1.jpg","post":"ciu3wcwhm000ppkm8bodj7o5p","slug":"1.jpg","modified":1,"renderable":1},{"_id":"source/_posts/实现自定义banner/2.gif","post":"ciu3wcwhm000ppkm8bodj7o5p","slug":"2.gif","modified":1,"renderable":1}],"PostCategory":[],"PostTag":[{"post_id":"ciu3wcwgc0000pkm8nt5dtrz9","tag_id":"ciu3wcwgp0004pkm8uwij7u94","_id":"ciu3wcwh10009pkm8kvx6x2hz"},{"post_id":"ciu3wcwgm0002pkm827jlr5wq","tag_id":"ciu3wcwgp0004pkm8uwij7u94","_id":"ciu3wcwh6000dpkm85zp6s5b0"},{"post_id":"ciu3wcwh6000epkm8zkchbmxt","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwh9000hpkm8tvx9iaqu"},{"post_id":"ciu3wcwgs0005pkm8ovuv36h9","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwha000jpkm8w5wywver"},{"post_id":"ciu3wcwh8000fpkm8btnqonru","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhi000mpkm8kf5io5lz"},{"post_id":"ciu3wcwgv0006pkm8k7k1tdbk","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhm000opkm8xub09jqy"},{"post_id":"ciu3wcwhg000kpkm8qh6wu9oy","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhp000rpkm8xdqfiu5c"},{"post_id":"ciu3wcwhi000npkm83sucpmqh","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhp000spkm8j5921ahm"},{"post_id":"ciu3wcwgy0008pkm85gxmo3pt","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhq000upkm8reb3gdru"},{"post_id":"ciu3wcwhm000ppkm8bodj7o5p","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhr000vpkm8zqqj3g5t"},{"post_id":"ciu3wcwh2000apkm8ez1nd3f1","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwht000xpkm8rpvolvi0"},{"post_id":"ciu3wcwh5000cpkm8muucc1g5","tag_id":"ciu3wcwh4000bpkm8bu6g4h25","_id":"ciu3wcwhu000ypkm8voapwjn0"},{"post_id":"ciu3wcwh9000ipkm8m6tr69rm","tag_id":"ciu3wcwhs000wpkm8g8qvxhrw","_id":"ciu3wcwhu000zpkm81cwplz8d"}],"Tag":[{"name":"Hexo","_id":"ciu3wcwgp0004pkm8uwij7u94"},{"name":"Android","_id":"ciu3wcwh4000bpkm8bu6g4h25"},{"name":"其他","_id":"ciu3wcwhs000wpkm8g8qvxhrw"}]}}